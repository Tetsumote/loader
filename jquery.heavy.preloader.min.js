(function(window,document,$,undefined){"use strict";$.heavy=undefined==$.heavy?{}:$.heavy;$.heavy.preloader={name:"HeavyPreloader",version:"1.2.5.2b",method:"heavyPreload"};var plugin=$.heavy.preloader;var isImg=function(s){return/([^\s]+(?=\.(jp[e]?g|gif|png|tif[f]?|bmp))\.\2)/gi.test(s)},isVid=function(s){return/([^\s]+(?=\.(mp4|ogv|webm|ogg))\.\2)/gi.test(s)};$[plugin.method]=function(options,callback){var o=$.extend({},{urls:new Array,onProgress:null,stop:false},options||{}),c=function(){if($.isFunction(callback))callback.call(this)},j=o.urls.length,l=function(){if(o.stop)return;++i;o.progress=i/j*100;if($.isFunction(o.onProgress))o.onProgress();if(i==j)c()};if(j>0){var i=0;for(var k in o.urls){var url=o.urls[k];if(isImg(url))$(new Image).error(l).load(l).attr("src",url);if(isVid(url)){var $video=$("<video />",{src:url,type:"video/"+url.match(/mp4|ogv|ogg|webm/gi)}).on("progress",function(e){var vid=$video[0];if(!vid.duration){l();return}vid.currentTime++}).on("error",l).on("canplaythrough",l)}}}else c();return o},$.fn[plugin.method]=function(options,callback){return this.each(function(){var t=this,$t=$(t),o=$.extend({},{attrs:new Array,urls:new Array,onProgress:null},options||{}),g=function(s){if(undefined===s||s===false)return;var a=s.split(/,|\s/);for(var k in a){var s=a[k].replace(/\"|\'|\)|\(|url/gi,"");if(isImg(s)||isVid(s))o.urls.push(s)}};if($.data(t,$.heavy.preloader.name)&&!$t.data($.heavy.preloader.name).force)$t.data($.heavy.preloader.name).stop();if($t.is("img")){g($t.attr("src"));g($t.attr("srcset"))}if($t.is("video"))g(t.currentSrc);if(document!==t&&$t.css("background-image")!="none")g($t.css("background-image"));$t.find("img").each(function(){g($(this).attr("src"));g($(this).attr("srcset"))}).end().find("*:not(img)").filter(function(){return $(this).css("background-image")!="none"}).each(function(){g($(this).css("background-image"))}).end().end().find("video").each(function(){g(this.currentSrc)});for(var k in o.attrs)$t.find("["+o.attrs[k]+"]").each(function(){g($(this).attr(o.attrs[k]))});var m=new $[plugin.method]({urls:o.urls,onProgress:function(){o.progress=m.progress;if($.isFunction(o.onProgress))o.onProgress();return o}},function(){var w=typeof options==="function"&&typeof callback==="undefined"?options:callback;if($.isFunction(w))w.call(t);$.removeData(t,$.heavy.preloader.name)});$(this).data($.heavy.preloader.name,{stop:function(){m.stop=true;$.removeData(t,$.heavy.preloader.name)}})})}})(window,document,jQuery);