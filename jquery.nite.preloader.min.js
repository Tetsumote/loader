/*! JQuery Heavy Preloader | Daniele Fioroni | dfioroni91@gmail.com */(function(e,t,n,r){"use strict";if(!n)return console.error("jQuery is needed for $.fn.niteCrop() to work!"),r;var i={pipeline:!1,attributes:[],backgrounds:!1,playthrough:!1},s=function(e){var t={},r=[];n.isArray(e)&&(r=e),typeof e=="string"&&r.push(e);var s=n.extend(!0,i,t);this.done=n.noop(),this.progress=n.noop(),this.abort=function(){}};n.nitePreload=s,n.niteLazyload=function(){if(!(!!n.nite&&"inViewport"in n.nite&&"scroll"in n.nite)){console.log("nite is needed, maybe outdated?");return}n.nite.scroll("nitePreloader",function(){})};var o=function(e,s){var o=n.extend(!0,i,s),u=[],a=function(e,t,r){if(!e||!t||!t.length)return;o.backgrounds&&(e=e.replace(/url\(\"|url\(\'|url\(|((\"|\')\)$)/igm,""));var i="_"+Math.round((new Date).getTime()+Math.random()*100)+"_";e=e.replace(new RegExp("("+formats.image+"|"+formats.audio+"|"+formats.video+")(s|$|,)","igm"),function(e,t,n){return t+i}).split(new RegExp(i,"igm"));for(var s in e){var a=e[s],f=is(a,"audio"),l=is(a,"video"),c=is(a,"image");(c||l&&support("audio",f)||l&&support("audio",l))&&u.push(n.extend(!0,{$el:t},{url:a,type:r,ext:c||l||f}))}};o.attributes=typeof o.attributes=="string"?[o.attributes]:o.attributes;if(o.attributes&&!e.is("img")&&!e.is("audio")&&!e.is("video")&&!e.is("source"))for(var f in o.attributes){if(e.is("["+o.attributes[f]+"]")&&!e.is("img, audio, video, source")){var l=e.attr(o.attributes[f]);a(l,null,is(l,"image")?"image":"audio/video")}e.find("["+o.attributes[f]+"]:not(img, audio, video, source)").each(function(){var e=n(this).attr(o.attributes[f]);a(e,null,is(e,"image")?"image":"audio/video")})}if(e.is("video")||e.is("audio"))e.is("[src]")?a(n(this).attr("src"),e,"audio/video"):e.children("source").each(function(){var t=!1;n(this).is("[src]")&&(a(n(this).attr("src"),e,"audio/video"),t=!0);if(t)return!0;if(o.attributes)for(var i in o.attributes)n(this).is("["+o.attributes[i]+"]")&&(a(n(this).attr(o.attributes[i]),e,"audio/video"),t=!0);if(t)return!0;(r!==n.data(this,"src")||n(this).is("[data-src]"))&&a(n(this).data("src")||n(this).attr("data-src"),e,"audio/video")});if(e.is("source")){var c=!1;e.is("[src]")&&(a(e.attr("src"),e.closest("audio, video"),"audio/video"),c=!0);if(!c&&o.attributes)for(var f in o.attributes)e.is("["+o.attributes[f]+"]")&&(a(e.attr(o.attributes[f]),e.closest("audio, video"),"audio/video"),c=!0);!c&&(r!==n.data(e,"src")||e.is("[data-src]"))&&a(e.data("src")||e.attr("data-src"),e.closest("audio, video"),"audio/video")}e.find("video, audio").filter("[src]").each(function(){a(n(this).attr("src"),n(this),"audio/video")}).end().not("[src]").children("source").each(function(){var e=!1;n(this).is("[src]")&&(a(n(this).attr("src"),n(this).parent(),"audio/video"),e=!0);if(e)return!0;if(o.attributes)for(var t in o.attributes)n(this).is("["+o.attributes[t]+"]")&&(a(n(this).attr(o.attributes[t]),n(this).parent(),"audio/video"),e=!0);if(e)return!0;(r!==n.data(this,"src")||n(this).is("[data-src]"))&&a(n(this).data("src")||n(this).attr("data-src"),n(this).parent(),"audio/video")});if(e.is("img")){var c=!1;e.is("[src]")&&(a(e.attr("src"),e,"image"),c=!0),!c&&e.is("[srcset]")&&(a(e.prop("currentSrc")||e.prop("src"),e,"image"),c=!0);if(o.attributes)for(var f in o.attributes)e.is("["+o.attributes[f]+"]")&&(a(e.attr(o.attributes[f]),e,"image"),c=!0);!c&&(r!==n.data(e,"src")||e.is("[data-src]"))&&a(e.data("src")||e.attr("data-src"),e,"image")}return e.find("img").each(function(){var e=!1;n(this).is("[src]")&&(a(n(this).attr("src"),n(this),"image"),e=!0);if(e)return!0;n(this).is("[srcset]")&&(a(this.currentSrc||this.src,n(this),"image"),e=!0);if(e)return!0;if(o.attributes)for(var t in o.attributes)n(this).is("["+o.attributes[t]+"]")&&(a(n(this).attr(o.attributes[t]),n(this),"image"),e=!0);if(e)return!0;(r!==n.data(this,"src")||n(this).is("[data-src]"))&&a(n(this).data("src")||n(this).attr("data-src"),n(this),"image")}),o.backgrounds&&t!==e[0]&&e.css("background-image")!=="none"&&a(e.css("background-image"),null,"image"),o.backgrounds&&e.find("*:not(img)").filter(function(){return n(this).css("background-image")!=="none"}).each(function(){a(n(this).css("background-image"),null,"image")}),u};n.nitePreloaderFinder=o,n.fn.nitePreload=function(e,t){n.isFunction(e)&&r===t&&(t=e,e={});var u=n.extend(!0,i,e);return this.each(function(){var e=n(this),i=e.data("nitePreloader");r!==i&&i.abort(),i=new s(o(e,u)),i.progress(function(){}),i.done(function(){t.call(e[0])}),e.data("nitePreloader",i)})}})(window,document,jQuery);