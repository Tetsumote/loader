"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,n){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("loader",n):(e=e||self).loader=n()}(void 0,function(){var e=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"onload",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"onerror",o=arguments.length>4?arguments[4]:void 0;return new Promise(function(c,i){var u=document.createElement(n);u[t]=function(){return c(e)},u[r]=function(e,n,t,r,o){return i(o)},u.src=e,o&&o.appendChild(u)})},n=function(n){return e(n,"audio","onloadedmetadata")},t={IMAGE:["jp[e]?g","jpe","jif","jfif","jfi","gif","png","tif[f]?","bmp","dib","webp","ico","cur","svg"],AUDIO:["mp3","ogg","oga","spx","ogg","wav"],VIDEO:["mp4","ogg","ogv","webm"],SCRIPT:["js","mjs"],STYLE:["css"]},r=function(e){return e instanceof HTMLElement&&(e=function(e){if("currentSrc"in e)return e.currentSrc;throw new Error("Error while parsing the resource element.")}(e)),"string"==typeof e&&(e=function(e){for(var n in new RegExp("".concat(";base64,")).test(e)||(e=e.split(",").pop().split(" ").reduce(function(e,n){return e.length>n.length?e:n})),t){var r=t[n].join("|");if(new RegExp("(.(".concat(r,")$)|data:").concat(n,"/(").concat(r,")").concat(";base64,")).test(e)&&null!==(e.match(new RegExp(".(".concat(r,")$"),"g"))||e.match(new RegExp("^data:".concat(n,"/(").concat(r,")"),"g"))))return{type:n,url:e}}throw new Error("Error while parsing the resource string.")}(e)),e},o={image:function(n){return e(n,"img")},audio:function(e){return n(e)},video:function(e){return n(e)},style:function(e){return new Promise(function(n,t){var r=document.createElement("style");r.textContent='@import "'+e+'"',document.querySelector("head").appendChild(r)})},script:function(n){return e(n,"script","onloaded","onError",document.querySelector(appendTarget))}},c=function(e){return new Promise(function(n,t){try{e=r(e)}catch(e){t(e)}o[e.type](e.url).then(n).catch(t)})};return function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this._resources=n}return _createClass(e,[{key:"load",value:function(){var e=this;return new Promise(function(n,t){for(var r in e._resources)c(e._resources[r]).then(n).catch(function(){return t(new Error("Woa"))})})}}]),e}()});
//# sourceMappingURL=loader.min.js.map
