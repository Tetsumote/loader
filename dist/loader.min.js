"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(t,!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,r){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Loader",r):(e=e||self).Loader=r()}(void 0,function(){var e={url:"",proxy:null,attr:"src",success:"onload",error:"onerror"},r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return new Promise(function(t,n){(r=_objectSpread({},e,{},r)).proxy[r.success]=function(){return t(r.url)},r.proxy[r.error]=function(e,r,t,o,c){return n(c)},r.proxy[r.attr]=r.url})},t={url:"",proxy:null},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return r(_objectSpread({},_objectSpread({},t,{},e),{},{success:"onloadedmetadata"}))},o={IMAGE:["jp[e]?g","jpe","jif","jfif","jfi","gif","png","tif[f]?","bmp","dib","webp","ico","cur","svg"],AUDIO:["mp3","ogg","oga","spx","ogg","wav"],VIDEO:["mp4","ogg","ogv","webm"],SCRIPT:["js","mjs"],STYLE:["css"]},c=function(e){return e instanceof HTMLElement&&(e=function(e){if("currentSrc"in e)return e.currentSrc;throw new Error("Error while parsing the resource element.")}(e)),"string"==typeof e&&(e=function(e){for(var r in new RegExp("".concat(";base64,")).test(e)||(e=e.split(",").pop().split(" ").reduce(function(e,r){return e.length>r.length?e:r})),o){var t=o[r].join("|");if(r=r.toLowerCase(),new RegExp("(.(".concat(t,")$)|data:").concat(r,"/(").concat(t,")").concat(";base64,")).test(e)&&null!==(e.match(new RegExp(".(".concat(t,")$"),"g"))||e.match(new RegExp("^data:".concat(r,"/(").concat(t,")"),"g"))))return{type:r,url:e}}throw new Error("Error while parsing the resource string.")}(e)),e},i={image:function(e){return r({url:e,proxy:document.createElement("img")})},audio:function(e){return n({url:e,proxy:document.createElement("audio")})},video:function(e){return n({url:e,proxy:document.createElement("video")})},style:function(e){var t=document.createElement("link");t.rel="stylesheet";var n=r({url:e,proxy:t,attr:"href"});return document.head.appendChild(t),t.disabled="disabled",n.then(function(){return document.head.removeChild(t)}),n},script:function(e){var t=document.createElement("object");t.width=0,t.height=0;var n=r({url:e,proxy:t,attr:"data"});return document.body.appendChild(t),n.then(function(){return document.body.removeChild(t)}),n}},u=function(e){return new Promise(function(r,t){try{e=c(e)}catch(e){t(e)}i[e.type](e.url).then(r).catch(t)})};return function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this._resources=r}return _createClass(e,[{key:"load",value:function(){var e=this;return new Promise(function(r,t){for(var n in e._resources)u(e._resources[n]).then(r).catch(t)})}}]),e}()});
//# sourceMappingURL=loader.min.js.map
