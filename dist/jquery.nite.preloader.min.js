"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor,f="nite",e=f+"Preload",g=e+"er";if(function(a){a.console||(a.console={});for(var b,c,d=a.console,e=function(){},f=["memory"],g=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profiles","profileEnd","show","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];b=f.pop();)d[b]||(d[b]={});for(;c=g.pop();)d[c]||(d[c]=e)}(a),!c)return console.error("jQuery is needed for "+g+" to work!"),void 0;Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");else if("function"!=typeof a)throw new TypeError("callback must be a function");for(var b=Object(this),c=b.length>>>0,d=arguments[1],e=0;e<c;e++)if(a.call(d,b[e],e,b))return e;return-1},[].filter||(Array.prototype.filter=function(f,a,b,c,d){for(d in b=this,c=[],b)~~d+""==d&&0<=d&&f.call(a,b[d],+d,b)&&c.push(b[d]);return c});var h=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},i=c(b),j=c(a),k=function(){return c.nite?c.nite.uniqueId():d(8999*Math.random())+1e3},l=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>j.width()||e.top>j.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},m=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},n=function(a){return m(a)&&"currentSrc"in a&&a.currentSrc.length&&("complete"in a&&a.complete||"readyState"in a&&2<=a.readyState)},o=function(a){return n(a)&&("naturalWidth"in a&&0===d(a.naturalWidth)||"videoWidth"in a&&0===a.videoWidth)},p=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(m(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},q=function(){function d(a){_classCallCheck(this,d);var b=this;this._settings=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",playthrough:!1,visible:!1},a),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._busy=!1,this._format=null,this._callback=c.noop,this._done=function(a){var c=b._element.currentSrc||b._element.src;b._busy||b._$element.trigger(f+h(a.type)+"."+f,[b._$element,c]),b._$element.removeData(g),b._busy=!1,b._callback.call(null,a.type,c,b._id)}}return _createClass(d,[{key:"process",value:function(){var b=this,d=this._settings.srcAttr,e=this._settings.srcAttr.replace("data-","");if(n(this._element))return this._busy||this._$element.off("."+this._id_event),this._done(new Event(o(this._element)?"error":"load")),!1;if(this._settings.visible&&!l(this._element))return!1;if("image"===this._format){this._$element[this._busy?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var f=this._$element.closest("picture"),h=this._settings.srcsetAttr,i=this._settings.srcsetAttr.replace("data-","");f.length&&"HTMLPictureElement"in a?(this._$element.removeData(i).removeAttr(h).removeData(e).removeAttr(d),f.find("source["+h+"]").attr("srcset",f.data(i)).removeData(i).removeAttr(h)):(this._$element.is("["+h+"]")&&this._$element.attr("srcset",this._$element.data(i)).removeData(i).removeAttr(h),this._$element.is("["+d+"]")&&this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d))}else if("video"===this._format||"audio"===this._format){var j=this._$element.find("source"),k=function(a){var b=Math.round;return a.buffered.length&&1==b(a.buffered.end(0))/b(a.seekable.end(0))},m=!1;j.length?j.each(function(){c(this).is("["+d+"]")&&(c(this).attr("src",c(this).data(e)).removeData(e).removeAttr(d),m=!0)})[this._busy?"on":"one"]("error."+this._id_event,function(a){var d=g+"_error";c(this).data(d,!0),j.length===j.filter(function(){return!0===c(this).data(d)}).length&&b._done(a)}):this._$element.is("["+d+"]")&&(this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d)[this._busy?"on":"one"]("error."+this._id_event,b._done),m=!0),m&&this._element.load(),this._$element[this._busy?"on":"one"]("loadedmetadata."+this._id_event,function(){if(!0!==b._settings.playthrough&&"full"!==b._settings.playthrough&&b._done(new Event("load")),"full"===b._settings.playthrough){var a=setInterval(function(){var d=0<b._element.readyState&&!b._element.duration;d||k(b._element)?(b._element.currentTime=0,!d&&!b._busy&&b._element.paused&&c(b._element).is("[autoplay]")&&b._element.play(),clearInterval(a),b._done(new Event(d?"error":"load"))):(!b._element.paused&&b._element.pause(),!b._busy&&(b._element.currentTime+=2))},500);b._$element.data(b._id_event,a)}})[this._busy?"on":"one"]("canplay."+this._id_event,function(){"full"!==b._settings.playthrough||0!==this.currentTime||k(this)||this.currentTime++})[this._busy?"on":"one"]("canplaythrough."+this._id_event,function(){!0===b._settings.playthrough&&b._done(new Event("load"))})}else return!1;return this._busy||this._$element.data(g,this._id_event),this._resource=this._element.currentSrc||this._element.src,!this._busy}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!n(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c,d,e){a.call(b,c,d,e)}}}},{key:"resource",set:function(a){var d=m(a.resource),e="string"==typeof a.resource;if(d||e){if(this._id=a.id,this._format=p(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}d&&(this._element=a.resource),this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._busy=void 0!==this._id_event,this._id_event=this._busy?this._id_event:g+"_unique_"+this._element.tagName+"_"+k()}}}]),d}(),r=function(){function a(b,d){_classCallCheck(this,a);var e=this;if(this._collection=[],this._collection_loaded=[],this._collection_instances=[],this._resources_loaded=[],c.isArray(b)&&("string"==typeof b[0]||m(b[0])))for(var f in b)b.hasOwnProperty(f)&&this._collection.push({id:k(),resource:b[f]});("string"==typeof b||m(b))&&this._collection.push({id:k(),resource:b}),this._settings=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",playthrough:!1,visible:!1},d),this.percentage=0,this._callback=c.noop,this._progress=c.noop,this._abort=!1,this._loaded=0,this._complete=!1,this._busy=!1,this._loop=function a(){return setTimeout(function(){e.loop()},25),a}()}return _createClass(a,[{key:"loop",value:function(){for(var a,b=this,d=this,e=!0===this._settings.sequential,f=function(a){if(b._abort)return"break";var f=b._collection[a].id,g=d._collection_instances.findIndex(function(a){return a.id===f}),h=new q(b._settings);-1===g?(b._collection_instances.push({id:f,instance:h}),g=d._collection_instances.findIndex(function(a){return a.id===f})):b._collection_instances[g].instance=h,h.resource=b._collection[a];var i=null;h.done(function(a,b,f){if(!d._complete&&!d._abort&&-1===c.inArray(f,d._collection_loaded)){d._collection_loaded.push(f),d._busy=!1,d._loaded++,d.percentage=100*(d._loaded/d._collection.length);var g={resource:b,status:a};if(d._resources_loaded.push(g),d._progress.call(i,g),e){var h=d._collection_instances.findIndex(function(a){return a.id===f})+1;0<h&&h<d._collection_instances.length&&(h=d._collection_instances[h],h.instance.process())}}d._complete||d._abort||d._loaded!==d._collection.length||(d._callback.call(i,d._resources_loaded),d._complete=!0)}),e&&(!e||b._busy)||(b._busy=h.process())},g=0;g<this._collection.length&&(a=f(g),"break"!==a);g++);}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?(this._callback=d,this._loop()):d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?(this._progress=d,this._loop()):d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].instance.abort();this._collection.length&&(this._abort=!0)}}]),a}(),s=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b=this,d="img, video, audio",e=d+", picture, source",f=this._$element.find(d);if(this._$element.is(d)&&(f=f.add(this._$element)),f=f.filter(function(){var a="["+b._settings.srcAttr+"], ["+b._settings.srcsetAttr+"]";return c(this).is(a)||c(this).children(e).filter(a).length}),f.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(e).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var g=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+e+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(e)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)g(a)}return a}}]),a}();c[e]=r;var t=[];c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1,early:!1,earlyTimeout:0},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=this,e=c(a),h=new s(e,d).collect(),l=-1<c.inArray(a,h),m=g+"_"+k(),n=new r(h,d);if(t.push({id:m,instance:n,element:a,timeout:null}),n.progress(function(a){l||e.trigger(f+"Progress."+f,[e,a])}),n.done(function(g){for(var h in d.visible&&c(c.nite?i:j).off("scroll."+m),l||e.trigger(f+"Load."+f,[e,g]),b.call(a),t=t.filter(function(a){return a.id!==m}),t){var k=t[h];e.is(k.element)&&k.instance.loop()}}),d.visible)if(c.nite)c.nite.scroll(m,function(){n.loop()},{fps:25});else{var o=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};j.on("scroll."+m,o(function(){n.loop()},1e3))}if(!0===d.early)for(var p in t)if(t[p].id===m){var q=function(){var a=t[p];return clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.instance._settings.visible=!1,a.instance._settings.sequential=!0,a.instance.loop()},c.isNumeric(d.earlyTimeout)?parseInt(d.earlyTimeout):0),"break"}();if("break"===q)break}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxtQkE2RTRDLEtBQUEsQUFBSyxNQTVFN0MsRUFESixBQUN1QixPQUNuQixFQUFtQixFQUZ2QixBQUV3QyxVQUNwQyxFQUFZLEVBSGhCLEFBR2lDLEFBR2pDLEFBQ0EsQUFDQSxRQUFDLEFBQVMsV0FBUSxBQUNkLEFBQUksQ0FBQyxFQUFMLEFBQVksVUFDUixFQUFBLEFBQU8sQUFBVSxBQUNyQixtQkFBQSxBQUNJLEdBREosQUFDVSxFQUROLEVBQU0sRUFBVixBQUFpQixRQUViLEVBQUEsQUFBUSxVQUFXLEFBQUUsQ0FGekIsRUFBQSxBQUdJLEFBQWEsQUFBQyxhQUhsQixBQUlJLEFBQVUsQUFBQyxBQUNQLEFBQ0EsQUFBcUUsQUFBTSxBQUNuRiw4UEFBTyxFQUFPLEVBQWQsQUFBYyxBQUFXLEFBQ3JCLEFBQUksT0FBSixBQUFLLEFBQUksT0FEYixBQUVRLEFBQUksQUFBUSxBQUNwQixjQUFPLEVBQVMsRUFBaEIsQUFBZ0IsQUFBUSxBQUNwQixBQUFJLE9BQUosQUFBSyxBQUFJLE9BRGIsQUFFUSxBQUFJLEFBQVUsQUFDekIsT0FoQkQsQUFnQkcsQUFDSCxBQUdBLEFBQ0EsS0FBQSxBQUFJLEFBQUMsQUFBSSxBQUNMLEdBQ0EsQUFBTyxBQUNWLEFBQ0QsQUFHQSxBQUNBLEFBQ0EsZUFSSSxBQUFRLE1BQU0sQUFBd0IsMEJBQXRDLEFBQWdELEFBQ2hELDBCQU9KLEFBQU0sVUFBTixBQUFnQixVQUFZLE1BQUEsQUFBTSxVQUFOLEFBQWdCLFdBQWEsQUFBUyxXQUFVLEFBQ3hFLElBQUEsQUFBYSxBQUFNLEFBQ2YsSUFEQSxhQUNNLElBQUEsQUFBSSxXQURkLEFBQ0ksQUFBTSxBQUFjLEFBQ3ZCLDZEQUFNLElBQUEsQUFBd0IsQUFBWSxBQUN2QyxVQURPLEFBQU8sZ0JBQ1IsSUFB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LEFBQXVCLFNBQXZCLEFBQWdDLFVBQWhDLEFBQTBDLEFBQWEsQUFFdkQsZ0JBQUEsQUFBdUIsU0FBdkIsQUFBZ0MsQUFFbkMsTUFSZ0MsRUFROUIsRUFBQSxBQUFFLFVBQVUsRUFBWixBQUFxQixjQUFnQixTQUFTLEVBQTlDLEFBQXFDLEFBQWtCLGNBUjFELEFBQWlDLEFBUXlDLEFBRTFFLEdBaEJ1RCxPQUFBLG1CQWdCdkQsQUFFSCxLQW5CeUIsQUFxQmpDLENBM0ZELEFBQU8sQUE2RlYsRUE5SEQsQUFnSUgsQ0FqNUJELEdBQUEsQUFpNUJHLE9BajVCSCxBQWk1QlcsU0FqNUJYLEFBaTVCcUIiLCJmaWxlIjoianF1ZXJ5Lm5pdGUucHJlbG9hZGVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBKUXVlcnkgSGVhdnkgUmVzb3VyY2VzTG9hZGVyIHwgRGFuaWVsZSBGaW9yb25pIHwgZGZpb3Jvbmk5MUBnbWFpbC5jb20gKi9cbihmdW5jdGlvbih3aW5kb3csIGRvY3VtZW50LCAkLCB1bmRlZmluZWQpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGNvbnN0XG4gICAgICAgIG5hbWVzcGFjZV9wcmVmaXggPSAnbml0ZScsXG4gICAgICAgIG5hbWVzcGFjZV9tZXRob2QgPSBuYW1lc3BhY2VfcHJlZml4KydQcmVsb2FkJyxcbiAgICAgICAgbmFtZXNwYWNlID0gbmFtZXNwYWNlX21ldGhvZCsnZXInO1xuXG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcGF1bG1pbGxyL2NvbnNvbGUtcG9seWZpbGxcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbiAgICAoZnVuY3Rpb24oZ2xvYmFsKSB7XG4gICAgICAgIGlmICghZ2xvYmFsLmNvbnNvbGUpXG4gICAgICAgICAgICBnbG9iYWwuY29uc29sZSA9IHt9O1xuICAgICAgICBsZXQgY29uID0gZ2xvYmFsLmNvbnNvbGUsXG4gICAgICAgICAgICBwcm9wLCBtZXRob2QsXG4gICAgICAgICAgICBkdW1teSA9IGZ1bmN0aW9uKCkge30sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0gWydtZW1vcnknXSxcbiAgICAgICAgICAgIG1ldGhvZHMgPSAoJ2Fzc2VydCxjbGVhcixjb3VudCxkZWJ1ZyxkaXIsZGlyeG1sLGVycm9yLGV4Y2VwdGlvbixncm91cCwnICtcbiAgICAgICAgICAgICAgICAnZ3JvdXBDb2xsYXBzZWQsZ3JvdXBFbmQsaW5mbyxsb2csbWFya1RpbWVsaW5lLHByb2ZpbGUscHJvZmlsZXMscHJvZmlsZUVuZCwnICtcbiAgICAgICAgICAgICAgICAnc2hvdyx0YWJsZSx0aW1lLHRpbWVFbmQsdGltZWxpbmUsdGltZWxpbmVFbmQsdGltZVN0YW1wLHRyYWNlLHdhcm4nKS5zcGxpdCgnLCcpO1xuICAgICAgICB3aGlsZSAocHJvcCA9IHByb3BlcnRpZXMucG9wKCkpXG4gICAgICAgICAgICBpZiAoIWNvbltwcm9wXSlcbiAgICAgICAgICAgICAgICBjb25bcHJvcF0gPSB7fTtcbiAgICAgICAgd2hpbGUgKG1ldGhvZCA9IG1ldGhvZHMucG9wKCkpXG4gICAgICAgICAgICBpZiAoIWNvblttZXRob2RdKVxuICAgICAgICAgICAgICAgIGNvblttZXRob2RdID0gZHVtbXk7XG4gICAgfSkod2luZG93KTtcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblxuXG4gICAgLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG4gICAgaWYoICEkICkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdqUXVlcnkgaXMgbmVlZGVkIGZvciAnK25hbWVzcGFjZSsnIHRvIHdvcmshJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vanNQb2x5ZmlsbC9BcnJheS5wcm90b3R5cGUuZmluZEluZGV4L2Jsb2IvbWFzdGVyL2ZpbmRJbmRleC5qc1xuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuICAgIEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXggPSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4IHx8IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5wcm90b3R5cGUuZmluZEluZGV4IGNhbGxlZCBvbiBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIGxpc3QgPSBPYmplY3QodGhpcyksXG4gICAgICAgICAgICAvLyBNYWtlcyBzdXJlcyBpcyBhbHdheXMgaGFzIGFuIHBvc2l0aXZlIGludGVnZXIgYXMgbGVuZ3RoLlxuICAgICAgICAgICAgIGxlbmd0aCA9IGxpc3QubGVuZ3RoID4+PiAwLFxuICAgICAgICAgICAgIHRoaXNBcmcgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICggY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBsaXN0W2ldLCBpLCBsaXN0KSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblxuXG4gICAgLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZWxpcGVyZWxtYW4vMTAzMTY1NlxuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuICAgIFtdLmZpbHRlcnx8KEFycmF5LnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMsZCxlKXtjPXRoaXM7ZD1bXTtmb3IoZSBpbiBjKX5+ZSsnJz09ZSYmZT49MCYmYS5jYWxsKGIsY1tlXSwrZSxjKSYmZC5wdXNoKGNbZV0pO3JldHVybiBkfSlcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblxuXG5cbiAgICBjb25zdFxuXG4gICAgICAgIGNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHJpbmcpe1xuICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgICAgICAgfSxcblxuICAgICAgICAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KSxcbiAgICAgICAgJHdpbmRvdyA9ICQod2luZG93KSxcblxuICAgICAgICB1bmlxdWVfaWQgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICByZXR1cm4gJC5uaXRlID8gJC5uaXRlLnVuaXF1ZUlkKCkgOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoOTk5OSAtIDEwMDApKSArIDEwMDA7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpc192aXNpYmxlID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cbiAgICAgICAgICAgIGNvbnN0ICRlbCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGxldCBpbl92aWV3cG9ydCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiggJC5uaXRlIClcbiAgICAgICAgICAgICAgICBpbl92aWV3cG9ydCA9ICQubml0ZS5pblZpZXdwb3J0KGVsZW1lbnQpLnJhdGlvO1xuXG4gICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBpbl92aWV3cG9ydCA9ICEoIHJlY3QucmlnaHQgPCAwIHx8IHJlY3QuYm90dG9tIDwgMCB8fCByZWN0LmxlZnQgPiAkd2luZG93LndpZHRoKCkgfHwgcmVjdC50b3AgPiAkd2luZG93LmhlaWdodCgpICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGluX3ZpZXdwb3J0ICYmICRlbC5pcygnOnZpc2libGUnKSAmJiAkZWwuY3NzKCd2aXNpYmlsaXR5JykgIT09ICdoaWRkZW4nO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfaHRtbF9vYmplY3QgPSBmdW5jdGlvbiggb2JqZWN0ICl7XG5cbiAgICAgICAgICAgIGlmKCB0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0JyApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Qubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG9iamVjdC5zdHlsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5vd25lckRvY3VtZW50ID09PSAnb2JqZWN0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX2xvYWRlZCA9IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXG4gICAgICAgICAgICByZXR1cm4gaXNfaHRtbF9vYmplY3QoZWxlbWVudClcbiAgICAgICAgICAgICAgICAmJiAoICdjdXJyZW50U3JjJyBpbiBlbGVtZW50ICYmIGVsZW1lbnQuY3VycmVudFNyYy5sZW5ndGggKVxuICAgICAgICAgICAgICAgICYmICggKCAnY29tcGxldGUnIGluIGVsZW1lbnQgJiYgZWxlbWVudC5jb21wbGV0ZSApIHx8ICggJ3JlYWR5U3RhdGUnIGluIGVsZW1lbnQgJiYgZWxlbWVudC5yZWFkeVN0YXRlID49IDIgKSApO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfYnJva2VuID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cbiAgICAgICAgICAgIHJldHVybiBpc19sb2FkZWQoZWxlbWVudCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAoICduYXR1cmFsV2lkdGgnIGluIGVsZW1lbnQgJiYgTWF0aC5mbG9vcihlbGVtZW50Lm5hdHVyYWxXaWR0aCkgPT09IDAgKVxuICAgICAgICAgICAgICAgICAgICB8fFxuICAgICAgICAgICAgICAgICAgICAoICd2aWRlb1dpZHRoJyBpbiBlbGVtZW50ICYmIGVsZW1lbnQudmlkZW9XaWR0aCA9PT0gMCApXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgaXNfZm9ybWF0ID0gZnVuY3Rpb24oIGl0ZW0sIGV4cGVjdGVkX2Zvcm1hdCApe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGZvcm1hdF9leHRlbnNpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZSA6ICdqcFtlXT9nfGdpZnxwbmd8dGlmW2ZdP3xibXAnLFxuICAgICAgICAgICAgICAgICAgICBhdWRpbyA6ICdtcDN8b2dnJyxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gOiAnbXA0fG9ndnxvZ2d8d2VibSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvcm1hdF9uYW1lcyA9IE9iamVjdC5rZXlzKGZvcm1hdF9leHRlbnNpb25zKSxcbiAgICAgICAgICAgICAgICBiYXNlNjRfaGVhZGluZyA9ICdcXDtiYXNlNjRcXCwnO1xuXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0geyBmb3JtYXQ6IG51bGwsIGV4dGVuc2lvbjogbnVsbCB9O1xuXG4gICAgICAgICAgICBpZiggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJz8nKVswXTsgLy8gZ2V0IHJpZCBvZiBxdWVyeSBzdHJpbmdzXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJyMnKVswXTsgLy8gZ2V0IHJpZCBvZiBoYXNoZXNcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAnJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdF9xdWV1ZSA9IHVuZGVmaW5lZCAhPT0gZXhwZWN0ZWRfZm9ybWF0ID8gWyBleHBlY3RlZF9mb3JtYXQgXSA6IGZvcm1hdF9uYW1lcztcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeCBpbiBmb3JtYXRfcXVldWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0X3F1ZXVlLmhhc093blByb3BlcnR5KHgpKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhcXC4oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKSQpfCcgKyBiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXM2NCA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cCgnXmRhdGE6JyArIGZvcm1hdF9xdWV1ZVt4XSArICdcXC8oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKScsICdnJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoZXM2NCB8fCBudWxsID09PSBtYXRjaGVzNjQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczY0ID0gbWF0Y2hlczY0WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBtYXRjaGVzNjQucmVwbGFjZSgnZGF0YTonICsgZm9ybWF0X3F1ZXVlW3hdICsgJy9nJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cChmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dLCAnZycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gZm9ybWF0X3F1ZXVlW3hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmV4dGVuc2lvbiA9IG1hdGNoZXNbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggaXNfaHRtbF9vYmplY3QoaXRlbSkgKXtcblxuICAgICAgICAgICAgICAgIGxldCB0YWdfbmFtZSA9IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkLmluQXJyYXkodGFnX25hbWUsIGZvcm1hdF9uYW1lcykgPiAtMSApXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0YWdfbmFtZSA9PT0gJ2ltZycgKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gJ2ltYWdlJztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIFxuICAgICAgICB9O1xuXG4gICAgY2xhc3MgUmVzb3VyY2VMb2FkZXIge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHNyY0F0dHIgICAgIDogJ2RhdGEtc3JjJyxcbiAgICAgICAgICAgICAgICBzcmNzZXRBdHRyICA6ICdkYXRhLXNyY3NldCcsXG4gICAgICAgICAgICAgICAgcGxheXRocm91Z2ggOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB2aXNpYmxlICAgICA6IGZhbHNlXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5faWQgICAgICAgID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2lkX2V2ZW50ICA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgICA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCAgPSAkKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3Jlc291cmNlICA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9idXN5ICAgICAgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ICAgID0gbnVsbDtcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgID0gJC5ub29wO1xuICAgICAgICAgICAgdGhpcy5fZG9uZSAgICAgID0gZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgICAgICAgICBsZXQgcmVzb3VyY2UgPSBzZWxmLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgc2VsZi5fZWxlbWVudC5zcmM7XG4gICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICBpZiggIXNlbGYuX2J1c3kgKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLl8kZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXggKyBjYXBpdGFsaXplKGUudHlwZSkgKyAnLicgKyBuYW1lc3BhY2VfcHJlZml4LCBbc2VsZi5fJGVsZW1lbnQsIHJlc291cmNlXSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl8kZWxlbWVudC5yZW1vdmVEYXRhKG5hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl9idXN5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl9jYWxsYmFjay5jYWxsKG51bGwgLyogdG9kbyBjb250ZXh0ICovLCBlLnR5cGUsIHJlc291cmNlLCBzZWxmLl9pZCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHNldCByZXNvdXJjZSggZGF0YSApe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGVsZW1lbnRfcmVzb3VyY2UgPSBpc19odG1sX29iamVjdChkYXRhLnJlc291cmNlKSxcbiAgICAgICAgICAgICAgICBzdHJpbmdfcmVzb3VyY2UgPSB0eXBlb2YgZGF0YS5yZXNvdXJjZSA9PT0gJ3N0cmluZyc7XG5cbiAgICAgICAgICAgIGlmKCAhZWxlbWVudF9yZXNvdXJjZSAmJiAhc3RyaW5nX3Jlc291cmNlIClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuX2lkID0gZGF0YS5pZDtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IGlzX2Zvcm1hdChkYXRhLnJlc291cmNlKS5mb3JtYXQ7XG5cbiAgICAgICAgICAgIGlmKCBzdHJpbmdfcmVzb3VyY2UgKXtcblxuICAgICAgICAgICAgICAgIGxldCBpc19pbWcgPSB0aGlzLl9mb3JtYXQgPT09ICdpbWFnZSc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpc19pbWcgPyAnaW1nJyA6IHRoaXMuX2Zvcm1hdCk7XG5cbiAgICAgICAgICAgICAgICBpZiggaXNfaW1nIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciA9ICdkYXRhLXNyY3NldCc7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3Muc3JjQXR0ciA9ICdkYXRhLXNyYyc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IGRhdGEucmVzb3VyY2U7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIGVsZW1lbnRfcmVzb3VyY2UgKVxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkYXRhLnJlc291cmNlO1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmKCBzdHJpbmdfcmVzb3VyY2UgKXtcblxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIucmVwbGFjZSgnZGF0YS0nLCAnJyksIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsIHRoaXMuX3Jlc291cmNlKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCA9IHRoaXMuXyRlbGVtZW50LmRhdGEobmFtZXNwYWNlKTtcbiAgICAgICAgICAgIHRoaXMuX2J1c3kgPSB0aGlzLl9pZF9ldmVudCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgPSB0aGlzLl9idXN5ID8gdGhpcy5faWRfZXZlbnQgOiBuYW1lc3BhY2UgKyAnX3VuaXF1ZV8nICsgdGhpcy5fZWxlbWVudC50YWdOYW1lICsgJ18nKyB1bmlxdWVfaWQoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufSBzZSBoYSBwcmVzbyBpbiBjYXJpY28gaWwgY2FyaWNhbWVudG8gb3BwdXJlIG5vIHBlciB2YXJpIG1vdGl2aSAow6ggZ2nDoCBjYXJpY2F0bywgbm9uIMOoIG5lbGxhIHZpZXdwb3J0IGV0YylcbiAgICAgICAgICovXG4gICAgICAgIHByb2Nlc3MoKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBzcmMgPSB0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLFxuICAgICAgICAgICAgICAgIHNyY19jbGVhbiA9IHRoaXMuX3NldHRpbmdzLnNyY0F0dHIucmVwbGFjZSgnZGF0YS0nLCAnJyk7XG5cbiAgICAgICAgICAgIGlmICggaXNfbG9hZGVkKHRoaXMuX2VsZW1lbnQpICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9idXN5KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5vZmYoJy4nICsgdGhpcy5faWRfZXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9uZShuZXcgRXZlbnQoIWlzX2Jyb2tlbih0aGlzLl9lbGVtZW50KSA/ICdsb2FkJyA6ICdlcnJvcicpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgfWVsc2UgaWYoIHRoaXMuX3NldHRpbmdzLnZpc2libGUgJiYgIWlzX3Zpc2libGUodGhpcy5fZWxlbWVudCkgKXtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgfWVsc2V7XG5cbiAgICAgICAgICAgICAgICBpZiggdGhpcy5fZm9ybWF0ID09PSAnaW1hZ2UnICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50W3RoaXMuX2J1c3kgPyAnb24nIDogJ29uZSddKCdsb2FkLicgKyB0aGlzLl9pZF9ldmVudCArICcgZXJyb3IuJyArIHRoaXMuX2lkX2V2ZW50LCB0aGlzLl9kb25lKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgICAgICAgICAgJHBpY3R1cmUgPSB0aGlzLl8kZWxlbWVudC5jbG9zZXN0KCdwaWN0dXJlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzZXQgPSB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Jjc2V0X2NsZWFuID0gdGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHBpY3R1cmUubGVuZ3RoICYmICdIVE1MUGljdHVyZUVsZW1lbnQnIGluIHdpbmRvdyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNzZXRfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkcGljdHVyZS5maW5kKCdzb3VyY2VbJyArIHNyY3NldCArICddJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Jjc2V0JywgJHBpY3R1cmUuZGF0YShzcmNzZXRfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY3NldF9jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBzcmNzZXQgKyAnXScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmNzZXQnLCB0aGlzLl8kZWxlbWVudC5kYXRhKHNyY3NldF9jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY3NldF9jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3Jjc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyYyArICddJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3JjX2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKCB0aGlzLl9mb3JtYXQgPT09ICd2aWRlbycgfHwgdGhpcy5fZm9ybWF0ID09PSAnYXVkaW8nICl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICRzb3VyY2VzID0gdGhpcy5fJGVsZW1lbnQuZmluZCgnc291cmNlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19mdWxseV9idWZmZXJlZCA9IGZ1bmN0aW9uKG1lZGlhKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZWRpYS5idWZmZXJlZC5sZW5ndGggJiYgTWF0aC5yb3VuZChtZWRpYS5idWZmZXJlZC5lbmQoMCkpIC8gTWF0aC5yb3VuZChtZWRpYS5zZWVrYWJsZS5lbmQoMCkpID09PSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsX21lZGlhX2xvYWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggJHNvdXJjZXMubGVuZ3RoICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzb3VyY2VzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuaXMoJ1snICsgc3JjICsgJ10nKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgJCh0aGlzKS5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfbWVkaWFfbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fYnVzeSA/ICdvbicgOiAnb25lJ10oJ2Vycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VzX2Vycm9yX2lkID0gbmFtZXNwYWNlKydfZXJyb3InO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKHNvdXJjZXNfZXJyb3JfaWQsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICRzb3VyY2VzLmxlbmd0aCA9PT0gJHNvdXJjZXMuZmlsdGVyKGZ1bmN0aW9uKCl7IHJldHVybiB0cnVlID09PSAkKHRoaXMpLmRhdGEoc291cmNlc19lcnJvcl9pZCk7IH0pLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUoZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3JjX2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9idXN5ID8gJ29uJyA6ICdvbmUnXSgnZXJyb3IuJyArIHRoaXMuX2lkX2V2ZW50LCBzZWxmLl9kb25lKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfbWVkaWFfbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGNhbGxfbWVkaWFfbG9hZCApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LmxvYWQoKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX2J1c3kgPyAnb24nIDogJ29uZSddKCdsb2FkZWRtZXRhZGF0YS4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdHJ1ZSAhPT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggJiYgJ2Z1bGwnICE9PSBzZWxmLl9zZXR0aW5ncy5wbGF5dGhyb3VnaCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICdmdWxsJyA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9uX3Byb2dyZXNzX3JlcGxhY2VtZW50X2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzX2Vycm9yID0gc2VsZi5fZWxlbWVudC5yZWFkeVN0YXRlID4gMCAmJiAhc2VsZi5fZWxlbWVudC5kdXJhdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGlzX2Vycm9yIHx8IGlzX2Z1bGx5X2J1ZmZlcmVkKHNlbGYuX2VsZW1lbnQpICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9lbGVtZW50LmN1cnJlbnRUaW1lID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhaXNfZXJyb3IgJiYgIXNlbGYuX2J1c3kgJiYgc2VsZi5fZWxlbWVudC5wYXVzZWQgJiYgJChzZWxmLl9lbGVtZW50KS5pcygnW2F1dG9wbGF5XScpIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZWxlbWVudC5wbGF5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKG9uX3Byb2dyZXNzX3JlcGxhY2VtZW50X2ludGVydmFsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCAhaXNfZXJyb3IgPyAnbG9hZCcgOiAnZXJyb3InICkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFzZWxmLl9lbGVtZW50LnBhdXNlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2VsZW1lbnQucGF1c2UoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhc2VsZi5fYnVzeSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2VsZW1lbnQuY3VycmVudFRpbWUgKz0gMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fJGVsZW1lbnQuZGF0YShzZWxmLl9pZF9ldmVudCwgb25fcHJvZ3Jlc3NfcmVwbGFjZW1lbnRfaW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX2J1c3kgPyAnb24nIDogJ29uZSddKCdjYW5wbGF5LicgKyB0aGlzLl9pZF9ldmVudCwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdmdWxsJyA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggJiYgdGhpcy5jdXJyZW50VGltZSA9PT0gMCAmJiAhaXNfZnVsbHlfYnVmZmVyZWQodGhpcykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9idXN5ID8gJ29uJyA6ICdvbmUnXSgnY2FucGxheXRocm91Z2guJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH1lbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9idXN5IClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZGF0YShuYW1lc3BhY2UsIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHRoaXMuX2VsZW1lbnQuY3VycmVudFNyYyB8fCB0aGlzLl9lbGVtZW50LnNyYztcblxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLl9idXN5O1xuXG4gICAgICAgIH1cblxuICAgICAgICBhYm9ydCgpe1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgIC5vZmYoJy4nICsgdGhpcy5faWRfZXZlbnQpO1xuXG4gICAgICAgICAgICBpZiggaXNfbG9hZGVkKHRoaXMuX2VsZW1lbnQpIClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgc3JjID0gdGhpcy5fJGVsZW1lbnQuYXR0cignc3Jjc2V0JyksXG4gICAgICAgICAgICAgICAgc3Jjc2V0ID0gdGhpcy5fJGVsZW1lbnQuYXR0cignc3JjJyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyYyApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLCBzcmMpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICAgICAgaWYoIHVuZGVmaW5lZCAhPT0gc3Jjc2V0IClcbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsIHNyY3NldClcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ3NyYycpLnJlbW92ZUF0dHIoJ3NyY3NldCcpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBkb25lKGNhbGxiYWNrKXtcblxuICAgICAgICAgICAgaWYoICEkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGZ1bmN0aW9uKHN0YXR1cywgcmVzb3VyY2UsIGlkKXtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXR1cywgcmVzb3VyY2UsIGlkKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfTtcblxuICAgIH1cbiAgICBcbiAgICBjbGFzcyBSZXNvdXJjZXNMb2FkZXIge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbGxlY3Rpb24sIG9wdGlvbnMpIHtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25fbG9hZGVkID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2VzX2xvYWRlZCA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoJC5pc0FycmF5KGNvbGxlY3Rpb24pICYmICggdHlwZW9mIGNvbGxlY3Rpb25bMF0gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb25bMF0pICkpXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgcmVzb3VyY2UgaW4gY29sbGVjdGlvbiApXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjb2xsZWN0aW9uLmhhc093blByb3BlcnR5KHJlc291cmNlKSApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb25bcmVzb3VyY2VdIH0pO1xuICAgICAgICAgICAgaWYgKCB0eXBlb2YgY29sbGVjdGlvbiA9PT0gJ3N0cmluZycgfHwgaXNfaHRtbF9vYmplY3QoY29sbGVjdGlvbikgKVxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24ucHVzaCh7IGlkIDogdW5pcXVlX2lkKCksIHJlc291cmNlIDogY29sbGVjdGlvbiB9KTtcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7XG4gICAgICAgICAgICAgICAgc3JjQXR0ciAgICAgOiAnZGF0YS1zcmMnLFxuICAgICAgICAgICAgICAgIHNyY3NldEF0dHIgIDogJ2RhdGEtc3Jjc2V0JyxcbiAgICAgICAgICAgICAgICBwbGF5dGhyb3VnaCA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZpc2libGUgICAgIDogZmFsc2VcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9ICQubm9vcDtcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzID0gJC5ub29wO1xuXG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVkID0gMDtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9idXN5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2xvb3AgPSAoZnVuY3Rpb24gYXN5bmNfbG9vcCgpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgLy8gZm9yY2UgYXN5bmNocm9ueSAoZ2l2ZXMgdGltZSB0byBjaGFpbiBtZXRob2RzIHN5bmNocm9ub3VzbHkpXG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb29wKCk7XG5cbiAgICAgICAgICAgICAgICB9LCAyNSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmNfbG9vcDtcblxuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgbG9vcCgpe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNlcXVlbnRpYWxfbW9kZSA9IHRydWUgPT09IHRoaXMuX3NldHRpbmdzLnNlcXVlbnRpYWw7XG5cbiAgICAgICAgICAgIGZvciggbGV0IGkgPSAwOyBpIDwgdGhpcy5fY29sbGVjdGlvbi5sZW5ndGg7IGkrKyApe1xuXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMuX2Fib3J0IClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBsZXQgdGhpc19sb2FkX2lkID0gdGhpcy5fY29sbGVjdGlvbltpXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpc19sb2FkX2luZGV4ID0gc2VsZi5fY29sbGVjdGlvbl9pbnN0YW5jZXMuZmluZEluZGV4KCB4ID0+IHguaWQgPT09IHRoaXNfbG9hZF9pZCApLFxuICAgICAgICAgICAgICAgICAgICB0aGlzX2xvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VMb2FkZXIodGhpcy5fc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHRoaXNfbG9hZF9pbmRleCA9PT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25faW5zdGFuY2VzLnB1c2goe2lkOiB0aGlzX2xvYWRfaWQsIGluc3RhbmNlOiB0aGlzX2xvYWRfaW5zdGFuY2V9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc19sb2FkX2luZGV4ID0gc2VsZi5fY29sbGVjdGlvbl9pbnN0YW5jZXMuZmluZEluZGV4KCB4ID0+IHguaWQgPT09IHRoaXNfbG9hZF9pZCApO1xuICAgICAgICAgICAgICAgIH1lbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25faW5zdGFuY2VzW3RoaXNfbG9hZF9pbmRleF0uaW5zdGFuY2UgPSB0aGlzX2xvYWRfaW5zdGFuY2U7XG5cbiAgICAgICAgICAgICAgICB0aGlzX2xvYWRfaW5zdGFuY2UucmVzb3VyY2UgPSB0aGlzLl9jb2xsZWN0aW9uW2ldO1xuXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRleHQgPSBudWxsOyAvLyB0b2RvIGNvbnRleHRcblxuICAgICAgICAgICAgICAgIHRoaXNfbG9hZF9pbnN0YW5jZS5kb25lKGZ1bmN0aW9uKHN0YXR1cywgcmVzb3VyY2UsIGlkKXtcblxuICAgICAgICAgICAgICAgICAgICBpZiggIXNlbGYuX2NvbXBsZXRlICYmICFzZWxmLl9hYm9ydCAmJiAkLmluQXJyYXkoaWQsIHNlbGYuX2NvbGxlY3Rpb25fbG9hZGVkKSA9PT0gLTEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbGxlY3Rpb25fbG9hZGVkLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9sb2FkZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGVyY2VudGFnZSA9IHNlbGYuX2xvYWRlZCAvIHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoICogMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc19yZXNvdXJjZSA9IHsgcmVzb3VyY2UgOiByZXNvdXJjZSwgc3RhdHVzIDogc3RhdHVzIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNvdXJjZXNfbG9hZGVkLnB1c2godGhpc19yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3Byb2dyZXNzLmNhbGwoY29udGV4dCwgdGhpc19yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzZXF1ZW50aWFsX21vZGUgKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXh0X2xvYWRfaW5zdGFuY2UgPSBzZWxmLl9jb2xsZWN0aW9uX2luc3RhbmNlcy5maW5kSW5kZXgoIHggPT4geC5pZCA9PT0gaWQgKSArIDE7IC8vIHRvZG8gY2hlY2sgcG9seWZpbGwgZWZmaWNpZW5jeSBpbiBpZVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIG5leHRfbG9hZF9pbnN0YW5jZSA+IDAgJiYgbmV4dF9sb2FkX2luc3RhbmNlIDwgc2VsZi5fY29sbGVjdGlvbl9pbnN0YW5jZXMubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRfbG9hZF9pbnN0YW5jZSA9IHNlbGYuX2NvbGxlY3Rpb25faW5zdGFuY2VzWyBuZXh0X2xvYWRfaW5zdGFuY2UgXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0X2xvYWRfaW5zdGFuY2UuaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhc2VsZi5fY29tcGxldGUgJiYgIXNlbGYuX2Fib3J0ICYmIHNlbGYuX2xvYWRlZCA9PT0gc2VsZi5fY29sbGVjdGlvbi5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwoY29udGV4dCwgc2VsZi5fcmVzb3VyY2VzX2xvYWRlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbXBsZXRlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmKCAhc2VxdWVudGlhbF9tb2RlIHx8ICggc2VxdWVudGlhbF9tb2RlICYmICF0aGlzLl9idXN5ICkgKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9idXN5ID0gdGhpc19sb2FkX2luc3RhbmNlLnByb2Nlc3MoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICBkb25lKGNhbGxiYWNrKXtcblxuICAgICAgICAgICAgaWYoICEkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgX2Z1bmMgPSBmdW5jdGlvbihyZXNvdXJjZXMpe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHNlbGYsIHJlc291cmNlcyk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBfZnVuYztcblxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3AoKTtcblxuICAgICAgICAgICAgfWVsc2VcbiAgICAgICAgICAgICAgICBfZnVuYygpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHByb2dyZXNzKGNhbGxiYWNrKXtcblxuICAgICAgICAgICAgaWYoICEkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgX2Z1bmMgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoc2VsZiwgcmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmKCB0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzID0gX2Z1bmM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wKCk7XG5cbiAgICAgICAgICAgIH1lbHNlXG4gICAgICAgICAgICAgICAgX2Z1bmMoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBhYm9ydCgpe1xuXG4gICAgICAgICAgICBmb3IoIGNvbnN0IGtleSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGtleSBdLmluc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgIGlmKCAhdGhpcy5fY29sbGVjdGlvbi5sZW5ndGggKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5fYWJvcnQgPSB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICBjbGFzcyBDb2xsZWN0aW9uUG9wdWxhdG9yIHtcblxuICAgICAgICBjb25zdHJ1Y3RvcigkZWxlbWVudCwgc2V0dGluZ3MpIHtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbGxlY3QoIC8qb3V0cHV0Ki8gKSB7IC8vIHRvZG8gb3V0cHV0IHR5cGVzIGVzOiBvbmx5IGVsZW1lbnRzLCBvbmx5LCB1cmxzLCBtaXhlZCwgYWxsIC4uLiBkdW5ub1xuXG4gICAgICAgICAgICBsZXQgY29sbGVjdGlvbiA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHRhcmdldHMgPSAnaW1nLCB2aWRlbywgYXVkaW8nLFxuICAgICAgICAgICAgICAgIHRhcmdldHNfZXh0ZW5kZWQgPSB0YXJnZXRzICsgJywgcGljdHVyZSwgc291cmNlJztcblxuICAgICAgICAgICAgbGV0ICR0YXJnZXRzID0gdGhpcy5fJGVsZW1lbnQuZmluZCh0YXJnZXRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcyh0YXJnZXRzKSlcbiAgICAgICAgICAgICAgICAkdGFyZ2V0cyA9ICR0YXJnZXRzLmFkZCh0aGlzLl8kZWxlbWVudCk7XG4gICAgICAgICAgICAkdGFyZ2V0cyA9ICR0YXJnZXRzLmZpbHRlcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSAnWycrc2VsZi5fc2V0dGluZ3Muc3JjQXR0cisnXSwgWycrc2VsZi5fc2V0dGluZ3Muc3Jjc2V0QXR0cisnXSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuaXMoZmlsdGVyKSB8fCAkKHRoaXMpLmNoaWxkcmVuKHRhcmdldHNfZXh0ZW5kZWQpLmZpbHRlcihmaWx0ZXIpLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHRhcmdldHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0cnVlID09PSB0aGlzLl9zZXR0aW5ncy5iYWNrZ3JvdW5kcylcbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCcqJykuYWRkQmFjaygpLm5vdCh0YXJnZXRzX2V4dGVuZGVkKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKSAhPT0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH0pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2goJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKS5yZXBsYWNlKC91cmxcXChcInx1cmxcXCgnfHVybFxcKHwoKFwiJylcXCkkKS9pZ20sICcnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHIgaW4gdGhpcy5fc2V0dGluZ3MuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZmluZCgnWycgKyBhdHRyICsgJ106bm90KCcgKyB0YXJnZXRzX2V4dGVuZGVkICsgJyknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2goJCh0aGlzKS5hdHRyKGF0dHIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgYXR0ciArICddJykgJiYgIXRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHNfZXh0ZW5kZWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCh0aGlzLl8kZWxlbWVudC5hdHRyKGF0dHIpKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAkW25hbWVzcGFjZV9tZXRob2RdID0gUmVzb3VyY2VzTG9hZGVyO1xuXG4gICAgbGV0IG1ldGhvZF9jb2xsZWN0aW9uID0gW107XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBlYXJseSAgICAgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBlYXJseVRpbWVvdXQgIDogMFxuXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmKCAhJC5pc0FycmF5KHNldHRpbmdzLmF0dHJpYnV0ZXMpIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgaWYoIHR5cGVvZiBzZXR0aW5ncy5hdHRyaWJ1dGVzID09PSAnc3RyaW5nJyApXG4gICAgICAgICAgICBzZXR0aW5ncy5hdHRyaWJ1dGVzID0gc2V0dGluZ3MuYXR0cmlidXRlcy5zcGxpdCgnICcpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGhpcyxcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IG5ldyBDb2xsZWN0aW9uUG9wdWxhdG9yKCRlbGVtZW50LCBzZXR0aW5ncykuY29sbGVjdCgpLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRfaW5fY29sbGVjdGlvbiA9ICQuaW5BcnJheShlbGVtZW50LCBjb2xsZWN0aW9uKSA+IC0xLFxuICAgICAgICAgICAgICAgIHVuaXF1ZV9tZXRob2RfbmFtZXNwYWNlID0gbmFtZXNwYWNlICsgJ18nICsgdW5pcXVlX2lkKCksXG5cbiAgICAgICAgICAgICAgICB0aGlzX2xvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VzTG9hZGVyKGNvbGxlY3Rpb24sIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgbWV0aG9kX2NvbGxlY3Rpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQgOiB1bmlxdWVfbWV0aG9kX25hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA6IHRoaXNfbG9hZF9pbnN0YW5jZSxcbiAgICAgICAgICAgICAgICBlbGVtZW50IDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0IDogbnVsbFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXNfbG9hZF9pbnN0YW5jZS5wcm9ncmVzcyhmdW5jdGlvbiAocmVzb3VyY2UpIHtcblxuICAgICAgICAgICAgICAgIGlmKCAhZWxlbWVudF9pbl9jb2xsZWN0aW9uIClcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcihuYW1lc3BhY2VfcHJlZml4KydQcm9ncmVzcy4nK25hbWVzcGFjZV9wcmVmaXgsIFskZWxlbWVudCwgcmVzb3VyY2VdKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXNfbG9hZF9pbnN0YW5jZS5kb25lKGZ1bmN0aW9uKHJlc291cmNlcyl7XG5cbiAgICAgICAgICAgICAgICBpZiggc2V0dGluZ3MudmlzaWJsZSApXG4gICAgICAgICAgICAgICAgICAgICQoICQubml0ZSA/ICRkb2N1bWVudCA6ICR3aW5kb3cgKS5vZmYoJ3Njcm9sbC4nICsgdW5pcXVlX21ldGhvZF9uYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgICAgaWYoICFlbGVtZW50X2luX2NvbGxlY3Rpb24gKVxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXggKyAnTG9hZC4nK25hbWVzcGFjZV9wcmVmaXgsIFskZWxlbWVudCwgcmVzb3VyY2VzXSk7XG5cbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcmVmcmVzaCBvdGhlciBtZXRob2QgY2FsbHMgZm9yIHNhbWUgZWwgKG9taXR0aW5nIHRoaXMgb25lKVxuICAgICAgICAgICAgICAgIG1ldGhvZF9jb2xsZWN0aW9uID0gbWV0aG9kX2NvbGxlY3Rpb24uZmlsdGVyKGZ1bmN0aW9uKG9iaikgeyAvLyB0b2RvIGNoZWNrIHBvbHlmaWxsIGVmZmljaWVuY3kgaW4gaWVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5pZCAhPT0gdW5pcXVlX21ldGhvZF9uYW1lc3BhY2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZm9yKCBsZXQga2V5IGluIG1ldGhvZF9jb2xsZWN0aW9uICkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc19tZXRob2RfY29sbGVjdGlvbiA9IG1ldGhvZF9jb2xsZWN0aW9uW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5pcyh0aGlzX21ldGhvZF9jb2xsZWN0aW9uLmVsZW1lbnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc19tZXRob2RfY29sbGVjdGlvbi5pbnN0YW5jZS5sb29wKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYoIHNldHRpbmdzLnZpc2libGUgKXtcblxuICAgICAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgICAgICAkLm5pdGUuc2Nyb2xsKHVuaXF1ZV9tZXRob2RfbmFtZXNwYWNlLCBmdW5jdGlvbigpeyB0aGlzX2xvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCB7IGZwcyA6IDI1IH0pO1xuXG4gICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQgPSBmdW5jdGlvbihmbiwgd2FpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoIHRpbWUgKyB3YWl0IC0gRGF0ZS5ub3coKSApIDwgMCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5vbignc2Nyb2xsLicrdW5pcXVlX21ldGhvZF9uYW1lc3BhY2UsIHRocm90dGxlX3Njcm9sbF9ldmVudChmdW5jdGlvbigpeyB0aGlzX2xvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIHRydWUgPT09IHNldHRpbmdzLmVhcmx5ICkgZm9yKCBsZXQga2V5IGluIG1ldGhvZF9jb2xsZWN0aW9uIClcbiAgICAgICAgICAgICAgICBpZiggbWV0aG9kX2NvbGxlY3Rpb25ba2V5XS5pZCA9PT0gdW5pcXVlX21ldGhvZF9uYW1lc3BhY2UgKXtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc19tZXRob2RfY29sbGVjdGlvbiA9IG1ldGhvZF9jb2xsZWN0aW9uW2tleV07XG5cbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzX21ldGhvZF9jb2xsZWN0aW9uLnRpbWVvdXQgKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jb2xsZWN0aW9uLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvZG8gYXBwcm9wcmlhdGUgbWV0aG9kID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfbWV0aG9kX2NvbGxlY3Rpb24uaW5zdGFuY2UuX3NldHRpbmdzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfbWV0aG9kX2NvbGxlY3Rpb24uaW5zdGFuY2UuX3NldHRpbmdzLnNlcXVlbnRpYWwgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzX21ldGhvZF9jb2xsZWN0aW9uLmluc3RhbmNlLmxvb3AoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LCAkLmlzTnVtZXJpYyhzZXR0aW5ncy5lYXJseVRpbWVvdXQpID8gcGFyc2VJbnQoc2V0dGluZ3MuZWFybHlUaW1lb3V0KSA6IDAgKTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSk7Il19
