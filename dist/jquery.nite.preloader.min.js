"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor,f="nite",e=f+"Preload",g=e+"er";if(function(a){a.console||(a.console={});for(var b,c,d=a.console,e=function(){},f=["memory"],g=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profiles","profileEnd","show","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];b=f.pop();)d[b]||(d[b]={});for(;c=g.pop();)d[c]||(d[c]=e)}(a),!c)return console.error("jQuery is needed for "+g+" to work!"),void 0;Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");else if("function"!=typeof a)throw new TypeError("callback must be a function");for(var b=Object(this),c=b.length>>>0,d=arguments[1],e=0;e<c;e++)if(a.call(d,b[e],e,b))return e;return-1},[].filter||(Array.prototype.filter=function(f,a,b,c,d){for(d in b=this,c=[],b)~~d+""==d&&0<=d&&f.call(a,b[d],+d,b)&&c.push(b[d]);return c});var h=c(b),i=c(a),j=function(){return c.nite?c.nite.uniqueId():d(8999*Math.random())+1e3},k=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>i.width()||e.top>i.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},l=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},m=function(a){return l(a)&&(a.complete&&1<=d(a.naturalWidth)&&1<=d(a.naturalHeight)||2<=a.readyState&&0!==a.videoWidth&&0!==a.videoHeight)},n=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(l(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},o=function(){function d(a){_classCallCheck(this,d);var b=this;this._settings=c.extend(!0,{playthrough:!1,srcsetAttr:"data-srcset",srcAttr:"data-src",visible:!1},a),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._busy=!1,this._format=null,this._callback=c.noop,this._done=function(a){if(!b._busy){var c=a.type.charAt(0).toUpperCase()+a.type.slice(1);b._$element.trigger(f+c+"."+f,[b._$element])}b._$element.removeData(g),b._busy=!1,b._callback.call(null,b._id,b._element.currentSrc||b._element.src)}}return _createClass(d,[{key:"process",value:function(){var b=this,d=this._settings.srcAttr,e=this._settings.srcAttr.replace("data-","");if(m(this._element))return this._busy||this._$element.off("."+this._id_event),this._done(new Event(c.isNumeric(this._element.naturalWidth)?f+"Load":f+"Error")),!1;if(this._settings.visible&&!k(this._element))return!1;if("image"===this._format){this._$element[this._busy?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var h=this._$element.closest("picture"),i=this._settings.srcsetAttr,j=this._settings.srcsetAttr.replace("data-","");h.length&&"HTMLPictureElement"in a?(this._$element.removeData(j).removeAttr(i).removeData(e).removeAttr(d),h.find("source["+i+"]").attr("srcset",h.data(j)).removeData(j).removeAttr(i)):(this._$element.is("["+i+"]")&&this._$element.attr("srcset",this._$element.data(j)).removeData(j).removeAttr(i),this._$element.is("["+d+"]")&&this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d))}else if("video"===this._format||"audio"===this._format){var l=this._$element.find("source"),n=function(a){var b=Math.round;return a.buffered.length&&1==b(a.buffered.end(0))/b(a.seekable.end(0))},o=!1;l.length?l.each(function(){c(this).is("["+d+"]")&&(c(this).attr("src",c(this).data(e)).removeData(e).removeAttr(d),o=!0)})[this._busy?"on":"one"]("error."+this._id_event,function(a){var d=g+"_error";c(this).data(d,!0),l.length===l.filter(function(){return!0===c(this).data(d)}).length&&b._done(a)}):this._$element.is("["+d+"]")&&(this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d)[this._busy?"on":"one"]("error."+this._id_event,b._done),o=!0),o&&this._element.load(),this._$element[this._busy?"on":"one"]("loadedmetadata."+this._id_event,function(){if(!0!==b._settings.playthrough&&"full"!==b._settings.playthrough&&b._done(new Event("load")),"full"===b._settings.playthrough){var a=setInterval(function(){var d=0<b._element.readyState&&!b._element.duration;d||n(b._element)?(b._element.currentTime=0,!d&&!b._busy&&b._element.paused&&c(b._element).is("[autoplay]")&&b._element.play(),clearInterval(a),b._done(new Event(d?"error":"load"))):(!b._element.paused&&b._element.pause(),!b._busy&&(b._element.currentTime+=2))},500);b._$element.data(b._id_event,a)}})[this._busy?"on":"one"]("canplay."+this._id_event,function(){"full"!==b._settings.playthrough||0!==this.currentTime||n(this)||this.currentTime++})[this._busy?"on":"one"]("canplaythrough."+this._id_event,function(){!0===b._settings.playthrough&&b._done(new Event("load"))})}else return!1;return this._busy||this._$element.data(g,this._id_event),this._resource=this._element.currentSrc||this._element.src,!this._busy}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!m(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c){a.call(b,c)}}}},{key:"resource",set:function(a){var d=l(a.resource),e="string"==typeof a.resource;if(d||e){if(this._id=a.id,this._format=n(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}d&&(this._element=a.resource),this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._busy=void 0!==this._id_event,this._id_event=this._busy?this._id_event:g+"_unique_"+this._element.tagName+"_"+j()}}}]),d}(),p=function(){function a(b,d){_classCallCheck(this,a);var e=this;if(this._collection=[],this._collection_loaded=[],this._collection_instances=[],c.isArray(b)&&("string"==typeof b[0]||l(b[0])))for(var f in b)b.hasOwnProperty(f)&&this._collection.push({id:j(),resource:b[f]});("string"==typeof b||l(b))&&this._collection.push({id:j(),resource:b}),this._settings=c.extend(!0,{sequential:!1},d),this.percentage=0,this._callback=c.noop,this._progress=c.noop,this._abort=!1,this._loaded=0,this._complete=!1,this._busy=!1,this._loop=function a(){return setTimeout(function(){e.loop()},25),a}()}return _createClass(a,[{key:"loop",value:function(){for(var a,b=this,d=!0===this._settings.sequential,e=0;e<this._collection.length&&!this._abort;e++)a=new o(this._settings),this._collection_instances.push({id:this._collection[e].id,instance:a}),a.resource=this._collection[e],a.done(function(a,e){var f=null;if(!b._complete&&!b._abort&&-1===c.inArray(a,b._collection_loaded)&&(b._loaded++,b._collection_loaded.push(a),b.percentage=100*(b._loaded/b._collection.length),b._progress.call(f,e),b._busy=!1,d)){var g=b._collection_instances.findIndex(function(b){return b.id===a})+1;0<g&&g<b._collection_instances.length&&(g=b._collection_instances[g],g.instance.process())}b._complete||b._abort||b._loaded!==b._collection.length||(b._callback.call(f),b._complete=!0)}),d&&(!d||this._busy)||(this._busy=a.process())}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(){a.call(b)};return this._collection.length?(this._callback=d,this._loop()):d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?(this._progress=d,this._loop()):d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].instance.abort();this._collection.length&&(this._abort=!0)}}]),a}(),q=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b="img, video, audio",d=b+", picture, source",e=this._$element.find(b);if(this._$element.is(b)&&e.add(this._$element),e.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(d).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var f=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+d+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(d)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)f(a)}return a}}]),a}();c[e]=p;var r=[];c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=this,e=c(a),k=new q(e,d).collect(),l=-1<c.inArray(a,k),m=g+"_"+j(),n=new p(k,d);if(r.push({id:m,instance:n,element:a}),n.progress(function(){l||e.trigger(f+"Progress."+f,[e])}),n.done(function(){for(var g in d.visible&&c(c.nite?h:i).off("scroll."+m),l||e.trigger(f+"Load."+f,[e]),b.call(a),r=r.filter(function(a){return a.id!==m}),r)e.is(r[g].element)&&r[g].instance.loop()}),d.visible)if(c.nite)c.nite.scroll(m,function(){n.loop()},{fps:25});else{var o=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};i.on("scroll."+m,o(function(){n.loop()},1e3))}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxtQkF5RTRDLEtBQUEsQUFBSyxNQXhFN0MsRUFESixBQUN1QixPQUNuQixFQUFtQixFQUZ2QixBQUV3QyxVQUNwQyxFQUFZLEVBSGhCLEFBR2lDLEFBR2pDLEFBQ0EsQUFDQSxRQUFDLEFBQVMsV0FBUSxBQUNkLEFBQUksQ0FBQyxFQUFMLEFBQVksVUFDUixFQUFBLEFBQU8sQUFBVSxBQUNyQixtQkFBQSxBQUNJLEdBREosQUFDVSxFQUROLEVBQU0sRUFBVixBQUFpQixRQUViLEVBQUEsQUFBUSxVQUFXLEFBQUUsQ0FGekIsRUFBQSxBQUdJLEFBQWEsQUFBQyxhQUhsQixBQUlJLEFBQVUsQUFBQyxBQUNQLEFBQ0EsQUFBcUUsQUFBTSxBQUNuRiw4UEFBTyxFQUFPLEVBQWQsQUFBYyxBQUFXLEFBQ3JCLEFBQUksT0FBSixBQUFLLEFBQUksT0FEYixBQUVRLEFBQUksQUFBUSxBQUNwQixjQUFPLEVBQVMsRUFBaEIsQUFBZ0IsQUFBUSxBQUNwQixBQUFJLE9BQUosQUFBSyxBQUFJLE9BRGIsQUFFUSxBQUFJLEFBQVUsQUFDekIsT0FoQkQsQUFnQkcsQUFDSCxBQUdBLEFBQ0EsS0FBQSxBQUFJLEFBQUMsQUFBSSxBQUNMLEdBQ0EsQUFBTyxBQUNWLEFBQ0QsQUFHQSxBQUNBLEFBQ0EsZUFSSSxBQUFRLE1BQU0sQUFBd0IsMEJBQXRDLEFBQWdELEFBQ2hELDBCQU9KLEFBQU0sVUFBTixBQUFnQixVQUFZLE1BQUEsQUFBTSxVQUFOLEFBQWdCLFdBQWEsQUFBUyxXQUFVLEFBQ3hFLElBQUEsQUFBYSxBQUFNLEFBQ2YsSUFEQSxhQUNNLElBQUEsQUFBSSxXQURkLEFBQ0ksQUFBTSxBQUFjLEFBQ3ZCLDZEQUFNLElBQUEsQUFBd0IsQUFBWSxBQUN2QyxVQURPLEFBQU8sZ0JBQ1IsSUFB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Q3JCLE1BRkQsQUFBb0IsQUFHcEIsS0FDUSxFQUFBLEFBQVMsR0FBRyxBQUFrQixLQUFsQyxBQUFJLEFBQW1DLFVBQ25DLEFBQWtCLEtBQWxCLEFBQXVCLFNBRi9CLEFBRVEsQUFBZ0MsQUFFM0MsTUFsQkQsQUFvQkEsR0FBSSxFQUFKLEFBQWEsQUFBUyxBQUVsQixXQUFJLEVBQUosQUFBTSxLQUNGLEVBQUEsQUFBRSxLQUFGLEFBQU8sQUFBTyxTQUF5QixVQUFVLEFBQUUsR0FBQSxBQUFtQixBQUFTLE1BQS9FLEVBQWlGLENBQUUsSUFEdkYsQUFDSSxBQUFpRixBQUFRLFNBRXpGLEFBRUEsSUFBTSxHQUFBLEFBQXdCLEFBQVMsQUFBSSxhQUFNLEFBQzdDLElBQUksR0FBTyxLQUFYLEFBQVcsQUFBSyxBQUNoQixZQUFPLFdBQVcsQUFDZCxDQUFBLEFBQW1DLEFBQUcsQUFDbEMsQ0FERSxBQUFPLEtBQU8sS0FBaEIsQUFBZ0IsQUFBSyxRQUVyQixNQUFPLEtBQVAsQUFBTyxBQUFLLEFBQ2YsQUFDSixNQUxELEFBTUgsQ0FSRCxBQVVBLElBQUEsQUFBUSxHQUFSLEFBQVcsQUFBVSxZQUF5QixFQUFzQixVQUFVLEFBQUUsR0FBQSxBQUFtQixBQUFTLE1BQTVHLEFBQThDLEFBQWdFLEFBRWpILE9BRUosQUFFSixDQW5FRCxBQUFPLEFBcUVWLEVBbkdELEFBcUdILENBbjJCRCxHQUFBLEFBbTJCRyxPQW4yQkgsQUFtMkJXLFNBbjJCWCxBQW0yQnFCIiwiZmlsZSI6ImpxdWVyeS5uaXRlLnByZWxvYWRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgSlF1ZXJ5IEhlYXZ5IFJlc291cmNlc0xvYWRlciB8IERhbmllbGUgRmlvcm9uaSB8IGRmaW9yb25pOTFAZ21haWwuY29tICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgJCwgdW5kZWZpbmVkKXtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBjb25zdFxuICAgICAgICBuYW1lc3BhY2VfcHJlZml4ID0gJ25pdGUnLFxuICAgICAgICBuYW1lc3BhY2VfbWV0aG9kID0gbmFtZXNwYWNlX3ByZWZpeCsnUHJlbG9hZCcsXG4gICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZV9tZXRob2QrJ2VyJztcblxuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BhdWxtaWxsci9jb25zb2xlLXBvbHlmaWxsXG4gICAgLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG4gICAgKGZ1bmN0aW9uKGdsb2JhbCkge1xuICAgICAgICBpZiAoIWdsb2JhbC5jb25zb2xlKVxuICAgICAgICAgICAgZ2xvYmFsLmNvbnNvbGUgPSB7fTtcbiAgICAgICAgbGV0IGNvbiA9IGdsb2JhbC5jb25zb2xlLFxuICAgICAgICAgICAgcHJvcCwgbWV0aG9kLFxuICAgICAgICAgICAgZHVtbXkgPSBmdW5jdGlvbigpIHt9LFxuICAgICAgICAgICAgcHJvcGVydGllcyA9IFsnbWVtb3J5J10sXG4gICAgICAgICAgICBtZXRob2RzID0gKCdhc3NlcnQsY2xlYXIsY291bnQsZGVidWcsZGlyLGRpcnhtbCxlcnJvcixleGNlcHRpb24sZ3JvdXAsJyArXG4gICAgICAgICAgICAgICAgJ2dyb3VwQ29sbGFwc2VkLGdyb3VwRW5kLGluZm8sbG9nLG1hcmtUaW1lbGluZSxwcm9maWxlLHByb2ZpbGVzLHByb2ZpbGVFbmQsJyArXG4gICAgICAgICAgICAgICAgJ3Nob3csdGFibGUsdGltZSx0aW1lRW5kLHRpbWVsaW5lLHRpbWVsaW5lRW5kLHRpbWVTdGFtcCx0cmFjZSx3YXJuJykuc3BsaXQoJywnKTtcbiAgICAgICAgd2hpbGUgKHByb3AgPSBwcm9wZXJ0aWVzLnBvcCgpKVxuICAgICAgICAgICAgaWYgKCFjb25bcHJvcF0pXG4gICAgICAgICAgICAgICAgY29uW3Byb3BdID0ge307XG4gICAgICAgIHdoaWxlIChtZXRob2QgPSBtZXRob2RzLnBvcCgpKVxuICAgICAgICAgICAgaWYgKCFjb25bbWV0aG9kXSlcbiAgICAgICAgICAgICAgICBjb25bbWV0aG9kXSA9IGR1bW15O1xuICAgIH0pKHdpbmRvdyk7XG4gICAgLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cblxuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuICAgIGlmKCAhJCApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignalF1ZXJ5IGlzIG5lZWRlZCBmb3IgJytuYW1lc3BhY2UrJyB0byB3b3JrIScpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cblxuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pzUG9seWZpbGwvQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleC9ibG9iL21hc3Rlci9maW5kSW5kZXguanNcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbiAgICBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4ID0gQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCB8fCBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleCBjYWxsZWQgb24gbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0XG4gICAgICAgICAgICBsaXN0ID0gT2JqZWN0KHRoaXMpLFxuICAgICAgICAgICAgLy8gTWFrZXMgc3VyZXMgaXMgYWx3YXlzIGhhcyBhbiBwb3NpdGl2ZSBpbnRlZ2VyIGFzIGxlbmd0aC5cbiAgICAgICAgICAgICBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMCxcbiAgICAgICAgICAgICB0aGlzQXJnID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgbGlzdFtpXSwgaSwgbGlzdCkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gICAgLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cblxuICAgIC8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2VsaXBlcmVsbWFuLzEwMzE2NTZcbiAgICAvLyAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC1cbiAgICBbXS5maWx0ZXJ8fChBcnJheS5wcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGEsYixjLGQsZSl7Yz10aGlzO2Q9W107Zm9yKGUgaW4gYyl+fmUrJyc9PWUmJmU+PTAmJmEuY2FsbChiLGNbZV0sK2UsYykmJmQucHVzaChjW2VdKTtyZXR1cm4gZH0pXG4gICAgLy8gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtXG5cblxuXG4gICAgY29uc3RcblxuICAgICAgICAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KSxcbiAgICAgICAgJHdpbmRvdyA9ICQod2luZG93KSxcblxuICAgICAgICB1bmlxdWVfaWQgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICByZXR1cm4gJC5uaXRlID8gJC5uaXRlLnVuaXF1ZUlkKCkgOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoOTk5OSAtIDEwMDApKSArIDEwMDA7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpc192aXNpYmxlID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cbiAgICAgICAgICAgIGNvbnN0ICRlbCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGxldCBpbl92aWV3cG9ydCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiggJC5uaXRlIClcbiAgICAgICAgICAgICAgICBpbl92aWV3cG9ydCA9ICQubml0ZS5pblZpZXdwb3J0KGVsZW1lbnQpLnJhdGlvO1xuXG4gICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgICAgICBpbl92aWV3cG9ydCA9ICEoIHJlY3QucmlnaHQgPCAwIHx8IHJlY3QuYm90dG9tIDwgMCB8fCByZWN0LmxlZnQgPiAkd2luZG93LndpZHRoKCkgfHwgcmVjdC50b3AgPiAkd2luZG93LmhlaWdodCgpICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGluX3ZpZXdwb3J0ICYmICRlbC5pcygnOnZpc2libGUnKSAmJiAkZWwuY3NzKCd2aXNpYmlsaXR5JykgIT09ICdoaWRkZW4nO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfaHRtbF9vYmplY3QgPSBmdW5jdGlvbiggb2JqZWN0ICl7XG5cbiAgICAgICAgICAgIGlmKCB0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0JyApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Qubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG9iamVjdC5zdHlsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5vd25lckRvY3VtZW50ID09PSAnb2JqZWN0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX2xvYWRlZCA9IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXG4gICAgICAgICAgICByZXR1cm4gaXNfaHRtbF9vYmplY3QoZWxlbWVudCkgJiYgKFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jb21wbGV0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGVsZW1lbnQubmF0dXJhbFdpZHRoKSAgPj0gMSAmJlxuICAgICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGVsZW1lbnQubmF0dXJhbEhlaWdodCkgPj0gMVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB8fFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZWFkeVN0YXRlID49IDIgJiZcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC52aWRlb1dpZHRoICE9PSAwICYmXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmlkZW9IZWlnaHQgIT09IDBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBpc19mb3JtYXQgPSBmdW5jdGlvbiggaXRlbSwgZXhwZWN0ZWRfZm9ybWF0ICl7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgZm9ybWF0X2V4dGVuc2lvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlIDogJ2pwW2VdP2d8Z2lmfHBuZ3x0aWZbZl0/fGJtcCcsXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvIDogJ21wM3xvZ2cnLFxuICAgICAgICAgICAgICAgICAgICB2aWRlbyA6ICdtcDR8b2d2fG9nZ3x3ZWJtJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZm9ybWF0X25hbWVzID0gT2JqZWN0LmtleXMoZm9ybWF0X2V4dGVuc2lvbnMpLFxuICAgICAgICAgICAgICAgIGJhc2U2NF9oZWFkaW5nID0gJ1xcO2Jhc2U2NFxcLCc7XG5cbiAgICAgICAgICAgIGxldCBvdXRwdXQgPSB7IGZvcm1hdDogbnVsbCwgZXh0ZW5zaW9uOiBudWxsIH07XG5cbiAgICAgICAgICAgIGlmKCB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgKSB7XG5cbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbS5zcGxpdCgnPycpWzBdOyAvLyBnZXQgcmlkIG9mIHF1ZXJ5IHN0cmluZ3NcbiAgICAgICAgICAgICAgICBpdGVtID0gaXRlbS5zcGxpdCgnIycpWzBdOyAvLyBnZXQgcmlkIG9mIGhhc2hlc1xuXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICcnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBsZXQgZm9ybWF0X3F1ZXVlID0gdW5kZWZpbmVkICE9PSBleHBlY3RlZF9mb3JtYXQgPyBbIGV4cGVjdGVkX2Zvcm1hdCBdIDogZm9ybWF0X25hbWVzO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB4IGluIGZvcm1hdF9xdWV1ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtYXRfcXVldWUuaGFzT3duUHJvcGVydHkoeCkpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cCgnKFxcLignICsgZm9ybWF0X2V4dGVuc2lvbnNbZm9ybWF0X3F1ZXVlW3hdXSArICcpJCl8JyArIGJhc2U2NF9oZWFkaW5nLCAnZycpLnRlc3QoaXRlbSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKGJhc2U2NF9oZWFkaW5nLCAnZycpLnRlc3QoaXRlbSkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlczY0ID0gaXRlbS5tYXRjaChuZXcgUmVnRXhwKCdeZGF0YTonICsgZm9ybWF0X3F1ZXVlW3hdICsgJ1xcLygnICsgZm9ybWF0X2V4dGVuc2lvbnNbZm9ybWF0X3F1ZXVlW3hdXSArICcpJywgJ2cnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWF0Y2hlczY0IHx8IG51bGwgPT09IG1hdGNoZXM2NCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzNjQgPSBtYXRjaGVzNjRbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmZvcm1hdCA9IG1hdGNoZXM2NC5yZXBsYWNlKCdkYXRhOicgKyBmb3JtYXRfcXVldWVbeF0gKyAnL2cnLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVzID0gaXRlbS5tYXRjaChuZXcgUmVnRXhwKGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0sICdnJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBmb3JtYXRfcXVldWVbeF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZXh0ZW5zaW9uID0gbWF0Y2hlc1swXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBpc19odG1sX29iamVjdChpdGVtKSApe1xuXG4gICAgICAgICAgICAgICAgbGV0IHRhZ19uYW1lID0gaXRlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYoICQuaW5BcnJheSh0YWdfbmFtZSwgZm9ybWF0X25hbWVzKSA+IC0xIClcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmZvcm1hdCA9IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYoIHRhZ19uYW1lID09PSAnaW1nJyApXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSAnaW1hZ2UnO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgXG4gICAgICAgIH07XG5cbiAgICBjbGFzcyBSZXNvdXJjZUxvYWRlciB7XG5cbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncyAgPSAkLmV4dGVuZCh0cnVlLCB7XG4gICAgICAgICAgICAgICAgcGxheXRocm91Z2ggOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzcmNzZXRBdHRyICA6ICdkYXRhLXNyY3NldCcsXG4gICAgICAgICAgICAgICAgc3JjQXR0ciAgICAgOiAnZGF0YS1zcmMnLFxuICAgICAgICAgICAgICAgIHZpc2libGUgICAgIDogZmFsc2VcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCAgICAgICAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgID0gbnVsbDtcblxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudCAgID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50ICA9ICQoKTtcblxuICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2J1c3kgICAgICA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgICAgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayAgPSAkLm5vb3A7XG4gICAgICAgICAgICB0aGlzLl9kb25lICAgICAgPSBmdW5jdGlvbihlKXtcblxuICAgICAgICAgICAgICAgIGlmKCAhc2VsZi5fYnVzeSApIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmlnZ2VyX2V2ZW50ID0gZS50eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZS50eXBlLnNsaWNlKDEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuXyRlbGVtZW50LnRyaWdnZXIobmFtZXNwYWNlX3ByZWZpeCArIHRyaWdnZXJfZXZlbnQgKyAnLicgKyBuYW1lc3BhY2VfcHJlZml4LCBbc2VsZi5fJGVsZW1lbnRdKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlbGYuXyRlbGVtZW50LnJlbW92ZURhdGEobmFtZXNwYWNlKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2J1c3kgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8sIHNlbGYuX2lkLCBzZWxmLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgc2VsZi5fZWxlbWVudC5zcmMpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICBzZXQgcmVzb3VyY2UoIGRhdGEgKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBlbGVtZW50X3Jlc291cmNlID0gaXNfaHRtbF9vYmplY3QoZGF0YS5yZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgc3RyaW5nX3Jlc291cmNlID0gdHlwZW9mIGRhdGEucmVzb3VyY2UgPT09ICdzdHJpbmcnO1xuXG4gICAgICAgICAgICBpZiggIWVsZW1lbnRfcmVzb3VyY2UgJiYgIXN0cmluZ19yZXNvdXJjZSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBpc19mb3JtYXQoZGF0YS5yZXNvdXJjZSkuZm9ybWF0O1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNfaW1nID0gdGhpcy5fZm9ybWF0ID09PSAnaW1hZ2UnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXNfaW1nID8gJ2ltZycgOiB0aGlzLl9mb3JtYXQpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGlzX2ltZyApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIgPSAnZGF0YS1zcmNzZXQnO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY0F0dHIgPSAnZGF0YS1zcmMnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgPSBkYXRhLnJlc291cmNlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBlbGVtZW50X3Jlc291cmNlIClcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZGF0YS5yZXNvdXJjZTtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKSwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCB0aGlzLl9yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgPSB0aGlzLl8kZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB0aGlzLl9idXN5ID0gdGhpcy5faWRfZXZlbnQgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX2lkX2V2ZW50ID0gdGhpcy5fYnVzeSA/IHRoaXMuX2lkX2V2ZW50IDogbmFtZXNwYWNlICsgJ191bmlxdWVfJyArIHRoaXMuX2VsZW1lbnQudGFnTmFtZSArICdfJysgdW5pcXVlX2lkKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gc2UgaGEgcHJlc28gaW4gY2FyaWNvIGlsIGNhcmljYW1lbnRvIG9wcHVyZSBubyBwZXIgdmFyaSBtb3RpdmkgKMOoIGdpw6AgY2FyaWNhdG8sIG5vbiDDqCBuZWxsYSB2aWV3cG9ydCBldGMpXG4gICAgICAgICAqL1xuICAgICAgICBwcm9jZXNzKCl7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgc3JjID0gdGhpcy5fc2V0dGluZ3Muc3JjQXR0cixcbiAgICAgICAgICAgICAgICBzcmNfY2xlYW4gPSB0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xuXG4gICAgICAgICAgICBpZiAoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApIHtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fYnVzeSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2RvbmUobmV3IEV2ZW50KCQuaXNOdW1lcmljKHRoaXMuX2VsZW1lbnQubmF0dXJhbFdpZHRoKSA/IG5hbWVzcGFjZV9wcmVmaXgrJ0xvYWQnIDogbmFtZXNwYWNlX3ByZWZpeCsnRXJyb3InKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIH1lbHNlIGlmKCB0aGlzLl9zZXR0aW5ncy52aXNpYmxlICYmICFpc192aXNpYmxlKHRoaXMuX2VsZW1lbnQpICl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMuX2Zvcm1hdCA9PT0gJ2ltYWdlJyApIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFt0aGlzLl9idXN5ID8gJ29uJyA6ICdvbmUnXSgnbG9hZC4nICsgdGhpcy5faWRfZXZlbnQgKyAnIGVycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgdGhpcy5fZG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICRwaWN0dXJlID0gdGhpcy5fJGVsZW1lbnQuY2xvc2VzdCgncGljdHVyZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Jjc2V0ID0gdGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3NldF9jbGVhbiA9IHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIucmVwbGFjZSgnZGF0YS0nLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwaWN0dXJlLmxlbmd0aCAmJiAnSFRNTFBpY3R1cmVFbGVtZW50JyBpbiB3aW5kb3cgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHBpY3R1cmUuZmluZCgnc291cmNlWycgKyBzcmNzZXQgKyAnXScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyY3NldCcsICRwaWN0dXJlLmRhdGEoc3Jjc2V0X2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNzZXRfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3Jjc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3Jjc2V0ICsgJ10nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Jjc2V0JywgdGhpcy5fJGVsZW1lbnQuZGF0YShzcmNzZXRfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNzZXRfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBzcmMgKyAnXScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCB0aGlzLl8kZWxlbWVudC5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ZWxzZSBpZiggdGhpcy5fZm9ybWF0ID09PSAndmlkZW8nIHx8IHRoaXMuX2Zvcm1hdCA9PT0gJ2F1ZGlvJyApe1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAkc291cmNlcyA9IHRoaXMuXyRlbGVtZW50LmZpbmQoJ3NvdXJjZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfZnVsbHlfYnVmZmVyZWQgPSBmdW5jdGlvbihtZWRpYSl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVkaWEuYnVmZmVyZWQubGVuZ3RoICYmIE1hdGgucm91bmQobWVkaWEuYnVmZmVyZWQuZW5kKDApKSAvIE1hdGgucm91bmQobWVkaWEuc2Vla2FibGUuZW5kKDApKSA9PT0gMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbF9tZWRpYV9sb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICRzb3VyY2VzLmxlbmd0aCApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc291cmNlcy5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmlzKCdbJyArIHNyYyArICddJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsICQodGhpcykuZGF0YShzcmNfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsX21lZGlhX2xvYWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX2J1c3kgPyAnb24nIDogJ29uZSddKCdlcnJvci4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlc19lcnJvcl9pZCA9IG5hbWVzcGFjZSsnX2Vycm9yJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YShzb3VyY2VzX2Vycm9yX2lkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkc291cmNlcy5sZW5ndGggPT09ICRzb3VyY2VzLmZpbHRlcihmdW5jdGlvbigpeyByZXR1cm4gdHJ1ZSA9PT0gJCh0aGlzKS5kYXRhKHNvdXJjZXNfZXJyb3JfaWQpOyB9KS5sZW5ndGggKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyYyArICddJykpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCB0aGlzLl8kZWxlbWVudC5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fYnVzeSA/ICdvbicgOiAnb25lJ10oJ2Vycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgc2VsZi5fZG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsX21lZGlhX2xvYWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjYWxsX21lZGlhX2xvYWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5sb2FkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9idXN5ID8gJ29uJyA6ICdvbmUnXSgnbG9hZGVkbWV0YWRhdGEuJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRydWUgIT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoICYmICdmdWxsJyAhPT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCgnbG9hZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAnZnVsbCcgPT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvbl9wcm9ncmVzc19yZXBsYWNlbWVudF9pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc19lcnJvciA9IHNlbGYuX2VsZW1lbnQucmVhZHlTdGF0ZSA+IDAgJiYgIXNlbGYuX2VsZW1lbnQuZHVyYXRpb247XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBpc19lcnJvciB8fCBpc19mdWxseV9idWZmZXJlZChzZWxmLl9lbGVtZW50KSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZWxlbWVudC5jdXJyZW50VGltZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIWlzX2Vycm9yICYmICFzZWxmLl9idXN5ICYmIHNlbGYuX2VsZW1lbnQucGF1c2VkICYmICQoc2VsZi5fZWxlbWVudCkuaXMoJ1thdXRvcGxheV0nKSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2VsZW1lbnQucGxheSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChvbl9wcm9ncmVzc19yZXBsYWNlbWVudF9pbnRlcnZhbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCggIWlzX2Vycm9yID8gJ2xvYWQnIDogJ2Vycm9yJyApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhc2VsZi5fZWxlbWVudC5wYXVzZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9lbGVtZW50LnBhdXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIXNlbGYuX2J1c3kgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9lbGVtZW50LmN1cnJlbnRUaW1lICs9IDI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuXyRlbGVtZW50LmRhdGEoc2VsZi5faWRfZXZlbnQsIG9uX3Byb2dyZXNzX3JlcGxhY2VtZW50X2ludGVydmFsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9idXN5ID8gJ29uJyA6ICdvbmUnXSgnY2FucGxheS4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnZnVsbCcgPT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoICYmIHRoaXMuY3VycmVudFRpbWUgPT09IDAgJiYgIWlzX2Z1bGx5X2J1ZmZlcmVkKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fYnVzeSA/ICdvbicgOiAnb25lJ10oJ2NhbnBsYXl0aHJvdWdoLicgKyB0aGlzLl9pZF9ldmVudCwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCgnbG9hZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9ZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCAhdGhpcy5fYnVzeSApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50LmRhdGEobmFtZXNwYWNlLCB0aGlzLl9pZF9ldmVudCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgPSB0aGlzLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgdGhpcy5fZWxlbWVudC5zcmM7XG5cbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5fYnVzeTtcblxuICAgICAgICB9XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgaWYoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyY3NldCcpLFxuICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiggdW5kZWZpbmVkICE9PSBzcmMgKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHNyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3JjJykucmVtb3ZlQXR0cignc3Jjc2V0Jyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyY3NldCApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciwgc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZG9uZShjYWxsYmFjayl7XG5cbiAgICAgICAgICAgIGlmKCAhJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgUmVzb3VyY2VzTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2xvYWRlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKCQuaXNBcnJheShjb2xsZWN0aW9uKSAmJiAoIHR5cGVvZiBjb2xsZWN0aW9uWzBdID09PSAnc3RyaW5nJyB8fCBpc19odG1sX29iamVjdChjb2xsZWN0aW9uWzBdKSApKVxuICAgICAgICAgICAgICAgIGZvciAoIGNvbnN0IHJlc291cmNlIGluIGNvbGxlY3Rpb24gKVxuICAgICAgICAgICAgICAgICAgICBpZiggY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbi5wdXNoKHsgaWQgOiB1bmlxdWVfaWQoKSwgcmVzb3VyY2UgOiBjb2xsZWN0aW9uW3Jlc291cmNlXSB9KTtcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbGxlY3Rpb24gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb24pIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb24gfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHNlcXVlbnRpYWw6IGZhbHNlXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9ICQubm9vcDtcblxuICAgICAgICAgICAgdGhpcy5fYWJvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRlZCA9IDA7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5fYnVzeSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9sb29wID0gKGZ1bmN0aW9uIGFzeW5jX2xvb3AoKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IC8vIGZvcmNlIGFzeW5jaHJvbnkgKGdpdmVzIHRpbWUgdG8gY2hhaW4gbWV0aG9kcyBzeW5jaHJvbm91c2x5KVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9vcCgpO1xuXG4gICAgICAgICAgICAgICAgfSwgMjUpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jX2xvb3A7XG5cbiAgICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGxvb3AoKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBzZXF1ZW50aWFsX21vZGUgPSB0cnVlID09PSB0aGlzLl9zZXR0aW5ncy5zZXF1ZW50aWFsO1xuXG4gICAgICAgICAgICBmb3IoIGxldCBpID0gMDsgaSA8IHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoOyBpKysgKXtcblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9hYm9ydCApXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgbGV0IHRoaXNfbG9hZF9pbnN0YW5jZSA9IG5ldyBSZXNvdXJjZUxvYWRlcih0aGlzLl9zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXMucHVzaCh7IGlkIDogdGhpcy5fY29sbGVjdGlvbltpXS5pZCwgaW5zdGFuY2UgOiB0aGlzX2xvYWRfaW5zdGFuY2UgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzX2xvYWRfaW5zdGFuY2UucmVzb3VyY2UgPSB0aGlzLl9jb2xsZWN0aW9uW2ldO1xuXG4gICAgICAgICAgICAgICAgdGhpc19sb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24oaWQsIHJlc291cmNlKXtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IG51bGw7IC8vIHRvZG8gY29udGV4dFxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhc2VsZi5fY29tcGxldGUgJiYgIXNlbGYuX2Fib3J0ICYmICQuaW5BcnJheShpZCwgc2VsZi5fY29sbGVjdGlvbl9sb2FkZWQpID09PSAtMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbGxlY3Rpb25fbG9hZGVkLnB1c2goaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBlcmNlbnRhZ2UgPSBzZWxmLl9sb2FkZWQgLyBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCAqIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvZ3Jlc3MuY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2J1c3kgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHNlcXVlbnRpYWxfbW9kZSApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHRfbG9hZF9pbnN0YW5jZSA9IHNlbGYuX2NvbGxlY3Rpb25faW5zdGFuY2VzLmZpbmRJbmRleCggeCA9PiB4LmlkID09PSBpZCApICsgMTsgLy8gdG9kbyBjaGVjayBwb2x5ZmlsbCBlZmZpY2llbmN5IGluIGllXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggbmV4dF9sb2FkX2luc3RhbmNlID4gMCAmJiBuZXh0X2xvYWRfaW5zdGFuY2UgPCBzZWxmLl9jb2xsZWN0aW9uX2luc3RhbmNlcy5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dF9sb2FkX2luc3RhbmNlID0gc2VsZi5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIG5leHRfbG9hZF9pbnN0YW5jZSBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRfbG9hZF9pbnN0YW5jZS5pbnN0YW5jZS5wcm9jZXNzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICFzZWxmLl9jb21wbGV0ZSAmJiAhc2VsZi5fYWJvcnQgJiYgc2VsZi5fbG9hZGVkID09PSBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2suY2FsbChjb250ZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYoICFzZXF1ZW50aWFsX21vZGUgfHwgKCBzZXF1ZW50aWFsX21vZGUgJiYgIXRoaXMuX2J1c3kgKSApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1c3kgPSB0aGlzX2xvYWRfaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoc2VsZik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBfZnVuYztcblxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3AoKTtcblxuICAgICAgICAgICAgfWVsc2VcbiAgICAgICAgICAgICAgICBfZnVuYygpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHByb2dyZXNzKGNhbGxiYWNrKXtcblxuICAgICAgICAgICAgaWYoICEkLmlzRnVuY3Rpb24oY2FsbGJhY2spIClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgX2Z1bmMgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoc2VsZiwgcmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmKCB0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzID0gX2Z1bmM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wKCk7XG5cbiAgICAgICAgICAgIH1lbHNlXG4gICAgICAgICAgICAgICAgX2Z1bmMoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBhYm9ydCgpe1xuXG4gICAgICAgICAgICBmb3IoIGNvbnN0IGtleSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGtleSBdLmluc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgIGlmKCAhdGhpcy5fY29sbGVjdGlvbi5sZW5ndGggKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5fYWJvcnQgPSB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICBjbGFzcyBDb2xsZWN0aW9uUG9wdWxhdG9yIHtcblxuICAgICAgICBjb25zdHJ1Y3RvcigkZWxlbWVudCwgc2V0dGluZ3MpIHtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbGxlY3QoIC8qb3V0cHV0Ki8gKSB7IC8vIHRvZG8gb3V0cHV0IHR5cGVzIGVzOiBvbmx5IGVsZW1lbnRzLCBvbmx5LCB1cmxzLCBtaXhlZCwgYWxsIC4uLiBkdW5ub1xuXG4gICAgICAgICAgICBsZXQgY29sbGVjdGlvbiA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHRhcmdldHMgPSAnaW1nLCB2aWRlbywgYXVkaW8nLFxuICAgICAgICAgICAgICAgIHRhcmdldHNfZXh0ZW5kZWQgPSB0YXJnZXRzICsgJywgcGljdHVyZSwgc291cmNlJztcblxuICAgICAgICAgICAgbGV0ICR0YXJnZXRzID0gdGhpcy5fJGVsZW1lbnQuZmluZCh0YXJnZXRzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcyh0YXJnZXRzKSlcbiAgICAgICAgICAgICAgICAkdGFyZ2V0cy5hZGQodGhpcy5fJGVsZW1lbnQpO1xuICAgICAgICAgICAgJHRhcmdldHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0cnVlID09PSB0aGlzLl9zZXR0aW5ncy5iYWNrZ3JvdW5kcylcbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCcqJykuYWRkQmFjaygpLm5vdCh0YXJnZXRzX2V4dGVuZGVkKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKSAhPT0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH0pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2goJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnKS5yZXBsYWNlKC91cmxcXChcInx1cmxcXCgnfHVybFxcKHwoKFwiJylcXCkkKS9pZ20sICcnKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHIgaW4gdGhpcy5fc2V0dGluZ3MuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZmluZCgnWycgKyBhdHRyICsgJ106bm90KCcgKyB0YXJnZXRzX2V4dGVuZGVkICsgJyknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2goJCh0aGlzKS5hdHRyKGF0dHIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgYXR0ciArICddJykgJiYgIXRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHNfZXh0ZW5kZWQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCh0aGlzLl8kZWxlbWVudC5hdHRyKGF0dHIpKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAkW25hbWVzcGFjZV9tZXRob2RdID0gUmVzb3VyY2VzTG9hZGVyO1xuXG4gICAgbGV0IG1ldGhvZF9jb2xsZWN0aW9uID0gW107XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlXG5cbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoICEkLmlzQXJyYXkoc2V0dGluZ3MuYXR0cmlidXRlcykgKVxuICAgICAgICAgICAgc2V0dGluZ3MuYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBpZiggdHlwZW9mIHNldHRpbmdzLmF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBzZXR0aW5ncy5hdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLFxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb25Qb3B1bGF0b3IoJGVsZW1lbnQsIHNldHRpbmdzKS5jb2xsZWN0KCksXG4gICAgICAgICAgICAgICAgZWxlbWVudF9pbl9jb2xsZWN0aW9uID0gJC5pbkFycmF5KGVsZW1lbnQsIGNvbGxlY3Rpb24pID4gLTEsXG4gICAgICAgICAgICAgICAgdW5pcXVlX21ldGhvZF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnXycgKyB1bmlxdWVfaWQoKSxcblxuICAgICAgICAgICAgICAgIHRoaXNfbG9hZF9pbnN0YW5jZSA9IG5ldyBSZXNvdXJjZXNMb2FkZXIoY29sbGVjdGlvbiwgc2V0dGluZ3MpO1xuXG4gICAgICAgICAgICBtZXRob2RfY29sbGVjdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZCA6IHVuaXF1ZV9tZXRob2RfbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgIGluc3RhbmNlIDogdGhpc19sb2FkX2luc3RhbmNlLFxuICAgICAgICAgICAgICAgIGVsZW1lbnQgOiBlbGVtZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpc19sb2FkX2luc3RhbmNlLnByb2dyZXNzKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmKCAhZWxlbWVudF9pbl9jb2xsZWN0aW9uIClcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcihuYW1lc3BhY2VfcHJlZml4KydQcm9ncmVzcy4nK25hbWVzcGFjZV9wcmVmaXgsIFskZWxlbWVudF0pO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpc19sb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmKCBzZXR0aW5ncy52aXNpYmxlIClcbiAgICAgICAgICAgICAgICAgICAgJCggJC5uaXRlID8gJGRvY3VtZW50IDogJHdpbmRvdyApLm9mZignc2Nyb2xsLicgKyB1bmlxdWVfbWV0aG9kX25hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgICAgICBpZiggIWVsZW1lbnRfaW5fY29sbGVjdGlvbiApXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIobmFtZXNwYWNlX3ByZWZpeCsnTG9hZC4nK25hbWVzcGFjZV9wcmVmaXgsIFskZWxlbWVudF0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIHJlZnJlc2ggb3RoZXIgbWV0aG9kIGNhbGxzIGZvciBzYW1lIGVsIChvbWl0dGluZyB0aGlzIG9uZSlcbiAgICAgICAgICAgICAgICBtZXRob2RfY29sbGVjdGlvbiA9IG1ldGhvZF9jb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbihvYmopIHsgLy8gdG9kbyBjaGVjayBwb2x5ZmlsbCBlZmZpY2llbmN5IGluIGllXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouaWQgIT09IHVuaXF1ZV9tZXRob2RfbmFtZXNwYWNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvciggbGV0IGtleSBpbiBtZXRob2RfY29sbGVjdGlvbiApXG4gICAgICAgICAgICAgICAgICAgIGlmKCAkZWxlbWVudC5pcyhtZXRob2RfY29sbGVjdGlvbltrZXldLmVsZW1lbnQpIClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZF9jb2xsZWN0aW9uW2tleV0uaW5zdGFuY2UubG9vcCgpO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYoIHNldHRpbmdzLnZpc2libGUgKXtcblxuICAgICAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgICAgICAkLm5pdGUuc2Nyb2xsKHVuaXF1ZV9tZXRob2RfbmFtZXNwYWNlLCBmdW5jdGlvbigpeyB0aGlzX2xvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCB7IGZwcyA6IDI1IH0pO1xuXG4gICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQgPSBmdW5jdGlvbihmbiwgd2FpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoIHRpbWUgKyB3YWl0IC0gRGF0ZS5ub3coKSApIDwgMCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5vbignc2Nyb2xsLicrdW5pcXVlX21ldGhvZF9uYW1lc3BhY2UsIHRocm90dGxlX3Njcm9sbF9ldmVudChmdW5jdGlvbigpeyB0aGlzX2xvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSk7Il19
