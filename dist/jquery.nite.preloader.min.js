"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor,f="nite",e=f+"Preload",g=e+"er";if(function(a){a.console||(a.console={});for(var b,c,d=a.console,e=function(){},f=["memory"],g=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profiles","profileEnd","show","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];b=f.pop();)d[b]||(d[b]={});for(;c=g.pop();)d[c]||(d[c]=e)}(a),!c)return console.error("jQuery is needed for "+g+" to work!"),void 0;var h=c(b),i=c(a),j=function(){return c.nite?c.nite.uniqueId():d(8999*Math.random())+1e3},k=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>i.width()||e.top>i.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},l=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},m=function(a){return l(a)&&(a.complete&&1<=d(a.naturalWidth)&&1<=d(a.naturalHeight)||2<=a.readyState&&0!==a.videoWidth&&0!==a.videoHeight)},n=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(l(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},o=function(){function d(a){_classCallCheck(this,d);var b=this;this._settings=c.extend(!0,{playthrough:!1,srcsetAttr:"data-srcset",srcAttr:"data-src",visible:!1},a),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._process=!1,this._format=null,this._callback=c.noop,this._done=function(a){if(!b._process){var c=a.type.charAt(0).toUpperCase()+a.type.slice(1);b._$element.trigger(f+c+"."+f,[b._$element])}b._callback.call(null,b._id,b._element.currentSrc||b._element.src)}}return _createClass(d,[{key:"process",value:function(){if(!this._settings.visible||k(this._element)){var b=this,d=this._settings.srcAttr,e=this._settings.srcAttr.replace("data-","");if(m(this._element))this._process||this._$element.off("."+this._id_event),this._done(new Event(c.isNumeric(this._element.naturalWidth)?f+"Load":f+"Error"));else{if("image"===this._format){this._$element[this._process?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var h=this._$element.closest("picture"),i=this._settings.srcsetAttr,j=this._settings.srcsetAttr.replace("data-","");h.length&&"HTMLPictureElement"in a?(this._$element.removeData(j).removeAttr(i).removeData(e).removeAttr(d),h.find("source["+i+"]").attr("srcset",h.data(j)).removeData(j).removeAttr(i)):(this._$element.is("["+i+"]")&&this._$element.attr("srcset",this._$element.data(j)).removeData(j).removeAttr(i),this._$element.is("["+d+"]")&&this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d))}if("video"===this._format||"audio"===this._format){var l=this._$element.find("source"),n=function(a){var b=Math.round;return a.buffered.length&&1==b(a.buffered.end(0))/b(a.seekable.end(0))},o=!1;l.length?l.each(function(){c(this).is("["+d+"]")&&(c(this).attr("src",c(this).data(e)).removeData(e).removeAttr(d),o=!0)})[this._process?"on":"one"]("error."+this._id_event,function(a){var d=g+"_error";c(this).data(d,!0),l.length===l.filter(function(){return!0===c(this).data(d)}).length&&b._done(a)}):this._$element.is("["+d+"]")&&(this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d)[this._process?"on":"one"]("error."+this._id_event,b._done),o=!0),o&&this._element.load(),this._$element[this._process?"on":"one"]("loadedmetadata."+this._id_event,function(){!0!==b._settings.playthrough&&"full"!==b._settings.playthrough&&b._done(new Event("load"))})[this._process?"on":"one"]("canplay."+b._id_event,function(){"full"!==b._settings.playthrough||0!==this.currentTime||n(this)||this.currentTime++})[this._process?"on":"one"]("progress."+b._id_event,function(){if("full"===b._settings.playthrough){var a=this;setTimeout(function(){0<a.readyState&&!a.duration?b._done(new Event("error")):n(a)?(a.currentTime=0,!b._process&&a.paused&&c(a).is("[autoplay]")&&a.play(),b._done(new Event("load"))):(!a.paused&&a.pause(),!b._process&&(a.currentTime+=2))},25)}})[this._process?"on":"one"]("canplaythrough."+this._id_event,function(){!0===b._settings.playthrough&&b._done(new Event("load"))})}this._process||this._$element.data(g,this._id_event)}this._resource=this._element.currentSrc||this._element.src}}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!m(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c){a.call(b,c)}}}},{key:"resource",set:function(a){var d=l(a.resource),e="string"==typeof a.resource;if(d||e){if(this._id=a.id,this._format=n(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}d&&(this._element=a.resource),this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._process=void 0!==this._id_event,this._id_event=this._process?this._id_event:g+"_unique_"+j()}}}]),d}(),p=function(){function a(b,d){if(_classCallCheck(this,a),this._collection=[],this._collection_loaded=[],this._collection_instances=[new o(this._settings)],c.isArray(b)&&("string"==typeof b[0]||l(b[0])))for(var e in b)b.hasOwnProperty(e)&&this._collection.push({id:j(),resource:b[e]});("string"==typeof b||l(b))&&this._collection.push({id:j(),resource:b}),this._settings=c.extend(!0,{sequential:!1},d),this.percentage=0,this._callback=c.noop(),this._progress=c.noop(),this._abort=!1,this._complete=!1,this._loaded=0,this.loop()}return _createClass(a,[{key:"loop",value:function(){var a=this;if(this._collection.length){if(!0===this._complete)return void a._callback.call(null);for(var b,d=0;d<this._collection.length&&!this._abort;d++)b=new o(this._settings),this._collection_instances.push(b),b.resource=this._collection[d],b.process(),b.done(function(b,d){-1===c.inArray(b,a._collection_loaded)&&(a._loaded++,a._collection_loaded.push(b),a.percentage=100*(a._loaded/a._collection.length),a._progress.call(null,d)),a._loaded>a._collection.length||a._abort||a._loaded===a._collection.length&&(a._callback.call(null),a._complete=!0)})}}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(){a.call(b)};return this._collection.length?this._callback=d:d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?this._progress=d:d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].abort();this._collection.length&&(this._abort=!0)}}]),a}(),q=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b="img, video, audio",d=b+", picture, source",e=this._$element.find(b);if(this._$element.is(b)&&e.add(this._$element),e.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(d).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var f=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+d+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(d)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)f(a)}return a}}]),a}();c[e]=p,c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=!1,e=this,k=c(e),l=new q(k,d).collect(),m=g+"_"+j(),n=function(){c.nite?h.off("scroll."+m):i.off("scroll."+m),k.removeData(g),a=!0},o=k.data(g);if(void 0!==o&&(o.abort(),n()),o=new p(l,d),o.progress(function(){k.trigger(f+"Progress."+f,[k])}),o.done(function(){a||(n(),k.trigger(f+"Load."+f,[k]),b.call(e),b=c.noop)}),k.data(g,o),d.visible)if(c.nite)c.nite.scroll(m,function(){o.loop()},{fps:25});else{var r=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};i.on("scroll."+m,r(function(){o.loop()},1e3))}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxtQkEyQzRDLEtBQUEsQUFBSyxNQTFDN0MsRUFESixBQUN1QixPQUNuQixFQUFtQixFQUZ2QixBQUV3QyxVQUNwQyxFQUFZLEVBSGhCLEFBR2lDLEFBR2pDLEFBQ0EsQUFDQSxRQUFDLEFBQVMsV0FBUSxBQUNkLEFBQUksQ0FBQyxFQUFMLEFBQVksVUFDUixFQUFBLEFBQU8sQUFBVSxBQUNyQixtQkFBQSxBQUNJLEdBREosQUFDVSxFQUROLEVBQU0sRUFBVixBQUFpQixRQUViLEVBQUEsQUFBUSxVQUFXLEFBQUUsQ0FGekIsRUFBQSxBQUdJLEFBQWEsQUFBQyxhQUhsQixBQUlJLEFBQVUsQUFBQyxBQUNQLEFBQ0EsQUFBcUUsQUFBTSxBQUNuRiw4UEFBTyxFQUFPLEVBQWQsQUFBYyxBQUFXLEFBQ3JCLEFBQUksT0FBSixBQUFLLEFBQUksT0FEYixBQUVRLEFBQUksQUFBUSxBQUNwQixjQUFPLEVBQVMsRUFBaEIsQUFBZ0IsQUFBUSxBQUNwQixBQUFJLE9BQUosQUFBSyxBQUFJLE9BRGIsQUFFUSxBQUFJLEFBQVUsQUFDekIsT0FoQkQsQUFnQkcsQUFDSCxBQUdBLEFBQ0EsS0FBQSxBQUFJLEFBQUMsQUFBSSxBQUNMLEdBQ0EsQUFBTyxBQUNWLEFBQ0QsQUFHQSxlQU5JLEFBQVEsTUFBTSxBQUF3QiwwQkFBdEMsQUFBZ0QsQUFDaEQsdUJBT0EsR0FGSixBQUVnQixBQUFFLEtBQ2QsRUFISixBQUdjLEFBQUUsS0FFWixFQUFBLEFBQVksVUFBVSxBQUVsQixPQUFPLEdBQUEsQUFBRSxLQUFPLEVBQUEsQUFBRSxLQUFYLEFBQVMsQUFBTyxhQUF3QixVQUEvQyxBQUFvQyxBQUFXLEFBQUssQUFBWSxBQUFPLEFBQVMsQUFFbkYsYUFUTCxFQVdJLEVBQUEsQUFBYSxBQUFTLFdBQVEs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RCxBQU1BLEtBQUEsQUFBYyxLQUFLLFVBQVksQUFFM0IsQUFBSSxBQUNBLEFBRUosS0FFQSxNQUFBLEFBQVMsUUFBUSxFQUFqQixBQUFpQixBQUFpQixBQUFRLFVBQTFDLEFBQTRELEFBQUMsQUFFN0QsT0FBQSxBQUFTLEFBQUssQUFDZCxVQUFXLEVBQVgsQUFBYSxBQUVoQixLQVpELEFBY0EsS0FBQSxBQUFTLEFBQUssQUFBVyxBQUV6QixVQUFJLEVBQUosQUFBYSxBQUFTLEFBRWxCLFdBQUksRUFBSixBQUFNLEtBQ0YsRUFBQSxBQUFFLEtBQUYsQUFBTyxBQUFPLFNBQWlCLFVBQVUsQUFBRSxHQUFBLEFBQWMsQUFBUyxNQUFsRSxFQUFvRSxDQUFFLElBRDFFLEFBQ0ksQUFBb0UsQUFBUSxTQUU1RSxBQUVBLElBQU0sR0FBQSxBQUF3QixBQUFTLEFBQUksYUFBTSxBQUU3QyxJQUFJLEdBQU8sS0FBWCxBQUFXLEFBQUssQUFFaEIsWUFBTyxXQUFXLEFBQ2QsQ0FBQSxBQUFpQyxBQUFHLEFBQ2hDLENBREMsQUFBTyxLQUFPLEtBQWYsQUFBZSxBQUFLLFFBRXBCLE1BQU8sS0FBUCxBQUFPLEFBQUssQUFDZixBQUNKLE1BTEQsQUFPSCxDQVhELEFBYUEsSUFBQSxBQUFRLEdBQVIsQUFBVyxBQUFVLFlBQWlCLEVBQXNCLFVBQVUsQUFBRSxHQUFBLEFBQWMsQUFBUyxNQUEvRixBQUFzQyxBQUEyRCxBQUVwRyxPQUVKLEFBRUosQ0FsRkQsQUFBTyxBQW9GVixFQWxIRCxBQW9ISCxDQTV5QkQsR0FBQSxBQTR5QkcsT0E1eUJILEFBNHlCVyxTQTV5QlgsQUE0eUJxQiIsImZpbGUiOiJqcXVlcnkubml0ZS5wcmVsb2FkZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIEpRdWVyeSBIZWF2eSBSZXNvdXJjZXNMb2FkZXIgfCBEYW5pZWxlIEZpb3JvbmkgfCBkZmlvcm9uaTkxQGdtYWlsLmNvbSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsICQsIHVuZGVmaW5lZCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgY29uc3RcbiAgICAgICAgbmFtZXNwYWNlX3ByZWZpeCA9ICduaXRlJyxcbiAgICAgICAgbmFtZXNwYWNlX21ldGhvZCA9IG5hbWVzcGFjZV9wcmVmaXgrJ1ByZWxvYWQnLFxuICAgICAgICBuYW1lc3BhY2UgPSBuYW1lc3BhY2VfbWV0aG9kKydlcic7XG5cblxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsbWlsbHIvY29uc29sZS1wb2x5ZmlsbFxuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuICAgIChmdW5jdGlvbihnbG9iYWwpIHtcbiAgICAgICAgaWYgKCFnbG9iYWwuY29uc29sZSlcbiAgICAgICAgICAgIGdsb2JhbC5jb25zb2xlID0ge307XG4gICAgICAgIGxldCBjb24gPSBnbG9iYWwuY29uc29sZSxcbiAgICAgICAgICAgIHByb3AsIG1ldGhvZCxcbiAgICAgICAgICAgIGR1bW15ID0gZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSBbJ21lbW9yeSddLFxuICAgICAgICAgICAgbWV0aG9kcyA9ICgnYXNzZXJ0LGNsZWFyLGNvdW50LGRlYnVnLGRpcixkaXJ4bWwsZXJyb3IsZXhjZXB0aW9uLGdyb3VwLCcgK1xuICAgICAgICAgICAgICAgICdncm91cENvbGxhcHNlZCxncm91cEVuZCxpbmZvLGxvZyxtYXJrVGltZWxpbmUscHJvZmlsZSxwcm9maWxlcyxwcm9maWxlRW5kLCcgK1xuICAgICAgICAgICAgICAgICdzaG93LHRhYmxlLHRpbWUsdGltZUVuZCx0aW1lbGluZSx0aW1lbGluZUVuZCx0aW1lU3RhbXAsdHJhY2Usd2FybicpLnNwbGl0KCcsJyk7XG4gICAgICAgIHdoaWxlIChwcm9wID0gcHJvcGVydGllcy5wb3AoKSlcbiAgICAgICAgICAgIGlmICghY29uW3Byb3BdKVxuICAgICAgICAgICAgICAgIGNvbltwcm9wXSA9IHt9O1xuICAgICAgICB3aGlsZSAobWV0aG9kID0gbWV0aG9kcy5wb3AoKSlcbiAgICAgICAgICAgIGlmICghY29uW21ldGhvZF0pXG4gICAgICAgICAgICAgICAgY29uW21ldGhvZF0gPSBkdW1teTtcbiAgICB9KSh3aW5kb3cpO1xuICAgIC8vIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLVxuXG5cbiAgICAvLyB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gflxuICAgIGlmKCAhJCApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignalF1ZXJ5IGlzIG5lZWRlZCBmb3IgJytuYW1lc3BhY2UrJyB0byB3b3JrIScpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gflxuXG5cbiAgICBjb25zdFxuXG4gICAgICAgICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpLFxuICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxuXG4gICAgICAgIHVuaXF1ZV9pZCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIHJldHVybiAkLm5pdGUgPyAkLm5pdGUudW5pcXVlSWQoKSA6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5OTk5IC0gMTAwMCkpICsgMTAwMDtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX3Zpc2libGUgPSBmdW5jdGlvbihlbGVtZW50KXtcblxuICAgICAgICAgICAgY29uc3QgJGVsID0gJChlbGVtZW50KTtcblxuICAgICAgICAgICAgbGV0IGluX3ZpZXdwb3J0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gJC5uaXRlLmluVmlld3BvcnQoZWxlbWVudCkucmF0aW87XG5cbiAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gISggcmVjdC5yaWdodCA8IDAgfHwgcmVjdC5ib3R0b20gPCAwIHx8IHJlY3QubGVmdCA+ICR3aW5kb3cud2lkdGgoKSB8fCByZWN0LnRvcCA+ICR3aW5kb3cuaGVpZ2h0KCkgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaW5fdmlld3BvcnQgJiYgJGVsLmlzKCc6dmlzaWJsZScpICYmICRlbC5jc3MoJ3Zpc2liaWxpdHknKSAhPT0gJ2hpZGRlbic7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpc19odG1sX29iamVjdCA9IGZ1bmN0aW9uKCBvYmplY3QgKXtcblxuICAgICAgICAgICAgaWYoIHR5cGVvZiBvYmplY3QgIT09ICdvYmplY3QnIClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2Ygb2JqZWN0LnN0eWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqZWN0Lm93bmVyRG9jdW1lbnQgPT09ICdvYmplY3QnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfbG9hZGVkID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cbiAgICAgICAgICAgIHJldHVybiBpc19odG1sX29iamVjdChlbGVtZW50KSAmJiAoXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoZWxlbWVudC5uYXR1cmFsV2lkdGgpID49IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihlbGVtZW50Lm5hdHVyYWxIZWlnaHQpID49IDFcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfHxcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVhZHlTdGF0ZSA+PSAyICYmXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmlkZW9XaWR0aCAhPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZpZGVvSGVpZ2h0ICE9PSAwXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgaXNfZm9ybWF0ID0gZnVuY3Rpb24oIGl0ZW0sIGV4cGVjdGVkX2Zvcm1hdCApe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGZvcm1hdF9leHRlbnNpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZSA6ICdqcFtlXT9nfGdpZnxwbmd8dGlmW2ZdP3xibXAnLFxuICAgICAgICAgICAgICAgICAgICBhdWRpbyA6ICdtcDN8b2dnJyxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gOiAnbXA0fG9ndnxvZ2d8d2VibSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvcm1hdF9uYW1lcyA9IE9iamVjdC5rZXlzKGZvcm1hdF9leHRlbnNpb25zKSxcbiAgICAgICAgICAgICAgICBiYXNlNjRfaGVhZGluZyA9ICdcXDtiYXNlNjRcXCwnO1xuXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0geyBmb3JtYXQ6IG51bGwsIGV4dGVuc2lvbjogbnVsbCB9O1xuXG4gICAgICAgICAgICBpZiggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJz8nKVswXTsgLy8gZ2V0IHJpZCBvZiBxdWVyeSBzdHJpbmdzXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJyMnKVswXTsgLy8gZ2V0IHJpZCBvZiBoYXNoZXNcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAnJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdF9xdWV1ZSA9IHVuZGVmaW5lZCAhPT0gZXhwZWN0ZWRfZm9ybWF0ID8gWyBleHBlY3RlZF9mb3JtYXQgXSA6IGZvcm1hdF9uYW1lcztcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeCBpbiBmb3JtYXRfcXVldWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0X3F1ZXVlLmhhc093blByb3BlcnR5KHgpKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhcXC4oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKSQpfCcgKyBiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXM2NCA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cCgnXmRhdGE6JyArIGZvcm1hdF9xdWV1ZVt4XSArICdcXC8oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKScsICdnJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoZXM2NCB8fCBudWxsID09PSBtYXRjaGVzNjQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczY0ID0gbWF0Y2hlczY0WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBtYXRjaGVzNjQucmVwbGFjZSgnZGF0YTonICsgZm9ybWF0X3F1ZXVlW3hdICsgJy9nJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cChmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dLCAnZycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gZm9ybWF0X3F1ZXVlW3hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmV4dGVuc2lvbiA9IG1hdGNoZXNbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggaXNfaHRtbF9vYmplY3QoaXRlbSkgKXtcblxuICAgICAgICAgICAgICAgIGxldCB0YWdfbmFtZSA9IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkLmluQXJyYXkodGFnX25hbWUsIGZvcm1hdF9uYW1lcykgPiAtMSApXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0YWdfbmFtZSA9PT0gJ2ltZycgKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gJ2ltYWdlJztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIFxuICAgICAgICB9O1xuXG4gICAgY2xhc3MgUmVzb3VyY2VMb2FkZXIge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHBsYXl0aHJvdWdoICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNyY3NldEF0dHIgICA6ICdkYXRhLXNyY3NldCcsXG4gICAgICAgICAgICAgICAgc3JjQXR0ciAgICAgIDogJ2RhdGEtc3JjJyxcbiAgICAgICAgICAgICAgICB2aXNpYmxlICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuX2lkICAgICAgICA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCAgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ICAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgID0gJCgpO1xuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcHJvY2VzcyAgID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCAgICA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrICA9ICQubm9vcDtcbiAgICAgICAgICAgIHRoaXMuX2RvbmUgICAgICA9IGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgICAgICAgICAgaWYoICFzZWxmLl9wcm9jZXNzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJfZXZlbnQgPSBlLnR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnR5cGUuc2xpY2UoMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fJGVsZW1lbnQudHJpZ2dlcihuYW1lc3BhY2VfcHJlZml4ICsgdHJpZ2dlcl9ldmVudCArICcuJyArIG5hbWVzcGFjZV9wcmVmaXgsIFtzZWxmLl8kZWxlbWVudF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8sIHNlbGYuX2lkLCBzZWxmLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgc2VsZi5fZWxlbWVudC5zcmMpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICBzZXQgcmVzb3VyY2UoIGRhdGEgKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBlbGVtZW50X3Jlc291cmNlID0gaXNfaHRtbF9vYmplY3QoZGF0YS5yZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgc3RyaW5nX3Jlc291cmNlID0gdHlwZW9mIGRhdGEucmVzb3VyY2UgPT09ICdzdHJpbmcnO1xuXG4gICAgICAgICAgICBpZiggIWVsZW1lbnRfcmVzb3VyY2UgJiYgIXN0cmluZ19yZXNvdXJjZSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBpc19mb3JtYXQoZGF0YS5yZXNvdXJjZSkuZm9ybWF0O1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNfaW1nID0gdGhpcy5fZm9ybWF0ID09PSAnaW1hZ2UnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXNfaW1nID8gJ2ltZycgOiB0aGlzLl9mb3JtYXQpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGlzX2ltZyApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIgPSAnZGF0YS1zcmNzZXQnO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY0F0dHIgPSAnZGF0YS1zcmMnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgPSBkYXRhLnJlc291cmNlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBlbGVtZW50X3Jlc291cmNlIClcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZGF0YS5yZXNvdXJjZTtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKSwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCB0aGlzLl9yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgPSB0aGlzLl8kZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzICA9IHRoaXMuX2lkX2V2ZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCA9IHRoaXMuX3Byb2Nlc3MgPyB0aGlzLl9pZF9ldmVudCA6IG5hbWVzcGFjZSArICdfdW5pcXVlXycgKyB1bmlxdWVfaWQoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvY2Vzcygpe1xuXG4gICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MudmlzaWJsZSAmJiAhaXNfdmlzaWJsZSh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsXG4gICAgICAgICAgICAgICAgc3JjX2NsZWFuID0gdGhpcy5fc2V0dGluZ3Muc3JjQXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcblxuICAgICAgICAgICAgaWYgKCBpc19sb2FkZWQodGhpcy5fZWxlbWVudCkgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3Byb2Nlc3MpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50Lm9mZignLicgKyB0aGlzLl9pZF9ldmVudCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9kb25lKG5ldyBFdmVudCgkLmlzTnVtZXJpYyh0aGlzLl9lbGVtZW50Lm5hdHVyYWxXaWR0aCkgPyBuYW1lc3BhY2VfcHJlZml4KydMb2FkJyA6IG5hbWVzcGFjZV9wcmVmaXgrJ0Vycm9yJykpO1xuXG4gICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICdpbWFnZScgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2xvYWQuJyArIHRoaXMuX2lkX2V2ZW50ICsgJyBlcnJvci4nICsgdGhpcy5faWRfZXZlbnQsIHRoaXMuX2RvbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGljdHVyZSA9IHRoaXMuXyRlbGVtZW50LmNsb3Nlc3QoJ3BpY3R1cmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzZXRfY2xlYW4gPSB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkcGljdHVyZS5sZW5ndGggJiYgJ0hUTUxQaWN0dXJlRWxlbWVudCcgaW4gd2luZG93ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY3NldF9jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRwaWN0dXJlLmZpbmQoJ3NvdXJjZVsnICsgc3Jjc2V0ICsgJ10nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmNzZXQnLCAkcGljdHVyZS5kYXRhKHNyY3NldF9jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyY3NldCArICddJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyY3NldCcsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3Jjc2V0X2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgdGhpcy5fJGVsZW1lbnQuZGF0YShzcmNfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICd2aWRlbycgfHwgdGhpcy5fZm9ybWF0ID09PSAnYXVkaW8nICl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICRzb3VyY2VzID0gdGhpcy5fJGVsZW1lbnQuZmluZCgnc291cmNlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19mdWxseV9idWZmZXJlZCA9IGZ1bmN0aW9uKG1lZGlhKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZWRpYS5idWZmZXJlZC5sZW5ndGggJiYgTWF0aC5yb3VuZChtZWRpYS5idWZmZXJlZC5lbmQoMCkpIC8gTWF0aC5yb3VuZChtZWRpYS5zZWVrYWJsZS5lbmQoMCkpID09PSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsX21lZGlhX2xvYWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiggJHNvdXJjZXMubGVuZ3RoICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzb3VyY2VzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuaXMoJ1snICsgc3JjICsgJ10nKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgJCh0aGlzKS5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfbWVkaWFfbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2Vycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VzX2Vycm9yX2lkID0gbmFtZXNwYWNlKydfZXJyb3InO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKHNvdXJjZXNfZXJyb3JfaWQsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICRzb3VyY2VzLmxlbmd0aCA9PT0gJHNvdXJjZXMuZmlsdGVyKGZ1bmN0aW9uKCl7IHJldHVybiB0cnVlID09PSAkKHRoaXMpLmRhdGEoc291cmNlc19lcnJvcl9pZCk7IH0pLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUoZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3JjX2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnZXJyb3IuJyArIHRoaXMuX2lkX2V2ZW50LCBzZWxmLl9kb25lKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfbWVkaWFfbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGNhbGxfbWVkaWFfbG9hZCApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50LmxvYWQoKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX3Byb2Nlc3MgPyAnb24nIDogJ29uZSddKCdsb2FkZWRtZXRhZGF0YS4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cnVlICE9PSBzZWxmLl9zZXR0aW5ncy5wbGF5dGhyb3VnaCAmJiAnZnVsbCcgIT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCgnbG9hZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnY2FucGxheS4nICsgc2VsZi5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ2Z1bGwnID09PSBzZWxmLl9zZXR0aW5ncy5wbGF5dGhyb3VnaCAmJiB0aGlzLmN1cnJlbnRUaW1lID09PSAwICYmICFpc19mdWxseV9idWZmZXJlZCh0aGlzKSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgncHJvZ3Jlc3MuJyArIHNlbGYuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdmdWxsJyA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZWRpYSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZWRpYS5yZWFkeVN0YXRlID4gMCAmJiAhbWVkaWEuZHVyYXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdlcnJvcicpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKCBpc19mdWxseV9idWZmZXJlZChtZWRpYSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5jdXJyZW50VGltZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuX3Byb2Nlc3MgJiYgbWVkaWEucGF1c2VkICYmICQobWVkaWEpLmlzKCdbYXV0b3BsYXldJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnBsYXkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVkaWEucGF1c2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5wYXVzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wcm9jZXNzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5jdXJyZW50VGltZSArPSAyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX3Byb2Nlc3MgPyAnb24nIDogJ29uZSddKCdjYW5wbGF5dGhyb3VnaC4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdHJ1ZSA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCgnbG9hZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9wcm9jZXNzIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZGF0YShuYW1lc3BhY2UsIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHRoaXMuX2VsZW1lbnQuY3VycmVudFNyYyB8fCB0aGlzLl9lbGVtZW50LnNyYztcblxuICAgICAgICB9XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgaWYoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyY3NldCcpLFxuICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiggdW5kZWZpbmVkICE9PSBzcmMgKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHNyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3JjJykucmVtb3ZlQXR0cignc3Jjc2V0Jyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyY3NldCApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciwgc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZG9uZShjYWxsYmFjayl7XG5cbiAgICAgICAgICAgIGlmKCAhJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgUmVzb3VyY2VzTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25fbG9hZGVkID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyA9IFsgbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKSBdO1xuXG4gICAgICAgICAgICBpZiAoJC5pc0FycmF5KGNvbGxlY3Rpb24pICYmICggdHlwZW9mIGNvbGxlY3Rpb25bMF0gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb25bMF0pICkpXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgcmVzb3VyY2UgaW4gY29sbGVjdGlvbiApXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjb2xsZWN0aW9uLmhhc093blByb3BlcnR5KHJlc291cmNlKSApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb25bcmVzb3VyY2VdIH0pO1xuICAgICAgICAgICAgaWYgKCB0eXBlb2YgY29sbGVjdGlvbiA9PT0gJ3N0cmluZycgfHwgaXNfaHRtbF9vYmplY3QoY29sbGVjdGlvbikgKVxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24ucHVzaCh7IGlkIDogdW5pcXVlX2lkKCksIHJlc291cmNlIDogY29sbGVjdGlvbiB9KTtcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7XG4gICAgICAgICAgICAgICAgc2VxdWVudGlhbDogZmFsc2VcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9ICQubm9vcCgpO1xuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAkLm5vb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX2Fib3J0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2xvYWRlZCA9IDA7XG5cbiAgICAgICAgICAgIHRoaXMubG9vcCgpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBsb29wKCl7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiggdHJ1ZSA9PT0gdGhpcy5fY29tcGxldGUgKXtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Fib3J0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIHRvZG8gdGhpcy5fc2V0dGluZ3Muc2VxdWVudGlhbCAtLT4gbXVzdCBiZSBjYWxsZWQgaW4gdGhlIGZvbGxvd2luZyAuZG9uZSgpIGNhbGwgYW5kIHRha2luZyBhY2NvdW50IG9mIHZpc2liaWxpdHkgY2hlY2sgaW4gUmVzb3VyY2VMb2FkZXIoKTtcblxuICAgICAgICAgICAgICAgIGxldCBsb2FkX2luc3RhbmNlID0gbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25faW5zdGFuY2VzLnB1c2gobG9hZF9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLnJlc291cmNlID0gdGhpcy5fY29sbGVjdGlvbltpXTtcblxuICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5kb25lKGZ1bmN0aW9uKGlkLCByZXNvdXJjZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQuaW5BcnJheShpZCwgc2VsZi5fY29sbGVjdGlvbl9sb2FkZWQpID09PSAtMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbGxlY3Rpb25fbG9hZGVkLnB1c2goaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBlcmNlbnRhZ2UgPSBzZWxmLl9sb2FkZWQgLyBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCAqIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvZ3Jlc3MuY2FsbChudWxsIC8qIHRvZG8gKi8sIHJlc291cmNlKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLl9sb2FkZWQgPiBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCB8fCBzZWxmLl9hYm9ydCApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNlbGYuX2xvYWRlZCA9PT0gc2VsZi5fY29sbGVjdGlvbi5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvICovKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvZ3Jlc3MoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKHJlc291cmNlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgZm9yKCBjb25zdCBpbnN0YW5jZSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGluc3RhbmNlIF0uYWJvcnQoKTtcblxuICAgICAgICAgICAgaWYoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIGNsYXNzIENvbGxlY3Rpb25Qb3B1bGF0b3Ige1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgY29sbGVjdCggLypvdXRwdXQqLyApIHsgLy8gdG9kbyBvdXRwdXQgdHlwZXMgZXM6IG9ubHkgZWxlbWVudHMsIG9ubHksIHVybHMsIG1peGVkLCBhbGwgLi4uIGR1bm5vXG5cbiAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgdGFyZ2V0cyA9ICdpbWcsIHZpZGVvLCBhdWRpbycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c19leHRlbmRlZCA9IHRhcmdldHMgKyAnLCBwaWN0dXJlLCBzb3VyY2UnO1xuXG4gICAgICAgICAgICBsZXQgJHRhcmdldHMgPSB0aGlzLl8kZWxlbWVudC5maW5kKHRhcmdldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHMpKVxuICAgICAgICAgICAgICAgICR0YXJnZXRzLmFkZCh0aGlzLl8kZWxlbWVudCk7XG4gICAgICAgICAgICAkdGFyZ2V0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuX3NldHRpbmdzLmJhY2tncm91bmRzKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50LmZpbmQoJyonKS5hZGRCYWNrKCkubm90KHRhcmdldHNfZXh0ZW5kZWQpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpICE9PSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpLnJlcGxhY2UoL3VybFxcKFwifHVybFxcKCd8dXJsXFwofCgoXCInKVxcKSQpL2lnbSwgJycpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBpbiB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCdbJyArIGF0dHIgKyAnXTpub3QoJyArIHRhcmdldHNfZXh0ZW5kZWQgKyAnKScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmF0dHIoYXR0cikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBhdHRyICsgJ10nKSAmJiAhdGhpcy5fJGVsZW1lbnQuaXModGFyZ2V0c19leHRlbmRlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMuXyRlbGVtZW50LmF0dHIoYXR0cikpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRbbmFtZXNwYWNlX21ldGhvZF0gPSBSZXNvdXJjZXNMb2FkZXI7XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlXG5cbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoICEkLmlzQXJyYXkoc2V0dGluZ3MuYXR0cmlidXRlcykgKVxuICAgICAgICAgICAgc2V0dGluZ3MuYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBpZiggdHlwZW9mIHNldHRpbmdzLmF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBzZXR0aW5ncy5hdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBsZXQgX2NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBuZXcgQ29sbGVjdGlvblBvcHVsYXRvcigkZWxlbWVudCwgc2V0dGluZ3MpLmNvbGxlY3QoKSxcbiAgICAgICAgICAgICAgICBldmVudF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnXycgKyB1bmlxdWVfaWQoKSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQubml0ZSApXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCdzY3JvbGwuJyArIGV2ZW50X25hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cub2ZmKCdzY3JvbGwuJytldmVudF9uYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZURhdGEobmFtZXNwYWNlKTtcblxuICAgICAgICAgICAgICAgICAgICBfY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGxvYWRfaW5zdGFuY2UgPSAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IGxvYWRfaW5zdGFuY2UgKSB7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VzTG9hZGVyKGNvbGxlY3Rpb24sIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5wcm9ncmVzcyhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ1Byb2dyZXNzLicrbmFtZXNwYWNlX3ByZWZpeCwgWyRlbGVtZW50XSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIF9jb21wbGV0ZSApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ0xvYWQuJytuYW1lc3BhY2VfcHJlZml4LCBbJGVsZW1lbnRdKTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSwgbG9hZF9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGlmKCBzZXR0aW5ncy52aXNpYmxlICl7XG5cbiAgICAgICAgICAgICAgICBpZiggJC5uaXRlIClcbiAgICAgICAgICAgICAgICAgICAgJC5uaXRlLnNjcm9sbChldmVudF9uYW1lc3BhY2UsIGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCB7IGZwcyA6IDI1IH0pO1xuXG4gICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQgPSBmdW5jdGlvbihmbiwgd2FpdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRpbWUgKyB3YWl0IC0gRGF0ZS5ub3coKSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cub24oJ3Njcm9sbC4nK2V2ZW50X25hbWVzcGFjZSwgdGhyb3R0bGVfc2Nyb2xsX2V2ZW50KGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSk7Il19
