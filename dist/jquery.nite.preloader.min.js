"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor;if(!c)return function(b,c){if(a.console){var d=a.console.log;1===c?a.console.warn&&(d=a.console.warn):2===c?a.console.error&&(d=a.console.error):void 0,d(b)}}("jQuery is needed for nitePreloader to work!",2),void 0;var f="nite",e=f+"Preload",g=f+"er",h=c(b),i=c(a),j=function(){return c.nite?c.nite.uniqueId():d(Math.random()*8999)+1e3},k=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>i.width()||e.top>i.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},l=function(a){return a.complete&&1<=d(a.naturalWidth)&&1<=d(a.naturalHeight)||2<=a.readyState&&0!==a.videoWidth&&0!==a.videoHeight},m=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},n=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(m(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},o=function(){function a(b){_classCallCheck(this,a);var d=this;this._settings=c.extend(!0,{playthrough:!1,srcsetAttr:"data-srcset",srcAttr:"data-src",visible:!1},b),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._process=!1,this._format=null,this._callback=c.noop,this._done=function(a){if(d._callback.call(null,d._id,d._element.currentSrc||d._element.src),!d._process){var b=a.type.charAt(0).toUpperCase()+a.type.slice(1);d._$element.trigger(f+b+"."+f,[d._$element])}}}return _createClass(a,[{key:"process",value:function(){if(l(this._element))this._process||this._$element.off("."+this._id_event),this._done(new Event(c.isNumeric(this._element.naturalWidth)?f+"Load":f+"Error"));else{if("image"===this._format){this._$element[this._process?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var a=this._$element.closest("picture"),b=this._settings.srcAttr,d=this._settings.srcAttr.replace("data-",""),e=this._settings.srcsetAttr,h=this._settings.srcsetAttr.replace("data-","");a.length?(this._$element.removeData(h).removeAttr(e).removeData(d).removeAttr(b),a.find("source["+e+"]").attr("srcset",a.data(h)).removeData(h).removeAttr(e)):(this._$element.is("["+e+"]")&&this._$element.attr("srcset",this._$element.data(h)).removeData(h).removeAttr(e),this._$element.is("["+b+"]")&&this._$element.attr("src",this._$element.data(d)).removeData(d).removeAttr(b))}"video"!==this._format&&"audio"!==this._format,this._process||this._$element.data(g,this._id_event)}this._resource=this._element.currentSrc||this._element.src}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!l(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c){a.call(b,c)}}}},{key:"resource",set:function(a){var d=m(a.resource),e="string"==typeof a.resource;if(!d&&!e)return!1;if(this._id=a.id,this._format=n(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}return d&&(this._element=a.resource,this._settings.visible&&!k(this._element))?!1:(this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._process=void 0!==this._id_event,this._id_event=this._process?this._id_event:g+"_unique_"+j(),!0)}}]),a}(),p=function(){function a(b,d){_classCallCheck(this,a);var e=this;if(this._collection=[],this._collection_loaded=[],this._collection_instances=[new o(this._settings)],c.isArray(b)&&("string"==typeof b[0]||m(b[0])))for(var f in b)b.hasOwnProperty(f)&&this._collection.push({id:j(),resource:b[f]});("string"==typeof b||m(b))&&this._collection.push({id:j(),resource:b}),this._settings=c.extend(!0,{sequential:!1},d),this.percentage=0,this._callback=c.noop(),this._progress=c.noop(),this._abort=!1,this._complete=!1,this._loaded=0,this._loop=function(){if(this._collection.length){if(!0===this._complete)return void e._callback.call(null);for(var a,b=0;b<this._collection.length&&!this._abort;b++)a=new o(this._settings),this._collection_instances.push(a),a.resource=this._collection[b],a.process(),a.done(function(a,b){-1===c.inArray(a,e._collection_loaded)&&(e._loaded++,e._collection_loaded.push(a),e.percentage=100*(e._loaded/e._collection.length),e._progress.call(null,b)),e._loaded>e._collection.length||e._abort||e._loaded===e._collection.length&&(e._callback.call(null),e._complete=!0)})}},this._loop()}return _createClass(a,[{key:"loop",value:function(){this._loop()}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(){a.call(b)};return this._collection.length?this._callback=d:d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?this._progress=d:d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].abort();this._collection.length&&(this._abort=!0)}}]),a}(),q=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b="img, video, audio",d=b+", picture, source",e=this._$element.find(b);if(this._$element.is(b)&&e.add(this._$element),e.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(d).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var f=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+d+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(d)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)f(a)}return a}}]),a}();c[e]=p,c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=this,e=c(a),k=new q(e,d).collect(),l=g+"_"+j(),m=function(){h.off("scroll."+l),i.off("scroll."+l),e.removeData(g)},n=e.data(g);if(void 0!==n&&(n.abort(),m()),n=new p(k,d),n.progress(function(){e.trigger(f+"Progress."+f,[e])}),n.done(function(){m(),e.trigger(f+"Load."+f,[e]),b.call(a),b=c.noop}),e.data(g,n),d.visible)if(c.nite)c.nite.scroll(l,function(){n.loop()},{fps:25});else{var o=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};i.on("scroll."+l,o(function(){n.loop()},1e3))}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxBQUFNLG1CQXdDc0MsS0FBQSxBQUFLLFNBakJqRCxBQUFJLEFBQUMsQUFBSSxBQUNMLEdBQ0EsQUFBTyxBQUNWLEFBQ0QsQUFHQSxNQTlCTSxBQUFXLEFBQVMsQUFBUyxjQUFNLEFBRXJDLENBQUksR0FBQyxFQUFMLEFBQVksQUFDUixBQUVKLFlBQUksR0FBVSxFQUFBLEFBQU8sUUFBckIsQUFBNkIsQUFFN0IsQUFBTyxBQUNILElBQUEsQUFBSyxBQUNELE1BQUksRUFBQSxBQUFPLFFBQVgsQUFBbUIsT0FDZixFQUFVLEVBQUEsQUFBTyxRQUFqQixBQUF5QixBQUM3QixBQUNKLE1BQUEsQUFBSyxBQUNELE1BQUksRUFBQSxBQUFPLFFBQVgsQUFBbUIsUUFDZixFQUFVLEVBQUEsQUFBTyxRQVA3QixBQU9ZLEFBQXlCLEFBQzdCLEFBR1IsY0FBQSxBQUFRLEFBRVgsS0FwQkQsQUFzQkEsQUFDQSxFQUNJLEFBQVMsOENBQVQsQUFBd0QsQUFDeEQsYUFNQSxHQURKLEFBQ3VCLE9BQ25CLEVBQW1CLEVBRnZCLEFBRXdDLFVBQ3BDLEVBQVksRUFIaEIsQUFHaUMsS0FFN0IsRUFMSixBQUtnQixBQUFFLEtBQ2QsRUFOSixBQU1jLEFBQUUsS0FFWixFQUFBLEFBQVksVUFBVSxBQUVsQixPQUFPLEdBQUEsQUFBRSxLQUFPLEVBQUEsQUFBRSxLQUFYLEFBQVMsQUFBTyxhQUF3QixLQUEvQyxBQUFvQyxBQUFXLEFBQUssQUFBWSxBQUFPLEFBQVMsQUFFbkYsa0JBWkwsRUFjSSxFQUFBLEFBQWEsQUFBUyxXQUFRLEFBRTFCLElBQU0sR0FBTixBQUFZLEFBQUUsQUFFZCxLQUFBLEFBQUksQUFBYyxBQUVsQixRQUFJLEVBQUosQUFBTSxLQUNGLEVBQWMsRUFBQSxBQUFFLEtBQUYsQUFBTyxB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VyxTQXhyQlgsQUF3ckJxQiIsImZpbGUiOiJqcXVlcnkubml0ZS5wcmVsb2FkZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIEpRdWVyeSBIZWF2eSBSZXNvdXJjZXNMb2FkZXIgfCBEYW5pZWxlIEZpb3JvbmkgfCBkZmlvcm9uaTkxQGdtYWlsLmNvbSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsICQsIHVuZGVmaW5lZCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgY29uc3QgX2NvbnNvbGUgPSBmdW5jdGlvbihtZXNzYWdlLCBsZXZlbCl7XG5cbiAgICAgICAgaWYoICF3aW5kb3cuY29uc29sZSApXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgbGV0IGRpc3BsYXkgPSB3aW5kb3cuY29uc29sZS5sb2c7XG5cbiAgICAgICAgc3dpdGNoKGxldmVsKXtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiggd2luZG93LmNvbnNvbGUud2FybiApXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXkgPSB3aW5kb3cuY29uc29sZS53YXJuO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmKCB3aW5kb3cuY29uc29sZS5lcnJvciApXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXkgPSB3aW5kb3cuY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc3BsYXkobWVzc2FnZSk7XG5cbiAgICB9O1xuXG4gICAgLy8gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH5cbiAgICBpZiggISQgKSB7XG4gICAgICAgIF9jb25zb2xlKCdqUXVlcnkgaXMgbmVlZGVkIGZvciBuaXRlUHJlbG9hZGVyIHRvIHdvcmshJywgMik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+XG5cblxuICAgIGNvbnN0XG4gICAgICAgIG5hbWVzcGFjZV9wcmVmaXggPSAnbml0ZScsXG4gICAgICAgIG5hbWVzcGFjZV9tZXRob2QgPSBuYW1lc3BhY2VfcHJlZml4KydQcmVsb2FkJyxcbiAgICAgICAgbmFtZXNwYWNlID0gbmFtZXNwYWNlX3ByZWZpeCsnZXInLFxuXG4gICAgICAgICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpLFxuICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxuXG4gICAgICAgIHVuaXF1ZV9pZCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIHJldHVybiAkLm5pdGUgPyAkLm5pdGUudW5pcXVlSWQoKSA6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5OTk5IC0gMTAwMCkpICsgMTAwMDtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX3Zpc2libGUgPSBmdW5jdGlvbihlbGVtZW50KXtcblxuICAgICAgICAgICAgY29uc3QgJGVsID0gJChlbGVtZW50KTtcblxuICAgICAgICAgICAgbGV0IGluX3ZpZXdwb3J0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gJC5uaXRlLmluVmlld3BvcnQoZWxlbWVudCkucmF0aW87XG5cbiAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gISggcmVjdC5yaWdodCA8IDAgfHwgcmVjdC5ib3R0b20gPCAwIHx8IHJlY3QubGVmdCA+ICR3aW5kb3cud2lkdGgoKSB8fCByZWN0LnRvcCA+ICR3aW5kb3cuaGVpZ2h0KCkgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaW5fdmlld3BvcnQgJiYgJGVsLmlzKCc6dmlzaWJsZScpICYmICRlbC5jc3MoJ3Zpc2liaWxpdHknKSAhPT0gJ2hpZGRlbic7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpc19sb2FkZWQgPSBmdW5jdGlvbihlbGVtZW50KXtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihlbGVtZW50Lm5hdHVyYWxXaWR0aCkgPj0gMSAmJlxuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoZWxlbWVudC5uYXR1cmFsSGVpZ2h0KSA+PSAxXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB8fFxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVhZHlTdGF0ZSA+PSAyICYmXG4gICAgICAgICAgICAgICAgZWxlbWVudC52aWRlb1dpZHRoICE9PSAwICYmXG4gICAgICAgICAgICAgICAgZWxlbWVudC52aWRlb0hlaWdodCAhPT0gMFxuICAgICAgICAgICAgKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX2h0bWxfb2JqZWN0ID0gZnVuY3Rpb24oIG9iamVjdCApe1xuXG4gICAgICAgICAgICBpZiggdHlwZW9mIG9iamVjdCAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0Lm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvYmplY3Quc3R5bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmplY3Qub3duZXJEb2N1bWVudCA9PT0gJ29iamVjdCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGlzX2Zvcm1hdCA9IGZ1bmN0aW9uKCBpdGVtLCBleHBlY3RlZF9mb3JtYXQgKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBmb3JtYXRfZXh0ZW5zaW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UgOiAnanBbZV0/Z3xnaWZ8cG5nfHRpZltmXT98Ym1wJyxcbiAgICAgICAgICAgICAgICAgICAgYXVkaW8gOiAnbXAzfG9nZycsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvIDogJ21wNHxvZ3Z8b2dnfHdlYm0nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmb3JtYXRfbmFtZXMgPSBPYmplY3Qua2V5cyhmb3JtYXRfZXh0ZW5zaW9ucyksXG4gICAgICAgICAgICAgICAgYmFzZTY0X2hlYWRpbmcgPSAnXFw7YmFzZTY0XFwsJztcblxuICAgICAgICAgICAgbGV0IG91dHB1dCA9IHsgZm9ybWF0OiBudWxsLCBleHRlbnNpb246IG51bGwgfTtcblxuICAgICAgICAgICAgaWYoIHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyApIHtcblxuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnNwbGl0KCc/JylbMF07IC8vIGdldCByaWQgb2YgcXVlcnkgc3RyaW5nc1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLnNwbGl0KCcjJylbMF07IC8vIGdldCByaWQgb2YgaGFzaGVzXG5cbiAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gJycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGxldCBmb3JtYXRfcXVldWUgPSB1bmRlZmluZWQgIT09IGV4cGVjdGVkX2Zvcm1hdCA/IFsgZXhwZWN0ZWRfZm9ybWF0IF0gOiBmb3JtYXRfbmFtZXM7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gZm9ybWF0X3F1ZXVlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdF9xdWV1ZS5oYXNPd25Qcm9wZXJ0eSh4KSl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXcgUmVnRXhwKCcoXFwuKCcgKyBmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dICsgJykkKXwnICsgYmFzZTY0X2hlYWRpbmcsICdnJykudGVzdChpdGVtKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoYmFzZTY0X2hlYWRpbmcsICdnJykudGVzdChpdGVtKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVzNjQgPSBpdGVtLm1hdGNoKG5ldyBSZWdFeHAoJ15kYXRhOicgKyBmb3JtYXRfcXVldWVbeF0gKyAnXFwvKCcgKyBmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dICsgJyknLCAnZycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaGVzNjQgfHwgbnVsbCA9PT0gbWF0Y2hlczY0IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXM2NCA9IG1hdGNoZXM2NFswXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gbWF0Y2hlczY0LnJlcGxhY2UoJ2RhdGE6JyArIGZvcm1hdF9xdWV1ZVt4XSArICcvZycsICcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXMgPSBpdGVtLm1hdGNoKG5ldyBSZWdFeHAoZm9ybWF0X2V4dGVuc2lvbnNbZm9ybWF0X3F1ZXVlW3hdXSwgJ2cnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmZvcm1hdCA9IGZvcm1hdF9xdWV1ZVt4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5leHRlbnNpb24gPSBtYXRjaGVzWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoIGlzX2h0bWxfb2JqZWN0KGl0ZW0pICl7XG5cbiAgICAgICAgICAgICAgICBsZXQgdGFnX25hbWUgPSBpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiggJC5pbkFycmF5KHRhZ19uYW1lLCBmb3JtYXRfbmFtZXMpID4gLTEgKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gaXRlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiggdGFnX25hbWUgPT09ICdpbWcnIClcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmZvcm1hdCA9ICdpbWFnZSc7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICBcbiAgICAgICAgfTtcblxuICAgIGNsYXNzIFJlc291cmNlTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzICA9ICQuZXh0ZW5kKHRydWUsIHtcbiAgICAgICAgICAgICAgICBwbGF5dGhyb3VnaCAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzcmNzZXRBdHRyICAgOiAnZGF0YS1zcmNzZXQnLFxuICAgICAgICAgICAgICAgIHNyY0F0dHIgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICAgICAgdmlzaWJsZSAgICAgIDogZmFsc2VcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCAgICAgICAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgID0gbnVsbDtcblxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudCAgID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50ICA9ICQoKTtcblxuICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3MgICA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgICAgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayAgPSAkLm5vb3A7XG4gICAgICAgICAgICB0aGlzLl9kb25lICAgICAgPSBmdW5jdGlvbihlKXtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKnRlbXAqLywgc2VsZi5faWQsIHNlbGYuX2VsZW1lbnQuY3VycmVudFNyYyB8fCBzZWxmLl9lbGVtZW50LnNyYyk7XG5cbiAgICAgICAgICAgICAgICBpZiggc2VsZi5fcHJvY2VzcyApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJfZXZlbnQgPSBlLnR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnR5cGUuc2xpY2UoMSk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl8kZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXggKyB0cmlnZ2VyX2V2ZW50ICsgJy4nICsgbmFtZXNwYWNlX3ByZWZpeCwgWyBzZWxmLl8kZWxlbWVudCBdKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG5cbiAgICAgICAgc2V0IHJlc291cmNlKCBkYXRhICl7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgZWxlbWVudF9yZXNvdXJjZSA9IGlzX2h0bWxfb2JqZWN0KGRhdGEucmVzb3VyY2UpLFxuICAgICAgICAgICAgICAgIHN0cmluZ19yZXNvdXJjZSA9IHR5cGVvZiBkYXRhLnJlc291cmNlID09PSAnc3RyaW5nJztcblxuICAgICAgICAgICAgaWYoICFlbGVtZW50X3Jlc291cmNlICYmICFzdHJpbmdfcmVzb3VyY2UgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5faWQgPSBkYXRhLmlkO1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gaXNfZm9ybWF0KGRhdGEucmVzb3VyY2UpLmZvcm1hdDtcblxuICAgICAgICAgICAgaWYoIHN0cmluZ19yZXNvdXJjZSApe1xuXG4gICAgICAgICAgICAgICAgbGV0IGlzX2ltZyA9IHRoaXMuX2Zvcm1hdCA9PT0gJ2ltYWdlJztcblxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGlzX2ltZyA/ICdpbWcnIDogdGhpcy5fZm9ybWF0KTtcblxuICAgICAgICAgICAgICAgIGlmKCBpc19pbWcgKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyID0gJ2RhdGEtc3Jjc2V0JztcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zcmNBdHRyID0gJ2RhdGEtc3JjJztcblxuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc291cmNlID0gZGF0YS5yZXNvdXJjZTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggZWxlbWVudF9yZXNvdXJjZSApe1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRhdGEucmVzb3VyY2U7XG5cbiAgICAgICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MudmlzaWJsZSAmJiAhaXNfdmlzaWJsZSh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmKCBzdHJpbmdfcmVzb3VyY2UgKXtcblxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIucmVwbGFjZSgnZGF0YS0nLCAnJyksIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsIHRoaXMuX3Jlc291cmNlKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCAgPSB0aGlzLl8kZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzICAgPSB0aGlzLl9pZF9ldmVudCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgID0gdGhpcy5fcHJvY2VzcyA/IHRoaXMuX2lkX2V2ZW50IDogbmFtZXNwYWNlICsgJ191bmlxdWVfJyArIHVuaXF1ZV9pZCgpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvY2Vzcygpe1xuXG4gICAgICAgICAgICBpZiAoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApIHtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcHJvY2VzcylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2RvbmUobmV3IEV2ZW50KCQuaXNOdW1lcmljKHRoaXMuX2VsZW1lbnQubmF0dXJhbFdpZHRoKSA/IG5hbWVzcGFjZV9wcmVmaXgrJ0xvYWQnIDogbmFtZXNwYWNlX3ByZWZpeCsnRXJyb3InKSk7XG5cbiAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMuX2Zvcm1hdCA9PT0gJ2ltYWdlJyApIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnbG9hZC4nICsgdGhpcy5faWRfZXZlbnQgKyAnIGVycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgdGhpcy5fZG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICRwaWN0dXJlID0gdGhpcy5fJGVsZW1lbnQuY2xvc2VzdCgncGljdHVyZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gdGhpcy5fc2V0dGluZ3Muc3JjQXR0cixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY19jbGVhbiA9IHRoaXMuX3NldHRpbmdzLnNyY0F0dHIucmVwbGFjZSgnZGF0YS0nLCAnJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzZXQgPSB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Jjc2V0X2NsZWFuID0gdGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHBpY3R1cmUubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHBpY3R1cmUuZmluZCgnc291cmNlWycgKyBzcmNzZXQgKyAnXScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyY3NldCcsICRwaWN0dXJlLmRhdGEoc3Jjc2V0X2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNzZXRfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3Jjc2V0KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3Jjc2V0ICsgJ10nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Jjc2V0JywgdGhpcy5fJGVsZW1lbnQuZGF0YShzcmNzZXRfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNzZXRfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBzcmMgKyAnXScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCB0aGlzLl8kZWxlbWVudC5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMuX2Zvcm1hdCA9PT0gJ3ZpZGVvJyB8fCB0aGlzLl9mb3JtYXQgPT09ICdhdWRpbycgKXtcblxuICAgICAgICAgICAgICAgICAgICAvLyB0b2RvXG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9wcm9jZXNzIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZGF0YShuYW1lc3BhY2UsIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHRoaXMuX2VsZW1lbnQuY3VycmVudFNyYyB8fCB0aGlzLl9lbGVtZW50LnNyYztcblxuICAgICAgICB9XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgaWYoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyY3NldCcpLFxuICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiggdW5kZWZpbmVkICE9PSBzcmMgKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHNyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3JjJykucmVtb3ZlQXR0cignc3Jjc2V0Jyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyY3NldCApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciwgc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZG9uZShjYWxsYmFjayl7XG5cbiAgICAgICAgICAgIGlmKCAhJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgUmVzb3VyY2VzTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2xvYWRlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXMgPSBbIG5ldyBSZXNvdXJjZUxvYWRlcih0aGlzLl9zZXR0aW5ncykgXTtcblxuICAgICAgICAgICAgaWYgKCQuaXNBcnJheShjb2xsZWN0aW9uKSAmJiAoIHR5cGVvZiBjb2xsZWN0aW9uWzBdID09PSAnc3RyaW5nJyB8fCBpc19odG1sX29iamVjdChjb2xsZWN0aW9uWzBdKSApKVxuICAgICAgICAgICAgICAgIGZvciAoIGNvbnN0IHJlc291cmNlIGluIGNvbGxlY3Rpb24gKVxuICAgICAgICAgICAgICAgICAgICBpZiggY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbi5wdXNoKHsgaWQgOiB1bmlxdWVfaWQoKSwgcmVzb3VyY2UgOiBjb2xsZWN0aW9uW3Jlc291cmNlXSB9KTtcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbGxlY3Rpb24gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb24pIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb24gfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHNlcXVlbnRpYWw6IGZhbHNlXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSAkLm5vb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzID0gJC5ub29wKCk7XG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9sb2FkZWQgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLl9sb29wID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmICggIXRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYoIHRydWUgPT09IHRoaXMuX2NvbXBsZXRlICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2suY2FsbChudWxsIC8qIHRvZG8gY29udGV4dCAqLyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Fib3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kbyB0aGlzLl9zZXR0aW5ncy5zZXF1ZW50aWFsIC0tPiBtdXN0IGJlIGNhbGxlZCBpbiB0aGUgZm9sbG93aW5nIC5kb25lKCkgY2FsbCBhbmQgdGFraW5nIGFjY291bnQgb2YgdmlzaWJpbGl0eSBjaGVjayBpbiBSZXNvdXJjZUxvYWRlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkX2luc3RhbmNlID0gbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcy5wdXNoKGxvYWRfaW5zdGFuY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucmVzb3VyY2UgPSB0aGlzLl9jb2xsZWN0aW9uW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UuZG9uZShmdW5jdGlvbihpZCwgcmVzb3VyY2Upe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJC5pbkFycmF5KGlkLCBzZWxmLl9jb2xsZWN0aW9uX2xvYWRlZCkgPT09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2xvYWRlZC5wdXNoKGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGVyY2VudGFnZSA9IHNlbGYuX2xvYWRlZCAvIHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoICogMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvZ3Jlc3MuY2FsbChudWxsIC8qIHRvZG8gKi8sIHJlc291cmNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYuX2xvYWRlZCA+IHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoIHx8IHNlbGYuX2Fib3J0IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzZWxmLl9sb2FkZWQgPT09IHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2suY2FsbChudWxsIC8qIHRvZG8gKi8pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuX2xvb3AoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgbG9vcCgpe1xuXG4gICAgICAgICAgICB0aGlzLl9sb29wKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvZ3Jlc3MoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKHJlc291cmNlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgZm9yKCBjb25zdCBpbnN0YW5jZSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGluc3RhbmNlIF0uYWJvcnQoKTtcblxuICAgICAgICAgICAgaWYoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIGNsYXNzIENvbGxlY3Rpb25Qb3B1bGF0b3Ige1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgY29sbGVjdCggLypvdXRwdXQqLyApIHsgLy8gdG9kbyBvdXRwdXQgdHlwZXMgZXM6IG9ubHkgZWxlbWVudHMsIG9ubHksIHVybHMsIG1peGVkLCBhbGwgLi4uIGR1bm5vXG5cbiAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgdGFyZ2V0cyA9ICdpbWcsIHZpZGVvLCBhdWRpbycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c19leHRlbmRlZCA9IHRhcmdldHMgKyAnLCBwaWN0dXJlLCBzb3VyY2UnO1xuXG4gICAgICAgICAgICBsZXQgJHRhcmdldHMgPSB0aGlzLl8kZWxlbWVudC5maW5kKHRhcmdldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHMpKVxuICAgICAgICAgICAgICAgICR0YXJnZXRzLmFkZCh0aGlzLl8kZWxlbWVudCk7XG4gICAgICAgICAgICAkdGFyZ2V0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuX3NldHRpbmdzLmJhY2tncm91bmRzKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50LmZpbmQoJyonKS5hZGRCYWNrKCkubm90KHRhcmdldHNfZXh0ZW5kZWQpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpICE9PSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpLnJlcGxhY2UoL3VybFxcKFwifHVybFxcKCd8dXJsXFwofCgoXCInKVxcKSQpL2lnbSwgJycpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBpbiB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCdbJyArIGF0dHIgKyAnXTpub3QoJyArIHRhcmdldHNfZXh0ZW5kZWQgKyAnKScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmF0dHIoYXR0cikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBhdHRyICsgJ10nKSAmJiAhdGhpcy5fJGVsZW1lbnQuaXModGFyZ2V0c19leHRlbmRlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMuXyRlbGVtZW50LmF0dHIoYXR0cikpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRbbmFtZXNwYWNlX21ldGhvZF0gPSBSZXNvdXJjZXNMb2FkZXI7XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlXG5cbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoICEkLmlzQXJyYXkoc2V0dGluZ3MuYXR0cmlidXRlcykgKVxuICAgICAgICAgICAgc2V0dGluZ3MuYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBpZiggdHlwZW9mIHNldHRpbmdzLmF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBzZXR0aW5ncy5hdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLFxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb25Qb3B1bGF0b3IoJGVsZW1lbnQsIHNldHRpbmdzKS5jb2xsZWN0KCksXG4gICAgICAgICAgICAgICAgZXZlbnRfbmFtZXNwYWNlID0gbmFtZXNwYWNlICsgJ18nICsgdW5pcXVlX2lkKCksXG4gICAgICAgICAgICAgICAgY2xlYXIgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoJ3Njcm9sbC4nICsgZXZlbnRfbmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5vZmYoJ3Njcm9sbC4nK2V2ZW50X25hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQucmVtb3ZlRGF0YShuYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGxvYWRfaW5zdGFuY2UgPSAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IGxvYWRfaW5zdGFuY2UgKSB7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgICAgICBjbGVhcigpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VzTG9hZGVyKGNvbGxlY3Rpb24sIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5wcm9ncmVzcyhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ1Byb2dyZXNzLicrbmFtZXNwYWNlX3ByZWZpeCwgWyRlbGVtZW50XSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgY2xlYXIoKTtcblxuICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIobmFtZXNwYWNlX3ByZWZpeCsnTG9hZC4nK25hbWVzcGFjZV9wcmVmaXgsIFskZWxlbWVudF0pO1xuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9ICQubm9vcDtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRlbGVtZW50LmRhdGEobmFtZXNwYWNlLCBsb2FkX2luc3RhbmNlKTtcblxuICAgICAgICAgICAgaWYoIHNldHRpbmdzLnZpc2libGUgKXtcblxuICAgICAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgICAgICAkLm5pdGUuc2Nyb2xsKGV2ZW50X25hbWVzcGFjZSwgZnVuY3Rpb24oKXsgbG9hZF9pbnN0YW5jZS5sb29wKCk7IH0sIHsgZnBzIDogMjUgfSk7XG5cbiAgICAgICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRocm90dGxlX3Njcm9sbF9ldmVudCA9IGZ1bmN0aW9uKGZuLCB3YWl0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGltZSArIHdhaXQgLSBEYXRlLm5vdygpKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5vbignc2Nyb2xsLicrZXZlbnRfbmFtZXNwYWNlLCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQoZnVuY3Rpb24oKXsgbG9hZF9pbnN0YW5jZS5sb29wKCk7IH0sIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxufSkod2luZG93LCBkb2N1bWVudCwgalF1ZXJ5KTsiXX0=
