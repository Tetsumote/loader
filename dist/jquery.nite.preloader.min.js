"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor,f="nite",e=f+"Preload",g=e+"er";if(!c)return function(b,c){if(a.console){var d=a.console.log;1===c?a.console.warn&&(d=a.console.warn):2===c?a.console.error&&(d=a.console.error):void 0,d(b)}}("jQuery is needed for "+g+" to work!",2),void 0;var h=c(b),i=c(a),j=function(){return c.nite?c.nite.uniqueId():d(Math.random()*8999)+1e3},k=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>i.width()||e.top>i.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},l=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},m=function(a){return l(a)&&(a.complete&&1<=d(a.naturalWidth)&&1<=d(a.naturalHeight)||2<=a.readyState&&0!==a.videoWidth&&0!==a.videoHeight)},n=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(l(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},o=function(){function d(a){_classCallCheck(this,d);var b=this;this._settings=c.extend(!0,{playthrough:!1,srcsetAttr:"data-srcset",srcAttr:"data-src",visible:!1},a),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._process=!1,this._format=null,this._callback=c.noop,this._done=function(a){if(!b._process){var c=a.type.charAt(0).toUpperCase()+a.type.slice(1);b._$element.trigger(f+c+"."+f,[b._$element])}b._callback.call(null,b._id,b._element.currentSrc||b._element.src)}}return _createClass(d,[{key:"process",value:function(){if(!this._settings.visible||k(this._element)){var b=this,d=this._settings.srcAttr,e=this._settings.srcAttr.replace("data-","");if(m(this._element))this._process||this._$element.off("."+this._id_event),this._done(new Event(c.isNumeric(this._element.naturalWidth)?f+"Load":f+"Error"));else{if("image"===this._format){this._$element[this._process?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var h=this._$element.closest("picture"),i=this._settings.srcsetAttr,j=this._settings.srcsetAttr.replace("data-","");h.length&&"HTMLPictureElement"in a?(this._$element.removeData(j).removeAttr(i).removeData(e).removeAttr(d),h.find("source["+i+"]").attr("srcset",h.data(j)).removeData(j).removeAttr(i)):(this._$element.is("["+i+"]")&&this._$element.attr("srcset",this._$element.data(j)).removeData(j).removeAttr(i),this._$element.is("["+d+"]")&&this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d))}if("video"===this._format||"audio"===this._format){var l=this._$element.find("source"),n=!1;l.length?l.each(function(){c(this).is("["+d+"]")&&(c(this).attr("src",c(this).data(e)).removeData(e).removeAttr(d),n=!0)})[this._process?"on":"one"]("error."+this._id_event,function(a){var d=g+"_error";c(this).data(d,!0),l.length===l.filter(function(){return!0===c(this).data(d)}).length&&b._done(a)}):this._$element.is("["+d+"]")&&(this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d)[this._process?"on":"one"]("error."+this._id_event,b._done),n=!0),n&&this._element.load(),this._$element[this._process?"on":"one"]("loadedmetadata."+this._id_event,function(){!0!==b._settings.playthrough&&"force"!==b._settings.playthrough&&b._done(new Event("load"))})[this._process?"on":"one"]("progress."+b._id_event,function(){if("force"===b._settings.playthrough){var a=this;setTimeout(function(){var d=Math.round;return 0<a.readyState&&!a.duration?void b._done(new Event("error")):void(!b._process&&(!a.paused&&a.pause(),a.currentTime+=2),a.buffered.length&&1==d(a.buffered.end(0))/d(a.seekable.end(0))&&(a.currentTime=0,!b._process&&c(a).is("[autoplay]")&&a.play(),b._done(new Event("load"))))},25)}})[this._process?"on":"one"]("canplaythrough."+this._id_event,function(){!0===b._settings.playthrough&&b._done(new Event("load"))})}this._process||this._$element.data(g,this._id_event)}this._resource=this._element.currentSrc||this._element.src}}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!m(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c){a.call(b,c)}}}},{key:"resource",set:function(a){var d=l(a.resource),e="string"==typeof a.resource;if(d||e){if(this._id=a.id,this._format=n(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}d&&(this._element=a.resource),this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._process=void 0!==this._id_event,this._id_event=this._process?this._id_event:g+"_unique_"+j()}}}]),d}(),p=function(){function a(b,d){if(_classCallCheck(this,a),this._collection=[],this._collection_loaded=[],this._collection_instances=[new o(this._settings)],c.isArray(b)&&("string"==typeof b[0]||l(b[0])))for(var e in b)b.hasOwnProperty(e)&&this._collection.push({id:j(),resource:b[e]});("string"==typeof b||l(b))&&this._collection.push({id:j(),resource:b}),this._settings=c.extend(!0,{sequential:!1},d),this.percentage=0,this._callback=c.noop(),this._progress=c.noop(),this._abort=!1,this._complete=!1,this._loaded=0,this.loop()}return _createClass(a,[{key:"loop",value:function(){var a=this;if(this._collection.length){if(!0===this._complete)return void a._callback.call(null);for(var b,d=0;d<this._collection.length&&!this._abort;d++)b=new o(this._settings),this._collection_instances.push(b),b.resource=this._collection[d],b.process(),b.done(function(b,d){-1===c.inArray(b,a._collection_loaded)&&(a._loaded++,a._collection_loaded.push(b),a.percentage=100*(a._loaded/a._collection.length),a._progress.call(null,d)),a._loaded>a._collection.length||a._abort||a._loaded===a._collection.length&&(a._callback.call(null),a._complete=!0)})}}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(){a.call(b)};return this._collection.length?this._callback=d:d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?this._progress=d:d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].abort();this._collection.length&&(this._abort=!0)}}]),a}(),q=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b="img, video, audio",d=b+", picture, source",e=this._$element.find(b);if(this._$element.is(b)&&e.add(this._$element),e.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(d).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var f=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+d+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(d)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)f(a)}return a}}]),a}();c[e]=p,c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=!1,e=this,k=c(e),l=new q(k,d).collect(),m=g+"_"+j(),n=function(){c.nite?h.off("scroll."+m):i.off("scroll."+m),k.removeData(g),a=!0},o=k.data(g);if(void 0!==o&&(o.abort(),n()),o=new p(l,d),o.progress(function(){k.trigger(f+"Progress."+f,[k])}),o.done(function(){a||(n(),k.trigger(f+"Load."+f,[k]),b.call(e),b=c.noop)}),k.data(g,o),d.visible)if(c.nite)c.nite.scroll(m,function(){o.loop()},{fps:25});else{var r=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};i.on("scroll."+m,r(function(){o.loop()},1e3))}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxtQkF5QzRDLEtBQUEsQUFBSyxNQXhDN0MsRUFESixBQUN1QixPQUNuQixFQUFtQixFQUZ2QixBQUV3QyxVQUNwQyxFQUFZLEVBSGhCLEFBR2lDLEFBQzdCLFFBdUJKLEFBQUksQUFBQyxBQUFJLEFBQ0wsR0FDQSxBQUFPLEFBQ1YsQUFDRCxBQUdBLE1BOUJJLEFBQVcsQUFBUyxBQUFTLGNBQU0sQUFFL0IsQ0FBSSxHQUFDLEVBQUwsQUFBWSxBQUNSLEFBRUosWUFBSSxHQUFVLEVBQUEsQUFBTyxRQUFyQixBQUE2QixBQUU3QixBQUFPLEFBQ0gsSUFBQSxBQUFLLEFBQ0QsTUFBSSxFQUFBLEFBQU8sUUFBWCxBQUFtQixPQUNmLEVBQVUsRUFBQSxBQUFPLFFBQWpCLEFBQXlCLEFBQzdCLEFBQ0osTUFBQSxBQUFLLEFBQ0QsTUFBSSxFQUFBLEFBQU8sUUFBWCxBQUFtQixRQUNmLEVBQVUsRUFBQSxBQUFPLFFBUDdCLEFBT1ksQUFBeUIsQUFDN0IsQUFHUixjQUFBLEFBQVEsQUFFWCxLQXhCTCxBQTBCQSxBQUNBLEVBQ2EsQUFBd0IsMEJBQWpDLEFBQTJDLFlBQTNDLEFBQXdELEFBQ3hELGFBT0EsR0FGSixBQUVnQixBQUFFLEtBQ2QsRUFISixBQUdjLEFBQUUsS0FFWixFQUFBLEFBQVksVUFBVSxBQUVsQixPQUFPLEdBQUEsQUFBRSxLQUFPLEVBQUEsQUFBRSxLQUFYLEFBQVMsQUFBTyxhQUF3QixLQUEvQyxBQUFvQyxBQUFXLEFBQUssQUFBWSxBQUFPLEFBQVMsQUFFbkYsa0JBVEwsRUFXSSxFQUFBLEFBQWEsQUFBUyxXQUFRLEFBRTFCLElBQU0sR0FBTixBQUFZLEFBQUUsQUFFZCxLQUFBLEFBQUksQUFBYyxBQUVsQixRQUFJLEVBQUosQUFBTSxLQUNGLEVBQWMsRUFBQSxB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QSxBQUF3QixBQUFTLEFBQUksYUFBTSxBQUU3QyxJQUFJLEdBQU8sS0FBWCxBQUFXLEFBQUssQUFFaEIsWUFBTyxXQUFXLEFBQ2QsQ0FBQSxBQUFpQyxBQUFHLEFBQ2hDLENBREMsQUFBTyxLQUFPLEtBQWYsQUFBZSxBQUFLLFFBRXBCLE1BQU8sS0FBUCxBQUFPLEFBQUssQUFDZixBQUNKLE1BTEQsQUFPSCxDQVhELEFBYUEsSUFBQSxBQUFRLEdBQVIsQUFBVyxBQUFVLFlBQWlCLEVBQXNCLFVBQVUsQUFBRSxHQUFBLEFBQWMsQUFBUyxNQUEvRixBQUFzQyxBQUEyRCxBQUVwRyxPQUVKLEFBRUosQ0FsRkQsQUFBTyxBQW9GVixFQWxIRCxBQW9ISCxDQW55QkQsR0FBQSxBQW15QkcsT0FueUJILEFBbXlCVyxTQW55QlgsQUFteUJxQiIsImZpbGUiOiJqcXVlcnkubml0ZS5wcmVsb2FkZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIEpRdWVyeSBIZWF2eSBSZXNvdXJjZXNMb2FkZXIgfCBEYW5pZWxlIEZpb3JvbmkgfCBkZmlvcm9uaTkxQGdtYWlsLmNvbSAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jdW1lbnQsICQsIHVuZGVmaW5lZCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgY29uc3RcbiAgICAgICAgbmFtZXNwYWNlX3ByZWZpeCA9ICduaXRlJyxcbiAgICAgICAgbmFtZXNwYWNlX21ldGhvZCA9IG5hbWVzcGFjZV9wcmVmaXgrJ1ByZWxvYWQnLFxuICAgICAgICBuYW1lc3BhY2UgPSBuYW1lc3BhY2VfbWV0aG9kKydlcicsXG4gICAgICAgIF9jb25zb2xlID0gZnVuY3Rpb24obWVzc2FnZSwgbGV2ZWwpe1xuXG4gICAgICAgICAgICBpZiggIXdpbmRvdy5jb25zb2xlIClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIGxldCBkaXNwbGF5ID0gd2luZG93LmNvbnNvbGUubG9nO1xuXG4gICAgICAgICAgICBzd2l0Y2gobGV2ZWwpe1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYoIHdpbmRvdy5jb25zb2xlLndhcm4gKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheSA9IHdpbmRvdy5jb25zb2xlLndhcm47XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYoIHdpbmRvdy5jb25zb2xlLmVycm9yIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXkgPSB3aW5kb3cuY29uc29sZS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRpc3BsYXkobWVzc2FnZSk7XG5cbiAgICAgICAgfTtcblxuICAgIC8vIH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+XG4gICAgaWYoICEkICkge1xuICAgICAgICBfY29uc29sZSgnalF1ZXJ5IGlzIG5lZWRlZCBmb3IgJytuYW1lc3BhY2UrJyB0byB3b3JrIScsIDIpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyB+IH4gfiB+IH4gfiB+IH4gfiB+IH4gflxuXG5cbiAgICBjb25zdFxuXG4gICAgICAgICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpLFxuICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxuXG4gICAgICAgIHVuaXF1ZV9pZCA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIHJldHVybiAkLm5pdGUgPyAkLm5pdGUudW5pcXVlSWQoKSA6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5OTk5IC0gMTAwMCkpICsgMTAwMDtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX3Zpc2libGUgPSBmdW5jdGlvbihlbGVtZW50KXtcblxuICAgICAgICAgICAgY29uc3QgJGVsID0gJChlbGVtZW50KTtcblxuICAgICAgICAgICAgbGV0IGluX3ZpZXdwb3J0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmKCAkLm5pdGUgKVxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gJC5uaXRlLmluVmlld3BvcnQoZWxlbWVudCkucmF0aW87XG5cbiAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIGluX3ZpZXdwb3J0ID0gISggcmVjdC5yaWdodCA8IDAgfHwgcmVjdC5ib3R0b20gPCAwIHx8IHJlY3QubGVmdCA+ICR3aW5kb3cud2lkdGgoKSB8fCByZWN0LnRvcCA+ICR3aW5kb3cuaGVpZ2h0KCkgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaW5fdmlld3BvcnQgJiYgJGVsLmlzKCc6dmlzaWJsZScpICYmICRlbC5jc3MoJ3Zpc2liaWxpdHknKSAhPT0gJ2hpZGRlbic7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpc19odG1sX29iamVjdCA9IGZ1bmN0aW9uKCBvYmplY3QgKXtcblxuICAgICAgICAgICAgaWYoIHR5cGVvZiBvYmplY3QgIT09ICdvYmplY3QnIClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2goZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2Ygb2JqZWN0LnN0eWxlID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqZWN0Lm93bmVyRG9jdW1lbnQgPT09ICdvYmplY3QnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfbG9hZGVkID0gZnVuY3Rpb24oZWxlbWVudCl7XG5cbiAgICAgICAgICAgIHJldHVybiBpc19odG1sX29iamVjdChlbGVtZW50KSAmJiAoXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoZWxlbWVudC5uYXR1cmFsV2lkdGgpID49IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihlbGVtZW50Lm5hdHVyYWxIZWlnaHQpID49IDFcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfHxcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVhZHlTdGF0ZSA+PSAyICYmXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmlkZW9XaWR0aCAhPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZpZGVvSGVpZ2h0ICE9PSAwXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgaXNfZm9ybWF0ID0gZnVuY3Rpb24oIGl0ZW0sIGV4cGVjdGVkX2Zvcm1hdCApe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGZvcm1hdF9leHRlbnNpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZSA6ICdqcFtlXT9nfGdpZnxwbmd8dGlmW2ZdP3xibXAnLFxuICAgICAgICAgICAgICAgICAgICBhdWRpbyA6ICdtcDN8b2dnJyxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gOiAnbXA0fG9ndnxvZ2d8d2VibSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvcm1hdF9uYW1lcyA9IE9iamVjdC5rZXlzKGZvcm1hdF9leHRlbnNpb25zKSxcbiAgICAgICAgICAgICAgICBiYXNlNjRfaGVhZGluZyA9ICdcXDtiYXNlNjRcXCwnO1xuXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0geyBmb3JtYXQ6IG51bGwsIGV4dGVuc2lvbjogbnVsbCB9O1xuXG4gICAgICAgICAgICBpZiggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJz8nKVswXTsgLy8gZ2V0IHJpZCBvZiBxdWVyeSBzdHJpbmdzXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJyMnKVswXTsgLy8gZ2V0IHJpZCBvZiBoYXNoZXNcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAnJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdF9xdWV1ZSA9IHVuZGVmaW5lZCAhPT0gZXhwZWN0ZWRfZm9ybWF0ID8gWyBleHBlY3RlZF9mb3JtYXQgXSA6IGZvcm1hdF9uYW1lcztcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeCBpbiBmb3JtYXRfcXVldWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0X3F1ZXVlLmhhc093blByb3BlcnR5KHgpKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhcXC4oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKSQpfCcgKyBiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXM2NCA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cCgnXmRhdGE6JyArIGZvcm1hdF9xdWV1ZVt4XSArICdcXC8oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKScsICdnJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoZXM2NCB8fCBudWxsID09PSBtYXRjaGVzNjQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczY0ID0gbWF0Y2hlczY0WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBtYXRjaGVzNjQucmVwbGFjZSgnZGF0YTonICsgZm9ybWF0X3F1ZXVlW3hdICsgJy9nJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cChmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dLCAnZycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gZm9ybWF0X3F1ZXVlW3hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmV4dGVuc2lvbiA9IG1hdGNoZXNbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggaXNfaHRtbF9vYmplY3QoaXRlbSkgKXtcblxuICAgICAgICAgICAgICAgIGxldCB0YWdfbmFtZSA9IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkLmluQXJyYXkodGFnX25hbWUsIGZvcm1hdF9uYW1lcykgPiAtMSApXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0YWdfbmFtZSA9PT0gJ2ltZycgKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gJ2ltYWdlJztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIFxuICAgICAgICB9O1xuXG4gICAgY2xhc3MgUmVzb3VyY2VMb2FkZXIge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHBsYXl0aHJvdWdoICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNyY3NldEF0dHIgICA6ICdkYXRhLXNyY3NldCcsXG4gICAgICAgICAgICAgICAgc3JjQXR0ciAgICAgIDogJ2RhdGEtc3JjJyxcbiAgICAgICAgICAgICAgICB2aXNpYmxlICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuX2lkICAgICAgICA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCAgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ICAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgID0gJCgpO1xuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcHJvY2VzcyAgID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCAgICA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrICA9ICQubm9vcDtcbiAgICAgICAgICAgIHRoaXMuX2RvbmUgICAgICA9IGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgICAgICAgICAgaWYoICFzZWxmLl9wcm9jZXNzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJfZXZlbnQgPSBlLnR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnR5cGUuc2xpY2UoMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fJGVsZW1lbnQudHJpZ2dlcihuYW1lc3BhY2VfcHJlZml4ICsgdHJpZ2dlcl9ldmVudCArICcuJyArIG5hbWVzcGFjZV9wcmVmaXgsIFtzZWxmLl8kZWxlbWVudF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8sIHNlbGYuX2lkLCBzZWxmLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgc2VsZi5fZWxlbWVudC5zcmMpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICBzZXQgcmVzb3VyY2UoIGRhdGEgKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBlbGVtZW50X3Jlc291cmNlID0gaXNfaHRtbF9vYmplY3QoZGF0YS5yZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgc3RyaW5nX3Jlc291cmNlID0gdHlwZW9mIGRhdGEucmVzb3VyY2UgPT09ICdzdHJpbmcnO1xuXG4gICAgICAgICAgICBpZiggIWVsZW1lbnRfcmVzb3VyY2UgJiYgIXN0cmluZ19yZXNvdXJjZSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBpc19mb3JtYXQoZGF0YS5yZXNvdXJjZSkuZm9ybWF0O1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNfaW1nID0gdGhpcy5fZm9ybWF0ID09PSAnaW1hZ2UnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXNfaW1nID8gJ2ltZycgOiB0aGlzLl9mb3JtYXQpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGlzX2ltZyApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIgPSAnZGF0YS1zcmNzZXQnO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY0F0dHIgPSAnZGF0YS1zcmMnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgPSBkYXRhLnJlc291cmNlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBlbGVtZW50X3Jlc291cmNlIClcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZGF0YS5yZXNvdXJjZTtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKSwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCB0aGlzLl9yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgPSB0aGlzLl8kZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzICA9IHRoaXMuX2lkX2V2ZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCA9IHRoaXMuX3Byb2Nlc3MgPyB0aGlzLl9pZF9ldmVudCA6IG5hbWVzcGFjZSArICdfdW5pcXVlXycgKyB1bmlxdWVfaWQoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvY2Vzcygpe1xuXG4gICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MudmlzaWJsZSAmJiAhaXNfdmlzaWJsZSh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsXG4gICAgICAgICAgICAgICAgc3JjX2NsZWFuID0gdGhpcy5fc2V0dGluZ3Muc3JjQXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcblxuICAgICAgICAgICAgaWYgKCBpc19sb2FkZWQodGhpcy5fZWxlbWVudCkgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3Byb2Nlc3MpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50Lm9mZignLicgKyB0aGlzLl9pZF9ldmVudCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9kb25lKG5ldyBFdmVudCgkLmlzTnVtZXJpYyh0aGlzLl9lbGVtZW50Lm5hdHVyYWxXaWR0aCkgPyBuYW1lc3BhY2VfcHJlZml4KydMb2FkJyA6IG5hbWVzcGFjZV9wcmVmaXgrJ0Vycm9yJykpO1xuXG4gICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICdpbWFnZScgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2xvYWQuJyArIHRoaXMuX2lkX2V2ZW50ICsgJyBlcnJvci4nICsgdGhpcy5faWRfZXZlbnQsIHRoaXMuX2RvbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGljdHVyZSA9IHRoaXMuXyRlbGVtZW50LmNsb3Nlc3QoJ3BpY3R1cmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzZXRfY2xlYW4gPSB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkcGljdHVyZS5sZW5ndGggJiYgJ0hUTUxQaWN0dXJlRWxlbWVudCcgaW4gd2luZG93ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY3NldF9jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRwaWN0dXJlLmZpbmQoJ3NvdXJjZVsnICsgc3Jjc2V0ICsgJ10nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmNzZXQnLCAkcGljdHVyZS5kYXRhKHNyY3NldF9jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyY3NldCArICddJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyY3NldCcsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3Jjc2V0X2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgdGhpcy5fJGVsZW1lbnQuZGF0YShzcmNfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICd2aWRlbycgfHwgdGhpcy5fZm9ybWF0ID09PSAnYXVkaW8nICl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJHNvdXJjZXMgPSB0aGlzLl8kZWxlbWVudC5maW5kKCdzb3VyY2UnKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbF9tZWRpYV9sb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICRzb3VyY2VzLmxlbmd0aCApe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkc291cmNlcy5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmlzKCdbJyArIHNyYyArICddJykgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsICQodGhpcykuZGF0YShzcmNfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsX21lZGlhX2xvYWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX3Byb2Nlc3MgPyAnb24nIDogJ29uZSddKCdlcnJvci4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlc19lcnJvcl9pZCA9IG5hbWVzcGFjZSsnX2Vycm9yJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YShzb3VyY2VzX2Vycm9yX2lkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkc291cmNlcy5sZW5ndGggPT09ICRzb3VyY2VzLmZpbHRlcihmdW5jdGlvbigpeyByZXR1cm4gdHJ1ZSA9PT0gJCh0aGlzKS5kYXRhKHNvdXJjZXNfZXJyb3JfaWQpOyB9KS5sZW5ndGggKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKGUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyYyArICddJykpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCB0aGlzLl8kZWxlbWVudC5kYXRhKHNyY19jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoc3JjKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2Vycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgc2VsZi5fZG9uZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsX21lZGlhX2xvYWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjYWxsX21lZGlhX2xvYWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5sb2FkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnbG9hZGVkbWV0YWRhdGEuJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSAhPT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggJiYgJ2ZvcmNlJyAhPT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX3Byb2Nlc3MgPyAnb24nIDogJ29uZSddKCdwcm9ncmVzcy4nICsgc2VsZi5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ2ZvcmNlJyA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZWRpYSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZWRpYS5yZWFkeVN0YXRlID4gMCAmJiAhbWVkaWEuZHVyYXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdlcnJvcicpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuX3Byb2Nlc3MpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVkaWEucGF1c2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYS5wYXVzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuY3VycmVudFRpbWUgKz0gMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWEuYnVmZmVyZWQubGVuZ3RoICYmIE1hdGgucm91bmQobWVkaWEuYnVmZmVyZWQuZW5kKDApKSAvIE1hdGgucm91bmQobWVkaWEuc2Vla2FibGUuZW5kKDApKSA9PT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWEuY3VycmVudFRpbWUgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wcm9jZXNzICYmICQobWVkaWEpLmlzKCdbYXV0b3BsYXldJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhLnBsYXkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMuX3Byb2Nlc3MgPyAnb24nIDogJ29uZSddKCdjYW5wbGF5dGhyb3VnaC4nICsgdGhpcy5faWRfZXZlbnQsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggdHJ1ZSA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2ggKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kb25lKG5ldyBFdmVudCgnbG9hZCcpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9wcm9jZXNzIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZGF0YShuYW1lc3BhY2UsIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHRoaXMuX2VsZW1lbnQuY3VycmVudFNyYyB8fCB0aGlzLl9lbGVtZW50LnNyYztcblxuICAgICAgICB9XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgaWYoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyY3NldCcpLFxuICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiggdW5kZWZpbmVkICE9PSBzcmMgKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHNyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3JjJykucmVtb3ZlQXR0cignc3Jjc2V0Jyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyY3NldCApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciwgc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZG9uZShjYWxsYmFjayl7XG5cbiAgICAgICAgICAgIGlmKCAhJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgUmVzb3VyY2VzTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25fbG9hZGVkID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyA9IFsgbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKSBdO1xuXG4gICAgICAgICAgICBpZiAoJC5pc0FycmF5KGNvbGxlY3Rpb24pICYmICggdHlwZW9mIGNvbGxlY3Rpb25bMF0gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb25bMF0pICkpXG4gICAgICAgICAgICAgICAgZm9yICggY29uc3QgcmVzb3VyY2UgaW4gY29sbGVjdGlvbiApXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjb2xsZWN0aW9uLmhhc093blByb3BlcnR5KHJlc291cmNlKSApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb25bcmVzb3VyY2VdIH0pO1xuICAgICAgICAgICAgaWYgKCB0eXBlb2YgY29sbGVjdGlvbiA9PT0gJ3N0cmluZycgfHwgaXNfaHRtbF9vYmplY3QoY29sbGVjdGlvbikgKVxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb24ucHVzaCh7IGlkIDogdW5pcXVlX2lkKCksIHJlc291cmNlIDogY29sbGVjdGlvbiB9KTtcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7XG4gICAgICAgICAgICAgICAgc2VxdWVudGlhbDogZmFsc2VcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9ICQubm9vcCgpO1xuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSAkLm5vb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX2Fib3J0ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2xvYWRlZCA9IDA7XG5cbiAgICAgICAgICAgIHRoaXMubG9vcCgpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBsb29wKCl7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiggdHJ1ZSA9PT0gdGhpcy5fY29tcGxldGUgKXtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Fib3J0KVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIC8vIHRvZG8gdGhpcy5fc2V0dGluZ3Muc2VxdWVudGlhbCAtLT4gbXVzdCBiZSBjYWxsZWQgaW4gdGhlIGZvbGxvd2luZyAuZG9uZSgpIGNhbGwgYW5kIHRha2luZyBhY2NvdW50IG9mIHZpc2liaWxpdHkgY2hlY2sgaW4gUmVzb3VyY2VMb2FkZXIoKTtcblxuICAgICAgICAgICAgICAgIGxldCBsb2FkX2luc3RhbmNlID0gbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbGxlY3Rpb25faW5zdGFuY2VzLnB1c2gobG9hZF9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLnJlc291cmNlID0gdGhpcy5fY29sbGVjdGlvbltpXTtcblxuICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5kb25lKGZ1bmN0aW9uKGlkLCByZXNvdXJjZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQuaW5BcnJheShpZCwgc2VsZi5fY29sbGVjdGlvbl9sb2FkZWQpID09PSAtMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NvbGxlY3Rpb25fbG9hZGVkLnB1c2goaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBlcmNlbnRhZ2UgPSBzZWxmLl9sb2FkZWQgLyBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCAqIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvZ3Jlc3MuY2FsbChudWxsIC8qIHRvZG8gKi8sIHJlc291cmNlKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWxmLl9sb2FkZWQgPiBzZWxmLl9jb2xsZWN0aW9uLmxlbmd0aCB8fCBzZWxmLl9hYm9ydCApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHNlbGYuX2xvYWRlZCA9PT0gc2VsZi5fY29sbGVjdGlvbi5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvICovKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvZ3Jlc3MoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKHJlc291cmNlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgZm9yKCBjb25zdCBpbnN0YW5jZSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGluc3RhbmNlIF0uYWJvcnQoKTtcblxuICAgICAgICAgICAgaWYoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIGNsYXNzIENvbGxlY3Rpb25Qb3B1bGF0b3Ige1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgY29sbGVjdCggLypvdXRwdXQqLyApIHsgLy8gdG9kbyBvdXRwdXQgdHlwZXMgZXM6IG9ubHkgZWxlbWVudHMsIG9ubHksIHVybHMsIG1peGVkLCBhbGwgLi4uIGR1bm5vXG5cbiAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgdGFyZ2V0cyA9ICdpbWcsIHZpZGVvLCBhdWRpbycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c19leHRlbmRlZCA9IHRhcmdldHMgKyAnLCBwaWN0dXJlLCBzb3VyY2UnO1xuXG4gICAgICAgICAgICBsZXQgJHRhcmdldHMgPSB0aGlzLl8kZWxlbWVudC5maW5kKHRhcmdldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHMpKVxuICAgICAgICAgICAgICAgICR0YXJnZXRzLmFkZCh0aGlzLl8kZWxlbWVudCk7XG4gICAgICAgICAgICAkdGFyZ2V0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuX3NldHRpbmdzLmJhY2tncm91bmRzKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50LmZpbmQoJyonKS5hZGRCYWNrKCkubm90KHRhcmdldHNfZXh0ZW5kZWQpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpICE9PSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpLnJlcGxhY2UoL3VybFxcKFwifHVybFxcKCd8dXJsXFwofCgoXCInKVxcKSQpL2lnbSwgJycpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBpbiB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCdbJyArIGF0dHIgKyAnXTpub3QoJyArIHRhcmdldHNfZXh0ZW5kZWQgKyAnKScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmF0dHIoYXR0cikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBhdHRyICsgJ10nKSAmJiAhdGhpcy5fJGVsZW1lbnQuaXModGFyZ2V0c19leHRlbmRlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMuXyRlbGVtZW50LmF0dHIoYXR0cikpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRbbmFtZXNwYWNlX21ldGhvZF0gPSBSZXNvdXJjZXNMb2FkZXI7XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlXG5cbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoICEkLmlzQXJyYXkoc2V0dGluZ3MuYXR0cmlidXRlcykgKVxuICAgICAgICAgICAgc2V0dGluZ3MuYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBpZiggdHlwZW9mIHNldHRpbmdzLmF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBzZXR0aW5ncy5hdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBsZXQgX2NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBuZXcgQ29sbGVjdGlvblBvcHVsYXRvcigkZWxlbWVudCwgc2V0dGluZ3MpLmNvbGxlY3QoKSxcbiAgICAgICAgICAgICAgICBldmVudF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnXycgKyB1bmlxdWVfaWQoKSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQubml0ZSApXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCdzY3JvbGwuJyArIGV2ZW50X25hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cub2ZmKCdzY3JvbGwuJytldmVudF9uYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZURhdGEobmFtZXNwYWNlKTtcblxuICAgICAgICAgICAgICAgICAgICBfY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGxvYWRfaW5zdGFuY2UgPSAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IGxvYWRfaW5zdGFuY2UgKSB7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VzTG9hZGVyKGNvbGxlY3Rpb24sIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5wcm9ncmVzcyhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ1Byb2dyZXNzLicrbmFtZXNwYWNlX3ByZWZpeCwgWyRlbGVtZW50XSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIF9jb21wbGV0ZSApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ0xvYWQuJytuYW1lc3BhY2VfcHJlZml4LCBbJGVsZW1lbnRdKTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSwgbG9hZF9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGlmKCBzZXR0aW5ncy52aXNpYmxlICl7XG5cbiAgICAgICAgICAgICAgICBpZiggJC5uaXRlIClcbiAgICAgICAgICAgICAgICAgICAgJC5uaXRlLnNjcm9sbChldmVudF9uYW1lc3BhY2UsIGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCB7IGZwcyA6IDI1IH0pO1xuXG4gICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQgPSBmdW5jdGlvbihmbiwgd2FpdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRpbWUgKyB3YWl0IC0gRGF0ZS5ub3coKSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cub24oJ3Njcm9sbC4nK2V2ZW50X25hbWVzcGFjZSwgdGhyb3R0bGVfc2Nyb2xsX2V2ZW50KGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSk7Il19
