"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b,c){"use strict";var d=Math.floor,f="nite",e=f+"Preload",g=e+"er";if(!c)return function(b,c){if(a.console){var d=a.console.log;1===c?a.console.warn&&(d=a.console.warn):2===c?a.console.error&&(d=a.console.error):void 0,d(b)}}("jQuery is needed for "+g+" to work!",2),void 0;var h=c(b),i=c(a),j=function(){return c.nite?c.nite.uniqueId():d(Math.random()*8999)+1e3},k=function(a){var b=c(a),d=!1;if(c.nite)d=c.nite.inViewport(a).ratio;else{var e=a.getBoundingClientRect();d=!(0>e.right||0>e.bottom||e.left>i.width()||e.top>i.height())}return d&&b.is(":visible")&&"hidden"!==b.css("visibility")},l=function(a){return a.complete&&1<=d(a.naturalWidth)&&1<=d(a.naturalHeight)||2<=a.readyState&&0!==a.videoWidth&&0!==a.videoHeight},m=function(a){if("object"!==("undefined"==typeof a?"undefined":_typeof(a)))return!1;try{return a instanceof HTMLElement}catch(b){return 1===a.nodeType&&"object"===_typeof(a.style)&&"object"===_typeof(a.ownerDocument)}},n=function(a,b){var d={image:"jp[e]?g|gif|png|tif[f]?|bmp",audio:"mp3|ogg",video:"mp4|ogv|ogg|webm"},e=Object.keys(d),f={format:null,extension:null};if("string"==typeof a){if(a=a.split("?")[0],a=a.split("#")[0],""===a)return!1;var g=void 0===b?e:[b];for(var h in g)if(g.hasOwnProperty(h)&&new RegExp("(.("+d[g[h]]+")$)|"+";base64,","g").test(a))if(/;base64,/g.test(a)){var i=a.match(new RegExp("^data:"+g[h]+"/("+d[g[h]]+")","g"));if(!i||null===i)continue;i=i[0],f.format=i.replace("data:"+g[h]+"/g","");break}else{var j=a.match(new RegExp(d[g[h]],"g"));if(j){f.format=g[h],f.extension=j[0];break}}}if(m(a)){var k=a.tagName.toLowerCase();-1<c.inArray(k,e)&&(f.format=a.tagName.toLowerCase()),"img"===k&&(f.format="image")}return f},o=function(){function d(a){_classCallCheck(this,d);var b=this;this._settings=c.extend(!0,{playthrough:!1,srcsetAttr:"data-srcset",srcAttr:"data-src",visible:!1},a),this._id=null,this._id_event=null,this._element=null,this._$element=c(),this._resource=null,this._process=!1,this._format=null,this._callback=c.noop,this._done=function(a){if(!b._process){var c=a.type.charAt(0).toUpperCase()+a.type.slice(1);b._$element.trigger(f+c+"."+f,[b._$element])}b._callback.call(null,b._id,b._element.currentSrc||b._element.src)}}return _createClass(d,[{key:"process",value:function(){if(!this._settings.visible||k(this._element)){var b=this,d=this._settings.srcAttr,e=this._settings.srcAttr.replace("data-","");if(l(this._element))this._process||this._$element.off("."+this._id_event),this._done(new Event(c.isNumeric(this._element.naturalWidth)?f+"Load":f+"Error"));else{if("image"===this._format){this._$element[this._process?"on":"one"]("load."+this._id_event+" error."+this._id_event,this._done);var h=this._$element.closest("picture"),i=this._settings.srcsetAttr,j=this._settings.srcsetAttr.replace("data-","");h.length&&"HTMLPictureElement"in a?(this._$element.removeData(j).removeAttr(i).removeData(e).removeAttr(d),h.find("source["+i+"]").attr("srcset",h.data(j)).removeData(j).removeAttr(i)):(this._$element.is("["+i+"]")&&this._$element.attr("srcset",this._$element.data(j)).removeData(j).removeAttr(i),this._$element.is("["+d+"]")&&this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d))}if("video"===this._format||"audio"===this._format){var m=this._$element.find("source"),n=!1;m.length?m.each(function(){c(this).is("["+d+"]")&&(c(this).attr("src",c(this).data(e)).removeData(e).removeAttr(d),n=!0)}):this._$element.is("["+d+"]")&&(this._$element.attr("src",this._$element.data(e)).removeData(e).removeAttr(d),n=!0),n&&this._element.load(),this._$element[this._process?"on":"one"]("loadedmetadata."+this._id_event,function(){!0!==b._settings.playthrough&&b._done(new Event("load"))})[this._process?"on":"one"]("canplaythrough."+this._id_event,function(){!0===b._settings.playthrough&&b._done(new Event("load"))})[this._process?"on":"one"]("error."+this._id_event,b._done)}this._process||this._$element.data(g,this._id_event)}this._resource=this._element.currentSrc||this._element.src}}},{key:"abort",value:function(){if(this._$element.off("."+this._id_event),!l(this._element)){var a=this._$element.attr("srcset"),b=this._$element.attr("src");void 0!==a&&this._$element.data(this._settings.srcAttr,a).attr(this._settings.srcAttr,a).removeAttr("src").removeAttr("srcset"),void 0!==b&&this._$element.data(this._settings.srcsetAttr,b).attr(this._settings.srcsetAttr,b).removeAttr("src").removeAttr("srcset")}}},{key:"done",value:function(a){if(c.isFunction(a)){var b=this;this._callback=function(c){a.call(b,c)}}}},{key:"resource",set:function(a){var d=m(a.resource),e="string"==typeof a.resource;if(d||e){if(this._id=a.id,this._format=n(a.resource).format,e){var f="image"===this._format;this._element=b.createElement(f?"img":this._format),f&&(this._settings.srcsetAttr="data-srcset"),this._settings.srcAttr="data-src",this._resource=a.resource}d&&(this._element=a.resource),this._$element=c(this._element),e&&this._$element.data(this._settings.srcAttr.replace("data-",""),this._resource).data(this._settings.srcsetAttr.replace("data-",""),this._resource).attr(this._settings.srcAttr,this._resource).attr(this._settings.srcsetAttr,this._resource),this._id_event=this._$element.data(g),this._process=void 0!==this._id_event,this._id_event=this._process?this._id_event:g+"_unique_"+j()}}}]),d}(),p=function(){function a(b,d){_classCallCheck(this,a);var e=this;if(this._collection=[],this._collection_loaded=[],this._collection_instances=[new o(this._settings)],c.isArray(b)&&("string"==typeof b[0]||m(b[0])))for(var f in b)b.hasOwnProperty(f)&&this._collection.push({id:j(),resource:b[f]});("string"==typeof b||m(b))&&this._collection.push({id:j(),resource:b}),this._settings=c.extend(!0,{sequential:!1},d),this.percentage=0,this._callback=c.noop(),this._progress=c.noop(),this._abort=!1,this._complete=!1,this._loaded=0,this._loop=function(){if(this._collection.length){if(!0===this._complete)return void e._callback.call(null);for(var a,b=0;b<this._collection.length&&!this._abort;b++)a=new o(this._settings),this._collection_instances.push(a),a.resource=this._collection[b],a.process(),a.done(function(a,b){-1===c.inArray(a,e._collection_loaded)&&(e._loaded++,e._collection_loaded.push(a),e.percentage=100*(e._loaded/e._collection.length),e._progress.call(null,b)),e._loaded>e._collection.length||e._abort||e._loaded===e._collection.length&&(e._callback.call(null),e._complete=!0)})}},this._loop()}return _createClass(a,[{key:"loop",value:function(){this._loop()}},{key:"done",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(){a.call(b)};return this._collection.length?this._callback=d:d(),!0}},{key:"progress",value:function(a){if(!c.isFunction(a))return!1;var b=this,d=function(c){a.call(b,c)};return this._collection.length?this._progress=d:d(),!0}},{key:"abort",value:function(){for(var a in this._collection_instances)this._collection_instances[a].abort();this._collection.length&&(this._abort=!0)}}]),a}(),q=function(){function a(b,c){_classCallCheck(this,a),this._$element=b,this._settings=c}return _createClass(a,[{key:"collect",value:function(){var a=[],b="img, video, audio",d=b+", picture, source",e=this._$element.find(b);if(this._$element.is(b)&&e.add(this._$element),e.each(function(){a.push(this)}),!0===this._settings.backgrounds&&this._$element.find("*").addBack().not(d).filter(function(){return"none"!==c(this).css("background-image")}).each(function(){a.push(c(this).css("background-image").replace(/url\("|url\('|url\(|(("')\)$)/igm,""))}),this._settings.attributes.length){var f=function(b){this._settings.attributes.hasOwnProperty(b)&&(this._$element.find("["+b+"]:not("+d+")").each(function(){a.push(c(this).attr(b))}),this._$element.is("["+b+"]")&&!this._$element.is(d)&&a.push(this._$element.attr(b)))};for(const a in this._settings.attributes)f(a)}return a}}]),a}();c[e]=p,c.fn[e]=function(a,b){c.isFunction(a)&&(b=a),c.isFunction(b)||(b=c.noop),"object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a={});var d=c.extend(!0,{srcAttr:"data-src",srcsetAttr:"data-srcset",visible:!1,sequential:!1,backgrounds:!1,extraAttrs:[],playthrough:!1},a);return c.isArray(d.attributes)||(d.attributes=[]),"string"==typeof d.attributes&&(d.attributes=d.attributes.split(" ")),this.each(function(){var a=!1,e=this,k=c(e),l=new q(k,d).collect(),m=g+"_"+j(),n=function(){c.nite?h.off("scroll."+m):i.off("scroll."+m),k.removeData(g),a=!0},o=k.data(g);if(void 0!==o&&(o.abort(),n()),o=new p(l,d),o.progress(function(){k.trigger(f+"Progress."+f,[k])}),o.done(function(){a||(n(),k.trigger(f+"Load."+f,[k]),b.call(e),b=c.noop)}),k.data(g,o),d.visible)if(c.nite)c.nite.scroll(m,function(){o.loop()},{fps:25});else{var r=function(a,b){var c=Date.now();return function(){0>c+b-Date.now()&&(a(),c=Date.now())}};i.on("scroll."+m,r(function(){o.loop()},1e3))}})}})(window,document,jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5uaXRlLnByZWxvYWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGtCQUFBLENBQ0EsQ0FBQyxBQUFTLEFBQVEsQUFBVSxBQUFHLGVBQVUsQUFDckMsQ0FFQSxtQkF5QzRDLEtBQUEsQUFBSyxNQXhDN0MsRUFESixBQUN1QixPQUNuQixFQUFtQixFQUZ2QixBQUV3QyxVQUNwQyxFQUFZLEVBSGhCLEFBR2lDLEFBQzdCLFFBdUJKLEFBQUksQUFBQyxBQUFJLEFBQ0wsR0FDQSxBQUFPLEFBQ1YsQUFDRCxBQUdBLE1BOUJJLEFBQVcsQUFBUyxBQUFTLGNBQU0sQUFFL0IsQ0FBSSxHQUFDLEVBQUwsQUFBWSxBQUNSLEFBRUosWUFBSSxHQUFVLEVBQUEsQUFBTyxRQUFyQixBQUE2QixBQUU3QixBQUFPLEFBQ0gsSUFBQSxBQUFLLEFBQ0QsTUFBSSxFQUFBLEFBQU8sUUFBWCxBQUFtQixPQUNmLEVBQVUsRUFBQSxBQUFPLFFBQWpCLEFBQXlCLEFBQzdCLEFBQ0osTUFBQSxBQUFLLEFBQ0QsTUFBSSxFQUFBLEFBQU8sUUFBWCxBQUFtQixRQUNmLEVBQVUsRUFBQSxBQUFPLFFBUDdCLEFBT1ksQUFBeUIsQUFDN0IsQUFHUixjQUFBLEFBQVEsQUFFWCxLQXhCTCxBQTBCQSxBQUNBLEVBQ2EsQUFBd0IsMEJBQWpDLEFBQTJDLFlBQTNDLEFBQXdELEFBQ3hELGFBT0EsR0FGSixBQUVnQixBQUFFLEtBQ2QsRUFISixBQUdjLEFBQUUsS0FFWixFQUFBLEFBQVksVUFBVSxBQUVsQixPQUFPLEdBQUEsQUFBRSxLQUFPLEVBQUEsQUFBRSxLQUFYLEFBQVMsQUFBTyxhQUF3QixLQUEvQyxBQUFvQyxBQUFXLEFBQUssQUFBWSxBQUFPLEFBQVMsQUFFbkYsa0JBVEwsRUFXSSxFQUFBLEFBQWEsQUFBUyxXQUFRLEFBRTFCLElBQU0sR0FBTixBQUFZLEFBQUUsQUFFZCxLQUFBLEFBQUksQUFBYyxBQUVsQixRQUFJLEVBQUosQUFBTSxLQUNGLEVBQWMsRUFBQSxB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ZixBQUFlLEFBQUssUUFFcEIsTUFBTyxLQUFQLEFBQU8sQUFBSyxBQUNmLEFBQ0osTUFMRCxBQU9ILENBWEQsQUFhQSxJQUFBLEFBQVEsR0FBUixBQUFXLEFBQVUsWUFBaUIsRUFBc0IsVUFBVSxBQUFFLEdBQUEsQUFBYyxBQUFTLE1BQS9GLEFBQXNDLEFBQTJELEFBRXBHLE9BRUosQUFFSixDQWxGRCxBQUFPLEFBb0ZWLEVBbEhELEFBb0hILENBN3hCRCxHQUFBLEFBNnhCRyxPQTd4QkgsQUE2eEJXLFNBN3hCWCxBQTZ4QnFCIiwiZmlsZSI6ImpxdWVyeS5uaXRlLnByZWxvYWRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgSlF1ZXJ5IEhlYXZ5IFJlc291cmNlc0xvYWRlciB8IERhbmllbGUgRmlvcm9uaSB8IGRmaW9yb25pOTFAZ21haWwuY29tICovXG4oZnVuY3Rpb24od2luZG93LCBkb2N1bWVudCwgJCwgdW5kZWZpbmVkKXtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBjb25zdFxuICAgICAgICBuYW1lc3BhY2VfcHJlZml4ID0gJ25pdGUnLFxuICAgICAgICBuYW1lc3BhY2VfbWV0aG9kID0gbmFtZXNwYWNlX3ByZWZpeCsnUHJlbG9hZCcsXG4gICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZV9tZXRob2QrJ2VyJyxcbiAgICAgICAgX2NvbnNvbGUgPSBmdW5jdGlvbihtZXNzYWdlLCBsZXZlbCl7XG5cbiAgICAgICAgICAgIGlmKCAhd2luZG93LmNvbnNvbGUgKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgbGV0IGRpc3BsYXkgPSB3aW5kb3cuY29uc29sZS5sb2c7XG5cbiAgICAgICAgICAgIHN3aXRjaChsZXZlbCl7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBpZiggd2luZG93LmNvbnNvbGUud2FybiApXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ID0gd2luZG93LmNvbnNvbGUud2FybjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZiggd2luZG93LmNvbnNvbGUuZXJyb3IgKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheSA9IHdpbmRvdy5jb25zb2xlLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlzcGxheShtZXNzYWdlKTtcblxuICAgICAgICB9O1xuXG4gICAgLy8gfiB+IH4gfiB+IH4gfiB+IH4gfiB+IH5cbiAgICBpZiggISQgKSB7XG4gICAgICAgIF9jb25zb2xlKCdqUXVlcnkgaXMgbmVlZGVkIGZvciAnK25hbWVzcGFjZSsnIHRvIHdvcmshJywgMik7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIH4gfiB+IH4gfiB+IH4gfiB+IH4gfiB+XG5cblxuICAgIGNvbnN0XG5cbiAgICAgICAgJGRvY3VtZW50ID0gJChkb2N1bWVudCksXG4gICAgICAgICR3aW5kb3cgPSAkKHdpbmRvdyksXG5cbiAgICAgICAgdW5pcXVlX2lkID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgcmV0dXJuICQubml0ZSA/ICQubml0ZS51bmlxdWVJZCgpIDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDk5OTkgLSAxMDAwKSkgKyAxMDAwO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfdmlzaWJsZSA9IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXG4gICAgICAgICAgICBjb25zdCAkZWwgPSAkKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBsZXQgaW5fdmlld3BvcnQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYoICQubml0ZSApXG4gICAgICAgICAgICAgICAgaW5fdmlld3BvcnQgPSAkLm5pdGUuaW5WaWV3cG9ydChlbGVtZW50KS5yYXRpbztcblxuICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgaW5fdmlld3BvcnQgPSAhKCByZWN0LnJpZ2h0IDwgMCB8fCByZWN0LmJvdHRvbSA8IDAgfHwgcmVjdC5sZWZ0ID4gJHdpbmRvdy53aWR0aCgpIHx8IHJlY3QudG9wID4gJHdpbmRvdy5oZWlnaHQoKSApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpbl92aWV3cG9ydCAmJiAkZWwuaXMoJzp2aXNpYmxlJykgJiYgJGVsLmNzcygndmlzaWJpbGl0eScpICE9PSAnaGlkZGVuJztcblxuICAgICAgICB9LFxuXG4gICAgICAgIGlzX2xvYWRlZCA9IGZ1bmN0aW9uKGVsZW1lbnQpe1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY29tcGxldGUgJiZcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKGVsZW1lbnQubmF0dXJhbFdpZHRoKSA+PSAxICYmXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihlbGVtZW50Lm5hdHVyYWxIZWlnaHQpID49IDFcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHx8XG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZWFkeVN0YXRlID49IDIgJiZcbiAgICAgICAgICAgICAgICBlbGVtZW50LnZpZGVvV2lkdGggIT09IDAgJiZcbiAgICAgICAgICAgICAgICBlbGVtZW50LnZpZGVvSGVpZ2h0ICE9PSAwXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNfaHRtbF9vYmplY3QgPSBmdW5jdGlvbiggb2JqZWN0ICl7XG5cbiAgICAgICAgICAgIGlmKCB0eXBlb2Ygb2JqZWN0ICE9PSAnb2JqZWN0JyApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3Qubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG9iamVjdC5zdHlsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5vd25lckRvY3VtZW50ID09PSAnb2JqZWN0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgaXNfZm9ybWF0ID0gZnVuY3Rpb24oIGl0ZW0sIGV4cGVjdGVkX2Zvcm1hdCApe1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIGZvcm1hdF9leHRlbnNpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZSA6ICdqcFtlXT9nfGdpZnxwbmd8dGlmW2ZdP3xibXAnLFxuICAgICAgICAgICAgICAgICAgICBhdWRpbyA6ICdtcDN8b2dnJyxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8gOiAnbXA0fG9ndnxvZ2d8d2VibSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZvcm1hdF9uYW1lcyA9IE9iamVjdC5rZXlzKGZvcm1hdF9leHRlbnNpb25zKSxcbiAgICAgICAgICAgICAgICBiYXNlNjRfaGVhZGluZyA9ICdcXDtiYXNlNjRcXCwnO1xuXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0geyBmb3JtYXQ6IG51bGwsIGV4dGVuc2lvbjogbnVsbCB9O1xuXG4gICAgICAgICAgICBpZiggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJz8nKVswXTsgLy8gZ2V0IHJpZCBvZiBxdWVyeSBzdHJpbmdzXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0uc3BsaXQoJyMnKVswXTsgLy8gZ2V0IHJpZCBvZiBoYXNoZXNcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAnJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgbGV0IGZvcm1hdF9xdWV1ZSA9IHVuZGVmaW5lZCAhPT0gZXhwZWN0ZWRfZm9ybWF0ID8gWyBleHBlY3RlZF9mb3JtYXQgXSA6IGZvcm1hdF9uYW1lcztcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeCBpbiBmb3JtYXRfcXVldWUpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0X3F1ZXVlLmhhc093blByb3BlcnR5KHgpKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJyhcXC4oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKSQpfCcgKyBiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3IFJlZ0V4cChiYXNlNjRfaGVhZGluZywgJ2cnKS50ZXN0KGl0ZW0pKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZXM2NCA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cCgnXmRhdGE6JyArIGZvcm1hdF9xdWV1ZVt4XSArICdcXC8oJyArIGZvcm1hdF9leHRlbnNpb25zW2Zvcm1hdF9xdWV1ZVt4XV0gKyAnKScsICdnJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoZXM2NCB8fCBudWxsID09PSBtYXRjaGVzNjQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczY0ID0gbWF0Y2hlczY0WzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBtYXRjaGVzNjQucmVwbGFjZSgnZGF0YTonICsgZm9ybWF0X3F1ZXVlW3hdICsgJy9nJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IGl0ZW0ubWF0Y2gobmV3IFJlZ0V4cChmb3JtYXRfZXh0ZW5zaW9uc1tmb3JtYXRfcXVldWVbeF1dLCAnZycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gZm9ybWF0X3F1ZXVlW3hdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmV4dGVuc2lvbiA9IG1hdGNoZXNbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiggaXNfaHRtbF9vYmplY3QoaXRlbSkgKXtcblxuICAgICAgICAgICAgICAgIGxldCB0YWdfbmFtZSA9IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmKCAkLmluQXJyYXkodGFnX25hbWUsIGZvcm1hdF9uYW1lcykgPiAtMSApXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5mb3JtYXQgPSBpdGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0YWdfbmFtZSA9PT0gJ2ltZycgKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuZm9ybWF0ID0gJ2ltYWdlJztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIFxuICAgICAgICB9O1xuXG4gICAgY2xhc3MgUmVzb3VyY2VMb2FkZXIge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xuXG4gICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHBsYXl0aHJvdWdoICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNyY3NldEF0dHIgICA6ICdkYXRhLXNyY3NldCcsXG4gICAgICAgICAgICAgICAgc3JjQXR0ciAgICAgIDogJ2RhdGEtc3JjJyxcbiAgICAgICAgICAgICAgICB2aXNpYmxlICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuX2lkICAgICAgICA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCAgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ICAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgID0gJCgpO1xuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcHJvY2VzcyAgID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCAgICA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrICA9ICQubm9vcDtcbiAgICAgICAgICAgIHRoaXMuX2RvbmUgICAgICA9IGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgICAgICAgICAgaWYoICFzZWxmLl9wcm9jZXNzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaWdnZXJfZXZlbnQgPSBlLnR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnR5cGUuc2xpY2UoMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fJGVsZW1lbnQudHJpZ2dlcihuYW1lc3BhY2VfcHJlZml4ICsgdHJpZ2dlcl9ldmVudCArICcuJyArIG5hbWVzcGFjZV9wcmVmaXgsIFtzZWxmLl8kZWxlbWVudF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlbGYuX2NhbGxiYWNrLmNhbGwobnVsbCAvKiB0b2RvIGNvbnRleHQgKi8sIHNlbGYuX2lkLCBzZWxmLl9lbGVtZW50LmN1cnJlbnRTcmMgfHwgc2VsZi5fZWxlbWVudC5zcmMpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICBzZXQgcmVzb3VyY2UoIGRhdGEgKXtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBlbGVtZW50X3Jlc291cmNlID0gaXNfaHRtbF9vYmplY3QoZGF0YS5yZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgc3RyaW5nX3Jlc291cmNlID0gdHlwZW9mIGRhdGEucmVzb3VyY2UgPT09ICdzdHJpbmcnO1xuXG4gICAgICAgICAgICBpZiggIWVsZW1lbnRfcmVzb3VyY2UgJiYgIXN0cmluZ19yZXNvdXJjZSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9pZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBpc19mb3JtYXQoZGF0YS5yZXNvdXJjZSkuZm9ybWF0O1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNfaW1nID0gdGhpcy5fZm9ybWF0ID09PSAnaW1hZ2UnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXNfaW1nID8gJ2ltZycgOiB0aGlzLl9mb3JtYXQpO1xuXG4gICAgICAgICAgICAgICAgaWYoIGlzX2ltZyApXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIgPSAnZGF0YS1zcmNzZXQnO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnNyY0F0dHIgPSAnZGF0YS1zcmMnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVzb3VyY2UgPSBkYXRhLnJlc291cmNlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBlbGVtZW50X3Jlc291cmNlIClcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gZGF0YS5yZXNvdXJjZTtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiggc3RyaW5nX3Jlc291cmNlICl7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zZXR0aW5ncy5zcmNBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpLCB0aGlzLl9yZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKSwgdGhpcy5fcmVzb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHRoaXMuX3Jlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCB0aGlzLl9yZXNvdXJjZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5faWRfZXZlbnQgPSB0aGlzLl8kZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzICA9IHRoaXMuX2lkX2V2ZW50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl9pZF9ldmVudCA9IHRoaXMuX3Byb2Nlc3MgPyB0aGlzLl9pZF9ldmVudCA6IG5hbWVzcGFjZSArICdfdW5pcXVlXycgKyB1bmlxdWVfaWQoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcHJvY2Vzcygpe1xuXG4gICAgICAgICAgICBpZiggdGhpcy5fc2V0dGluZ3MudmlzaWJsZSAmJiAhaXNfdmlzaWJsZSh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsXG4gICAgICAgICAgICAgICAgc3JjX2NsZWFuID0gdGhpcy5fc2V0dGluZ3Muc3JjQXR0ci5yZXBsYWNlKCdkYXRhLScsICcnKTtcblxuICAgICAgICAgICAgaWYgKCBpc19sb2FkZWQodGhpcy5fZWxlbWVudCkgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3Byb2Nlc3MpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50Lm9mZignLicgKyB0aGlzLl9pZF9ldmVudCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9kb25lKG5ldyBFdmVudCgkLmlzTnVtZXJpYyh0aGlzLl9lbGVtZW50Lm5hdHVyYWxXaWR0aCkgPyBuYW1lc3BhY2VfcHJlZml4KydMb2FkJyA6IG5hbWVzcGFjZV9wcmVmaXgrJ0Vycm9yJykpO1xuXG4gICAgICAgICAgICB9ZWxzZXtcblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICdpbWFnZScgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2xvYWQuJyArIHRoaXMuX2lkX2V2ZW50ICsgJyBlcnJvci4nICsgdGhpcy5faWRfZXZlbnQsIHRoaXMuX2RvbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGljdHVyZSA9IHRoaXMuXyRlbGVtZW50LmNsb3Nlc3QoJ3BpY3R1cmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuX3NldHRpbmdzLnNyY3NldEF0dHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzZXRfY2xlYW4gPSB0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLnJlcGxhY2UoJ2RhdGEtJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkcGljdHVyZS5sZW5ndGggJiYgJ0hUTUxQaWN0dXJlRWxlbWVudCcgaW4gd2luZG93ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY3NldF9jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRwaWN0dXJlLmZpbmQoJ3NvdXJjZVsnICsgc3Jjc2V0ICsgJ10nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmNzZXQnLCAkcGljdHVyZS5kYXRhKHNyY3NldF9jbGVhbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyY3NldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKCdbJyArIHNyY3NldCArICddJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyY3NldCcsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3Jjc2V0X2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3Jjc2V0X2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmNzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgdGhpcy5fJGVsZW1lbnQuZGF0YShzcmNfY2xlYW4pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzcmNfY2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9mb3JtYXQgPT09ICd2aWRlbycgfHwgdGhpcy5fZm9ybWF0ID09PSAnYXVkaW8nICl7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJHNvdXJjZXMgPSB0aGlzLl8kZWxlbWVudC5maW5kKCdzb3VyY2UnKTtcblxuICAgICAgICAgICAgICAgICAgICBsZXQgbG9hZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAkc291cmNlcy5sZW5ndGggKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNvdXJjZXMuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJCh0aGlzKS5pcygnWycgKyBzcmMgKyAnXScpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCAkKHRoaXMpLmRhdGEoc3JjX2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVEYXRhKHNyY19jbGVhbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKHNyYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGVsZW1lbnQuaXMoJ1snICsgc3JjICsgJ10nKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIHRoaXMuXyRlbGVtZW50LmRhdGEoc3JjX2NsZWFuKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZURhdGEoc3JjX2NsZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGxvYWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5sb2FkKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnbG9hZGVkbWV0YWRhdGEuJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSAhPT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLypbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2NhbnBsYXkuJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gc2VsZi5fc2V0dGluZ3MucGxheXRocm91Z2gpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKCdwcm9ncmVzcy4nICsgc2VsZi5faWRfZXZlbnQsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FzJylcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA+IDAgJiYgIXRoaXMuZHVyYXRpb24pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdlcnJvcicpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGYuX3Byb2Nlc3MpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wYXVzZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5idWZmZXJlZC5sZW5ndGggJiYgTWF0aC5yb3VuZCh0aGlzLmJ1ZmZlcmVkLmVuZCgwKSkgLyBNYXRoLnJvdW5kKHRoaXMuc2Vla2FibGUuZW5kKDApKSA9PT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnW2F1dG9wbGF5XScpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RvbmUobmV3IEV2ZW50KCdsb2FkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLl9wcm9jZXNzID8gJ29uJyA6ICdvbmUnXSgnY2FucGxheXRocm91Z2guJyArIHRoaXMuX2lkX2V2ZW50LCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHRydWUgPT09IHNlbGYuX3NldHRpbmdzLnBsYXl0aHJvdWdoIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZG9uZShuZXcgRXZlbnQoJ2xvYWQnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5fcHJvY2VzcyA/ICdvbicgOiAnb25lJ10oJ2Vycm9yLicgKyB0aGlzLl9pZF9ldmVudCwgc2VsZi5fZG9uZSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoICF0aGlzLl9wcm9jZXNzIClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnQuZGF0YShuYW1lc3BhY2UsIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHRoaXMuX2VsZW1lbnQuY3VycmVudFNyYyB8fCB0aGlzLl9lbGVtZW50LnNyYztcblxuICAgICAgICB9XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAub2ZmKCcuJyArIHRoaXMuX2lkX2V2ZW50KTtcblxuICAgICAgICAgICAgaWYoIGlzX2xvYWRlZCh0aGlzLl9lbGVtZW50KSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgIHNyYyA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyY3NldCcpLFxuICAgICAgICAgICAgICAgIHNyY3NldCA9IHRoaXMuXyRlbGVtZW50LmF0dHIoJ3NyYycpO1xuXG4gICAgICAgICAgICBpZiggdW5kZWZpbmVkICE9PSBzcmMgKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NldHRpbmdzLnNyY0F0dHIsIHNyYylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIodGhpcy5fc2V0dGluZ3Muc3JjQXR0ciwgc3JjKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignc3JjJykucmVtb3ZlQXR0cignc3Jjc2V0Jyk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IHNyY3NldCApXG4gICAgICAgICAgICAgICAgdGhpcy5fJGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEodGhpcy5fc2V0dGluZ3Muc3Jjc2V0QXR0ciwgc3Jjc2V0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cih0aGlzLl9zZXR0aW5ncy5zcmNzZXRBdHRyLCBzcmNzZXQpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdzcmMnKS5yZW1vdmVBdHRyKCdzcmNzZXQnKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZG9uZShjYWxsYmFjayl7XG5cbiAgICAgICAgICAgIGlmKCAhJC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSBmdW5jdGlvbihyZXNvdXJjZSl7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH07XG5cbiAgICB9XG4gICAgXG4gICAgY2xhc3MgUmVzb3VyY2VzTG9hZGVyIHtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uID0gW107XG4gICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2xvYWRlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXMgPSBbIG5ldyBSZXNvdXJjZUxvYWRlcih0aGlzLl9zZXR0aW5ncykgXTtcblxuICAgICAgICAgICAgaWYgKCQuaXNBcnJheShjb2xsZWN0aW9uKSAmJiAoIHR5cGVvZiBjb2xsZWN0aW9uWzBdID09PSAnc3RyaW5nJyB8fCBpc19odG1sX29iamVjdChjb2xsZWN0aW9uWzBdKSApKVxuICAgICAgICAgICAgICAgIGZvciAoIGNvbnN0IHJlc291cmNlIGluIGNvbGxlY3Rpb24gKVxuICAgICAgICAgICAgICAgICAgICBpZiggY29sbGVjdGlvbi5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbi5wdXNoKHsgaWQgOiB1bmlxdWVfaWQoKSwgcmVzb3VyY2UgOiBjb2xsZWN0aW9uW3Jlc291cmNlXSB9KTtcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbGxlY3Rpb24gPT09ICdzdHJpbmcnIHx8IGlzX2h0bWxfb2JqZWN0KGNvbGxlY3Rpb24pIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uLnB1c2goeyBpZCA6IHVuaXF1ZV9pZCgpLCByZXNvdXJjZSA6IGNvbGxlY3Rpb24gfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gJC5leHRlbmQodHJ1ZSwge1xuICAgICAgICAgICAgICAgIHNlcXVlbnRpYWw6IGZhbHNlXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcblxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2sgPSAkLm5vb3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzID0gJC5ub29wKCk7XG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9sb2FkZWQgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLl9sb29wID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgIGlmICggIXRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYoIHRydWUgPT09IHRoaXMuX2NvbXBsZXRlICl7XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2suY2FsbChudWxsIC8qIHRvZG8gY29udGV4dCAqLyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Fib3J0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kbyB0aGlzLl9zZXR0aW5ncy5zZXF1ZW50aWFsIC0tPiBtdXN0IGJlIGNhbGxlZCBpbiB0aGUgZm9sbG93aW5nIC5kb25lKCkgY2FsbCBhbmQgdGFraW5nIGFjY291bnQgb2YgdmlzaWJpbGl0eSBjaGVjayBpbiBSZXNvdXJjZUxvYWRlcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBsb2FkX2luc3RhbmNlID0gbmV3IFJlc291cmNlTG9hZGVyKHRoaXMuX3NldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcy5wdXNoKGxvYWRfaW5zdGFuY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucmVzb3VyY2UgPSB0aGlzLl9jb2xsZWN0aW9uW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UucHJvY2VzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UuZG9uZShmdW5jdGlvbihpZCwgcmVzb3VyY2Upe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggJC5pbkFycmF5KGlkLCBzZWxmLl9jb2xsZWN0aW9uX2xvYWRlZCkgPT09IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fbG9hZGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2xvYWRlZC5wdXNoKGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGVyY2VudGFnZSA9IHNlbGYuX2xvYWRlZCAvIHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoICogMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcHJvZ3Jlc3MuY2FsbChudWxsIC8qIHRvZG8gKi8sIHJlc291cmNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYuX2xvYWRlZCA+IHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoIHx8IHNlbGYuX2Fib3J0IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBzZWxmLl9sb2FkZWQgPT09IHNlbGYuX2NvbGxlY3Rpb24ubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY2FsbGJhY2suY2FsbChudWxsIC8qIHRvZG8gKi8pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuX2xvb3AoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgbG9vcCgpe1xuXG4gICAgICAgICAgICB0aGlzLl9sb29wKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRvbmUoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFjayA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJvZ3Jlc3MoY2FsbGJhY2spe1xuXG4gICAgICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBfZnVuYyA9IGZ1bmN0aW9uKHJlc291cmNlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZXNvdXJjZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYoIHRoaXMuX2NvbGxlY3Rpb24ubGVuZ3RoIClcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IF9mdW5jO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF9mdW5jKCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgYWJvcnQoKXtcblxuICAgICAgICAgICAgZm9yKCBjb25zdCBpbnN0YW5jZSBpbiB0aGlzLl9jb2xsZWN0aW9uX2luc3RhbmNlcyApXG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdGlvbl9pbnN0YW5jZXNbIGluc3RhbmNlIF0uYWJvcnQoKTtcblxuICAgICAgICAgICAgaWYoICF0aGlzLl9jb2xsZWN0aW9uLmxlbmd0aCApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLl9hYm9ydCA9IHRydWU7XG5cbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIGNsYXNzIENvbGxlY3Rpb25Qb3B1bGF0b3Ige1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgICAgICB0aGlzLl8kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcblxuICAgICAgICB9XG5cbiAgICAgICAgY29sbGVjdCggLypvdXRwdXQqLyApIHsgLy8gdG9kbyBvdXRwdXQgdHlwZXMgZXM6IG9ubHkgZWxlbWVudHMsIG9ubHksIHVybHMsIG1peGVkLCBhbGwgLi4uIGR1bm5vXG5cbiAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgdGFyZ2V0cyA9ICdpbWcsIHZpZGVvLCBhdWRpbycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c19leHRlbmRlZCA9IHRhcmdldHMgKyAnLCBwaWN0dXJlLCBzb3VyY2UnO1xuXG4gICAgICAgICAgICBsZXQgJHRhcmdldHMgPSB0aGlzLl8kZWxlbWVudC5maW5kKHRhcmdldHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuXyRlbGVtZW50LmlzKHRhcmdldHMpKVxuICAgICAgICAgICAgICAgICR0YXJnZXRzLmFkZCh0aGlzLl8kZWxlbWVudCk7XG4gICAgICAgICAgICAkdGFyZ2V0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLnB1c2godGhpcyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuX3NldHRpbmdzLmJhY2tncm91bmRzKVxuICAgICAgICAgICAgICAgIHRoaXMuXyRlbGVtZW50LmZpbmQoJyonKS5hZGRCYWNrKCkubm90KHRhcmdldHNfZXh0ZW5kZWQpLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpICE9PSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpLnJlcGxhY2UoL3VybFxcKFwifHVybFxcKCd8dXJsXFwofCgoXCInKVxcKSQpL2lnbSwgJycpKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmF0dHJpYnV0ZXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBpbiB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLl9zZXR0aW5ncy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHIpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZWxlbWVudC5maW5kKCdbJyArIGF0dHIgKyAnXTpub3QoJyArIHRhcmdldHNfZXh0ZW5kZWQgKyAnKScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCgkKHRoaXMpLmF0dHIoYXR0cikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kZWxlbWVudC5pcygnWycgKyBhdHRyICsgJ10nKSAmJiAhdGhpcy5fJGVsZW1lbnQuaXModGFyZ2V0c19leHRlbmRlZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHRoaXMuXyRlbGVtZW50LmF0dHIoYXR0cikpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRbbmFtZXNwYWNlX21ldGhvZF0gPSBSZXNvdXJjZXNMb2FkZXI7XG5cbiAgICAkLmZuW25hbWVzcGFjZV9tZXRob2RdID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spe1xuXG4gICAgICAgIGlmKCAkLmlzRnVuY3Rpb24ob3B0aW9ucykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBpZiggISQuaXNGdW5jdGlvbihjYWxsYmFjaykgKVxuICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG4gICAgICAgIGlmKCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcgKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIGxldCBzZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHtcblxuICAgICAgICAgICAgc3JjQXR0ciAgICAgICA6ICdkYXRhLXNyYycsXG4gICAgICAgICAgICBzcmNzZXRBdHRyICAgIDogJ2RhdGEtc3Jjc2V0JyxcblxuICAgICAgICAgICAgdmlzaWJsZSAgICAgICA6IGZhbHNlLFxuXG4gICAgICAgICAgICBzZXF1ZW50aWFsICAgIDogZmFsc2UsXG5cbiAgICAgICAgICAgIGJhY2tncm91bmRzICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGV4dHJhQXR0cnMgICAgOiBbXSxcblxuICAgICAgICAgICAgcGxheXRocm91Z2ggICA6IGZhbHNlXG5cbiAgICAgICAgfSwgb3B0aW9ucyk7XG5cbiAgICAgICAgaWYoICEkLmlzQXJyYXkoc2V0dGluZ3MuYXR0cmlidXRlcykgKVxuICAgICAgICAgICAgc2V0dGluZ3MuYXR0cmlidXRlcyA9IFtdO1xuICAgICAgICBpZiggdHlwZW9mIHNldHRpbmdzLmF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnIClcbiAgICAgICAgICAgIHNldHRpbmdzLmF0dHJpYnV0ZXMgPSBzZXR0aW5ncy5hdHRyaWJ1dGVzLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBsZXQgX2NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBuZXcgQ29sbGVjdGlvblBvcHVsYXRvcigkZWxlbWVudCwgc2V0dGluZ3MpLmNvbGxlY3QoKSxcbiAgICAgICAgICAgICAgICBldmVudF9uYW1lc3BhY2UgPSBuYW1lc3BhY2UgKyAnXycgKyB1bmlxdWVfaWQoKSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQubml0ZSApXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCdzY3JvbGwuJyArIGV2ZW50X25hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cub2ZmKCdzY3JvbGwuJytldmVudF9uYW1lc3BhY2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZURhdGEobmFtZXNwYWNlKTtcblxuICAgICAgICAgICAgICAgICAgICBfY29tcGxldGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGV0IGxvYWRfaW5zdGFuY2UgPSAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSk7XG5cbiAgICAgICAgICAgIGlmKCB1bmRlZmluZWQgIT09IGxvYWRfaW5zdGFuY2UgKSB7XG5cbiAgICAgICAgICAgICAgICBsb2FkX2luc3RhbmNlLmFib3J0KCk7XG5cbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvYWRfaW5zdGFuY2UgPSBuZXcgUmVzb3VyY2VzTG9hZGVyKGNvbGxlY3Rpb24sIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgbG9hZF9pbnN0YW5jZS5wcm9ncmVzcyhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ1Byb2dyZXNzLicrbmFtZXNwYWNlX3ByZWZpeCwgWyRlbGVtZW50XSk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsb2FkX2luc3RhbmNlLmRvbmUoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIF9jb21wbGV0ZSApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XG5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKG5hbWVzcGFjZV9wcmVmaXgrJ0xvYWQuJytuYW1lc3BhY2VfcHJlZml4LCBbJGVsZW1lbnRdKTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSAkLm5vb3A7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKG5hbWVzcGFjZSwgbG9hZF9pbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGlmKCBzZXR0aW5ncy52aXNpYmxlICl7XG5cbiAgICAgICAgICAgICAgICBpZiggJC5uaXRlIClcbiAgICAgICAgICAgICAgICAgICAgJC5uaXRlLnNjcm9sbChldmVudF9uYW1lc3BhY2UsIGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCB7IGZwcyA6IDI1IH0pO1xuXG4gICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aHJvdHRsZV9zY3JvbGxfZXZlbnQgPSBmdW5jdGlvbihmbiwgd2FpdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRpbWUgKyB3YWl0IC0gRGF0ZS5ub3coKSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cub24oJ3Njcm9sbC4nK2V2ZW50X25hbWVzcGFjZSwgdGhyb3R0bGVfc2Nyb2xsX2V2ZW50KGZ1bmN0aW9uKCl7IGxvYWRfaW5zdGFuY2UubG9vcCgpOyB9LCAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKHdpbmRvdywgZG9jdW1lbnQsIGpRdWVyeSk7Il19
