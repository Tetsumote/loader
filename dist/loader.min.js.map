{"version":3,"sources":["loader.mjs"],"names":["_objectSpread","target","i","arguments","length","source","ownKeys","Object","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","_possibleConstructorReturn","self","call","_typeof","_assertThisInitialized","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","create","constructor","_setPrototypeOf","_wrapNativeSuper","Class","_cache","Map","undefined","_isNativeFunction","has","get","set","Wrapper","_construct","_getPrototypeOf","this","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","Parent","args","a","push","apply","instance","Function","bind","fn","indexOf","o","p","setPrototypeOf","__proto__","getPrototypeOf","_classCallCheck","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","Symbol","iterator","Array","from","isArray","arr2","global","factory","exports","module","define","amd","Loader","s4","Math","floor","random","substring","isInArray","needle","heystack","getComputed","element","property","window","getComputedStyle","getPropertyValue","supportedExtensions","image","audio","video","supportedTags","other","allSupportedTags","Set","values","reduce","b","base64head","Resource","item","isElement","HTMLElement","url","consistent","tagName","toLowerCase","type","extension","format","RegExp","test","split","pop","x","y","extensions","join","matches","match","replace","_format","LoaderPromise","_Promise","_this","resolve","reject","_progress","listener","error","Promise","handler","find","document","body","options","settings","srcAttributes","src","lazy","srcset","sizesAttributes","sizes","media","backgrounds","collection","tagsSelector","srcAttributesValues","srcAttributesSelector","map","targets","querySelectorAll","el","parentElement","attribute","j","getAttribute","switchAttributes","attrs","attr","dataAttr","dataAttrVal","setAttribute","removeAttribute","copyAttributes","attributes","removeAttributes","roundPercentage","percentage","num","decimals","parseFloat","toFixed","roundDecimals","isIntersectionObserverSupported","Viewport","_window","_html","documentElement","_body","_frame1","_frame2","_prefix1","_prefix2","_offsetWidth","_offsetHeight","_width","_height","_scrollTop","_scrollLeft","_lock","calcAll","offsetWidth","offsetHeight","width","height","scrollTop","scrollLeft","calcOffsetWidth","calcOffsetHeight","calcWidth","calcHeight","calcScrollTop","calcScrollLeft","all","bool","style","top","left","scrollBarWidth","scrollBarHeight","position","abs","scroll","behavior","isElementInViewport","getBoundsViewportIntersection","getBoundingClientRect","ratio","bounds","viewport","right","bottom","offTop","offBottom","offLeft","offRight","offY","offX","percentageX","percentageY","min","vendorsPrefixes","navigator","userAgent","ID","createElement","transEndEventNames","WebkitTransition","MozTransition","OTransition","msTransition","transition","name","threshold","segments","array","intersectionObserverThreshold$1","_this2","_options","playthrough","sequential","_collection","_queue","_load","_percentage","_state","manuallyObservedElements","manuallyObserve","intersected","dispatchEvent","CustomEvent","addEventListener","data","_this3","progress","loaded","pipeline","fetch","catch","payload","console","warn","event","detail","message","resource","then","_this4","isConsistent","contains","hasSources","createdElement","mainEventsTarget","visibility","appendChild","createdSource","append","img","querySelector","createdImg","finishPromise","resolver","load","removeChild","delete","prepareLoad","eventName","queuer","observer","dispatchedEvent","IntersectionObserver","entries","entry","intersectionRatio","unobserve","root","rootMargin","observe","_this5","NodeList","isResource","pushCheck"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('Loader', factory) :\n    (global.Loader = factory());\n}(this, (function () { 'use strict';\n\n    /**\n     * @param {string} prop\n     * @param {string} value\n     * @returns {boolean}\n     */\n\n    /**\n     * @param {(string|number)} num\n     * @returns {number}\n     */\n    const roundDecimals = (num, decimals = 4) => parseFloat(num.toFixed(decimals));\n\n    const s4 = () => Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    /**\n     * @returns {string}\n     */\n    const uniqueID = () => s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n\n    /**\n     * @param {String|number} needle\n     * @param {Array} heystack\n     * @returns {boolean}\n     */\n    const isInArray = (needle, heystack) => heystack.indexOf(needle) > -1;\n\n    // TODO: cache?\n    /**\n     *\n     * @param {HTMLElement} element\n     * @param {string} property\n     * @returns {string}\n     */\n    const getComputed = (element, property) => window.getComputedStyle(element).getPropertyValue(property);\n\n    const supportedExtensions = {\n        image: ['jp[e]?g', 'jpe', 'jif', 'jfif', 'jfi', 'gif', 'png', 'tif[f]?', 'bmp', 'dib', 'webp', 'ico', 'cur', 'svg'],\n        audio: ['mp3', 'ogg', 'oga', 'spx', 'ogg', 'wav'],\n        video: ['mp4', 'ogg', 'ogv', 'webm']\n    };\n    const supportedTags = {\n        image: ['img', 'picture'],\n        audio: ['audio'],\n        video: ['video'],\n        other: ['iframe'] // TODO: ...\n    };\n    const allSupportedTags = [...new Set(Object.values(supportedTags).reduce((a, b) => a.concat(b)))];\n\n    const base64head = ';base64,';\n\n    /**\n     * @param {Object} item\n     * @returns {Object}\n     */\n    class Resource {\n        constructor(item) {\n            const isElement = item.element instanceof HTMLElement;\n\n            this.url = item.url;\n            this.consistent = isElement && isInArray(item.element.tagName.toLowerCase(), allSupportedTags);\n            this.element = isElement ? item.element : null;\n            this.tagName = this.consistent ? this.element.tagName.toLowerCase() : null;\n            this.type = null;\n            this.extension = null;\n\n            if (!this.url) {\n                return;\n            }\n\n            this.url = item.url;\n\n            // TODO: check if really needed\n            // cleanup es: url.jpg, url.jpg x2 ...\n            if (!new RegExp(`${base64head}`).test(this.url)) {\n                this.url = this.url\n                    .split(',')\n                    .pop() // last\n                    .split(' ')\n                    .reduce((x, y) => (x.length > y.length ? x : y)); // longest in order to skip \"x2\", \"\" etc...\n            }\n\n            for (let format in supportedExtensions) {\n                const extensions = supportedExtensions[format].join('|');\n\n                if (new RegExp(`(.(${extensions})$)|data:${format}/(${extensions})${base64head}`).test(this.url)) {\n                    const matches = this.url.match(new RegExp(`.(${extensions})$`, 'g')) || this.url.match(new RegExp(`^data:${format}/(${extensions})`, 'g'));\n\n                    if (null !== matches) {\n                        this.type = format;\n                        this.extension = matches[0].replace(`data:${format}/`, '').replace('.', '');\n                        this.tagName = this.tagName ? this.tagName : supportedTags[format][0];\n\n                        break;\n                    }\n                }\n            }\n\n            if (this.consistent && (this.tagName === 'audio' || this.tagName === 'video' || this.tagName === 'iframe')) {\n                this.type = this.tagName;\n            } else if (this.tagName) {\n                for (let format in supportedTags) {\n                    if (isInArray(this.tagName, supportedTags[format])) {\n                        this.type = format;\n                        break;\n                    }\n                }\n            }\n        }\n\n        static isResource(item) {\n            return typeof item === 'object' && 'tagName' in item && 'type' in item && 'url' in item && 'extension' in item && 'element' in item;\n        }\n    }\n\n    /**\n     *\n     */\n    class LoaderPromise extends Promise {\n        constructor(fn) {\n            super((resolve, reject) => {\n                fn(resolve, reject, value => {\n                    try {\n                        return this._progress.forEach(listener => listener(value));\n                    } catch (error) {\n                        reject(error);\n                    }\n                });\n            });\n\n            this._progress = [];\n        }\n\n        progress(handler) {\n            if (typeof handler === 'function') {\n                this._progress.push(handler);\n            }\n\n            return this;\n        }\n    }\n\n    /**\n     *\n     * @param {HTMLElement} [element=document.body]\n     * @param {Object} [options={ srcAttr: 'src', srcsetAttr: 'srcset', backgrounds: false }]\n     * @returns {Array}\n     */\n    const find = (element = document.body, options = {}) => {\n        let settings = {\n            ...{\n                srcAttributes: {\n                    src: !!!options.lazy ? 'src' : 'data-src',\n                    srcset: !!!options.lazy ? 'srcset' : 'data-srcset'\n                },\n                sizesAttributes: {\n                    sizes: !!!options.lazy ? 'sizes' : 'data-sizes',\n                    media: !!!options.lazy ? 'media' : 'data-media'\n                },\n                backgrounds: false\n            },\n            ...options\n        };\n\n        let collection = [];\n\n        const tagsSelector = allSupportedTags.join(',');\n        const srcAttributesValues = Object.values(settings.srcAttributes);\n        const srcAttributesSelector = srcAttributesValues.map(x => `[${x}]`).join(',');\n\n        let targets = [...element.querySelectorAll(tagsSelector)].filter(el => !el.parentElement || el.parentElement.tagName.toLowerCase() !== 'picture');\n        if (element.matches(tagsSelector) && (!element.parentElement || element.parentElement.tagName.toLowerCase() !== 'picture')) {\n            targets.push(element);\n        }\n\n        targets.forEach(target => {\n            let source = target;\n\n            if (target.querySelectorAll('source').length) {\n                source = target.querySelectorAll('source');\n                source = [...source][0];\n            }\n\n            if (source.matches(srcAttributesSelector)) {\n                let attribute = '';\n\n                for (let i = 0, j = srcAttributesValues.length; i < j; i++) {\n                    attribute = source.getAttribute(srcAttributesValues[i]);\n                    if (attribute) {\n                        break;\n                    }\n                }\n\n                collection.push(\n                    new Resource({\n                        element: target,\n                        url: attribute\n                    })\n                );\n            }\n        });\n\n        if (true === settings.backgrounds) {\n            targets = [...element.querySelectorAll('*')];\n            targets.push(element);\n            targets = targets.filter(target => !target.matches(tagsSelector));\n            targets = targets.filter(target => getComputed(target, 'background-image') !== 'none');\n            targets.forEach(target => {\n                const url = getComputed(target, 'background-image').match(/\\((.*?)\\)/);\n\n                if (null !== url && url.length >= 2) {\n                    collection.push(\n                        new Resource({\n                            element: target,\n                            url: url[1].replace(/('|\")/g, '')\n                        })\n                    );\n                }\n            });\n        }\n\n        return collection;\n    };\n\n    /**\n     *\n     * @param {HTMLElement} el\n     * @param {Object} attrs\n     * @returns {void}\n     */\n    const switchAttributes = (el, attrs) => {\n        Object.keys(attrs).forEach(attr => {\n            let dataAttr = attrs[attr];\n            dataAttr = dataAttr === 'src' || dataAttr === 'srcset' ? `data-${dataAttr}` : dataAttr; // TODO: refactory\n            const dataAttrVal = el.getAttribute(dataAttr);\n\n            if (dataAttrVal) {\n                el.setAttribute(attr, dataAttrVal);\n                el.removeAttribute(dataAttr);\n            }\n        });\n    };\n\n    /**\n     *\n     * @param {HTMLElement} el\n     * @param {HTMLElement} attributes\n     * @returns {void}\n     */\n    const copyAttributes = (el, target, attributes) =>\n        attributes.forEach(attr => {\n            const attribute = target.getAttribute(attr);\n            if (attribute) {\n                el.setAttribute(attr === 'src' || attr === 'srcset' ? `data-${attr}` : attr, attribute); // TODO: refactory\n            }\n        });\n\n    /**\n     *\n     * @param {HTMLElement} el\n     * @param {Array} attributes\n     * @returns {void}\n     */\n    const removeAttributes = (el, attributes) => attributes.forEach(attr => el.removeAttribute(attr));\n\n    /**\n     *\n     * @param {Number} percentage\n     * @returns {Number}\n     */\n    const roundPercentage = percentage => {\n        if (percentage > 100) {\n            percentage = 100;\n        } else if (percentage < 0) {\n            percentage = 0;\n        } else {\n            percentage = roundDecimals(percentage, 4);\n        }\n\n        return percentage;\n    };\n\n    const isIntersectionObserverSupported = 'IntersectionObserver' in window;\n\n    /**\n     *\n     */\n    class Viewport {\n        constructor() {\n            this._window = window;\n            this._html = document.documentElement;\n            this._body = document.body;\n\n            this._frame1 = this._window;\n            this._frame2 = this._html || this._body;\n            this._prefix1 = 'inner';\n            this._prefix2 = 'offset';\n            if (!this._prefix1 + 'Width' in this._frame1) {\n                this._prefix1 = 'client';\n                this._frame1 = this._frame2;\n            }\n\n            this._offsetWidth = 0;\n            this._offsetHeight = 0;\n            this._width = 0;\n            this._height = 0;\n            this._scrollTop = 0;\n            this._scrollLeft = 0;\n\n            this._lock = false;\n\n            this.calcAll();\n        }\n\n        get offsetWidth() {\n            return this._offsetWidth;\n        }\n        get offsetHeight() {\n            return this._offsetHeight;\n        }\n        get width() {\n            return this._width;\n        }\n        get height() {\n            return this._height;\n        }\n        get scrollTop() {\n            return this._scrollTop;\n        }\n        get scrollLeft() {\n            return this._scrollLeft;\n        }\n        get all() {\n            return {\n                offsetWidth: this.offsetWidth,\n                offsetHeight: this.offsetHeight,\n                width: this.width,\n                height: this.height,\n                scrollTop: this.scrollTop,\n                scrollLeft: this.scrollLeft\n            };\n        }\n\n        calcOffsetWidth() {\n            this._offsetWidth = this._body[this._prefix2 + 'Width'];\n            return this.offsetWidth;\n        }\n        calcOffsetHeight() {\n            this._offsetHeight = this._body[this._prefix2 + 'Height'];\n            return this.offsetHeight;\n        }\n        calcWidth() {\n            this._width = this._frame1[this._prefix1 + 'Width'];\n            return this.width;\n        }\n        calcHeight() {\n            this._height = this._frame1[this._prefix1 + 'Height'];\n            return this.height;\n        }\n        calcScrollTop() {\n            this._scrollTop = this._frame2.scrollTop || 0;\n            return this.scrollTop;\n        }\n        calcScrollLeft() {\n            this._scrollLeft = this._frame2.scrollLeft || 0;\n            return this.scrollLeft;\n        }\n        calcAll() {\n            this.calcOffsetWidth();\n            this.calcOffsetHeight();\n            this.calcWidth();\n            this.calcHeight();\n            this.calcScrollTop();\n            this.calcScrollLeft();\n            return this.all;\n        }\n\n        get lock() {\n            return this._lock;\n        }\n\n        set lock(bool) {\n            this._lock = bool;\n\n            if (this._lock) {\n                this._body.style.top = -this.calcScrollTop() + 'px';\n                this._body.style.left = -this.calcScrollLeft() + 'px';\n\n                let scrollBarWidth = this.calcOffsetWidth();\n                let scrollBarHeight = this.calcOffsetHeight();\n\n                this._html.style.top = '0px';\n                this._html.style.left = '0px';\n                this._html.style.position = 'fixed';\n                this._body.style.position = 'fixed';\n                this._html.style.width = '100%';\n                this._body.style.width = '100%';\n\n                let offsetWidth = this.calcOffsetWidth();\n                let offsetHeight = this.calcOffsetHeight();\n                scrollBarWidth = offsetWidth - scrollBarWidth;\n                scrollBarHeight = offsetHeight - scrollBarHeight;\n\n                this._body.style.width = offsetWidth - scrollBarWidth + 'px';\n                this._body.style.height = offsetHeight - scrollBarHeight + 'px';\n            } else {\n                let scrollTop = Math.abs(parseFloat(this._body.style.top));\n                let scrollLeft = Math.abs(parseFloat(this._body.style.left));\n\n                this._html.style.position = '';\n                this._html.style.top = '';\n                this._html.style.left = '';\n                this._html.style.width = '';\n                this._body.style.position = '';\n                this._body.style.top = '';\n                this._body.style.left = '';\n                this._body.style.width = '';\n\n                this._window.scroll({\n                    top: scrollTop,\n                    left: scrollLeft,\n                    behavior: 'instant'\n                });\n            }\n        }\n    }\n\n    /**\n     * @param {HTMLElement} element\n     * @returns {Boolean}\n     */\n    const isElementInViewport = element => !!getBoundsViewportIntersection(element.getBoundingClientRect()).ratio;\n\n    /**\n     * @param {DOMRect} bounds\n     * @returns {Object}\n     */\n    const getBoundsViewportIntersection = bounds => {\n        const viewport = new Viewport();\n\n        if (bounds.right < 0 || bounds.bottom < 0 || bounds.left > viewport.width || bounds.top > viewport.height) {\n            return {\n                x: 0,\n                y: 0,\n                ratio: 0\n            };\n        }\n\n        const offTop = bounds.top < 0;\n        const offBottom = bounds.top + bounds.height > viewport.height;\n        const offLeft = bounds.left < 0;\n        const offRight = bounds.left + bounds.width > viewport.width;\n\n        if (!offTop && !offBottom && !offLeft && !offRight) {\n            return {\n                x: 100,\n                y: 100,\n                ratio: 100\n            };\n        }\n\n        let offY = 0;\n        let offX = 0;\n\n        if (offTop) {\n            offY = Math.abs(bounds.top);\n        }\n\n        if (offBottom) {\n            offY = bounds.top + bounds.height - viewport.height;\n        }\n\n        if (offLeft) {\n            offX = Math.abs(bounds.left);\n        }\n\n        if (offRight) {\n            offX = bounds.left + bounds.width - viewport.width;\n        }\n\n        const percentageX = roundPercentage(((bounds.width - offX) * 100) / (bounds.width || 1));\n        const percentageY = roundPercentage(((bounds.height - offY) * 100) / (bounds.height || 1));\n\n        return {\n            x: percentageX,\n            y: percentageY,\n            ratio: Math.min(percentageX, percentageY)\n        };\n    };\n\n    const userAgent = navigator.userAgent.toLowerCase();\n\n    const vendorsPrefixes = ['WebKit', 'Moz', 'O', 'Ms', ''];\n\n    const MutationObserver = (() => {\n        for (let i = 0; i < vendorsPrefixes.length; i++) {\n            if (vendorsPrefixes[i] + 'MutationObserver' in window) {\n                return window[vendorsPrefixes[i] + 'MutationObserver'];\n            }\n        }\n\n        return false;\n    })();\n\n    const transitionEndEventName = (() => {\n        const el = document.createElement('div');\n\n        const transEndEventNames = {\n            WebkitTransition: 'webkitTransitionEnd',\n            MozTransition: 'transitionend',\n            OTransition: 'oTransitionEnd otransitionend',\n            msTransition: 'MSTransitionEnd',\n            transition: 'transitionend'\n        };\n\n        for (let name in transEndEventNames) {\n            if (el.style[name] !== undefined) {\n                return transEndEventNames[name];\n            }\n        }\n\n        return false;\n    })();\n\n    const intersectionObserverThreshold$1 = (segments = 1) => {\n        let array = [];\n        for (let i = 0; i < segments; i++) {\n            array.push((2 * i) / 100);\n        }\n        return array;\n    };\n\n    const ID = uniqueID();\n    const threshold = intersectionObserverThreshold$1(50);\n\n    /**\n     *\n     * TODO: find a way to get a recap of what Resource items were loaded and what failed in collection list...\n     */\n    class Loader {\n        constructor(options = {}) {\n            this._options = {\n                ...{\n                    srcAttributes: {\n                        src: !!!options.lazy ? 'src' : 'data-src',\n                        srcset: !!!options.lazy ? 'srcset' : 'data-srcset'\n                    },\n                    sizesAttributes: {\n                        sizes: !!!options.lazy ? 'sizes' : 'data-sizes',\n                        media: !!!options.lazy ? 'media' : 'data-media'\n                    },\n                    lazy: false,\n                    playthrough: false,\n                    backgrounds: true,\n                    sequential: false\n                },\n                ...options\n            };\n\n            this._collection = []; // resources (array of type Resource)\n            this._queue = new Map(); // loading resources\n\n            this._load = null; // main load Promise\n\n            this._percentage = 0; // loading percentage\n            this._state = 0; // 0: inactive - 1: busy\n\n            if (!isIntersectionObserverSupported) {\n                this.manuallyObservedElements = [];\n\n                const manuallyObserve = () =>\n                    this.manuallyObservedElements.filter(item => !item.intersected).forEach(item => {\n                        if (!item.intersected && isElementInViewport(item.element)) {\n                            item.intersected = true;\n                            item.element.dispatchEvent(new CustomEvent(`intersected__${ID}`));\n                        }\n                    });\n\n                window.addEventListener('scroll', manuallyObserve);\n                window.addEventListener('resize', manuallyObserve);\n                window.addEventListener('load', manuallyObserve);\n            }\n        }\n\n        /**\n         * @returns {Number} percentage\n         */\n        get percentage() {\n            return this._percentage;\n        }\n\n        /**\n         * @param {(Array|HTMLElement)} collection\n         */\n        set collection(collection) {\n            if (this._state === 0) {\n                if (collection instanceof NodeList) {\n                    collection = [...collection];\n                }\n\n                if (collection instanceof HTMLElement) {\n                    collection = find(collection, this._options);\n                }\n\n                if (typeof collection === 'string') {\n                    collection = [new Resource({ url: collection })];\n                }\n\n                if (Resource.isResource(collection)) {\n                    collection = [collection];\n                }\n\n                if (Array.isArray(collection)) {\n                    this._collection = [];\n\n                    collection.forEach(item => {\n                        const pushCheck = resource => {\n                            if (resource.type === 'image' || resource.type === 'video' || resource.type === 'audio' || (resource.type === 'iframe' && resource.consistent)) {\n                                this._collection.push(resource);\n\n                                return;\n                            }\n\n                            console.warn(\"Couldn't add resource to collection\", resource);\n                        };\n\n                        if (item instanceof HTMLElement) {\n                            find(item, this._options).forEach(resource => pushCheck(new Resource(resource)));\n                        }\n\n                        if (typeof item === 'string') {\n                            pushCheck(new Resource({ url: item }));\n                        }\n\n                        if (Resource.isResource(item)) {\n                            pushCheck(item);\n                        }\n                    });\n                }\n            }\n        }\n\n        /**\n         *\n         * @returns {Array} collection\n         */\n        get collection() {\n            return this._collection;\n        }\n\n        /**\n         *\n         * @returns {void}\n         */\n        abort() {\n            if (this._state === 0) {\n                return;\n            }\n\n            this._state = 0;\n\n            this._queue.forEach((data, element) => element.dispatchEvent(new CustomEvent(`abort__${ID}`)));\n        }\n\n        /**\n         *\n         * @returns {Promise}\n         */\n        load() {\n            this._load = new LoaderPromise((resolve, reject, progress) => {\n                if (this._state === 1) {\n                    reject('This Loader instance is already in progress');\n                }\n\n                if (!this._collection.length) {\n                    reject('Resources collection is empty');\n                }\n\n                this._state = 1;\n\n                if (this._options.sequential) {\n                    let loaded = 0;\n                    const pipeline = () => {\n                        if (this._state === 0) {\n                            reject('Loader instance aborted');\n\n                            this._collection = [];\n\n                            return;\n                        }\n\n                        this.fetch(this._collection[loaded])\n                            .catch(payload => {\n                                console.warn(`${payload.event.detail.message}: ${payload.resource.url}`);\n\n                                return payload;\n                            })\n                            .then(payload => {\n                                if (this._state !== 0) {\n                                    loaded++;\n                                }\n\n                                this._percentage = (loaded / this._collection.length) * 100;\n\n                                // TODO: a more robust way to skip progress call in a then from a catch, possibly inside LoaderPromise?\n                                if (this._state !== 0) {\n                                    progress(payload);\n                                }\n\n                                if (loaded < this._collection.length) {\n                                    pipeline();\n\n                                    return;\n                                }\n\n                                this._state = 0;\n\n                                resolve(payload);\n                            });\n                    };\n\n                    pipeline();\n                } else {\n                    let loaded = 0;\n\n                    for (let i = 0; i < this._collection.length; i++) {\n                        if (this._state === 0) {\n                            reject('Loader instance aborted');\n\n                            this._collection = [];\n\n                            break;\n                        }\n\n                        this.fetch(this._collection[i])\n                            .catch(payload => {\n                                console.warn(`${payload.event.detail.message}: ${payload.resource.url}`);\n\n                                return payload;\n                            })\n                            .then(payload => {\n                                if (this._state !== 0) {\n                                    loaded++;\n                                }\n\n                                this._percentage = (loaded / this._collection.length) * 100;\n\n                                // TODO: a more robust way to skip progress call in a then from a catch, possibly inside LoaderPromise?\n                                if (this._state !== 0) {\n                                    progress(payload);\n                                }\n\n                                if (loaded >= this._collection.length) {\n                                    this._state = 0;\n\n                                    resolve();\n                                }\n                            });\n                    }\n                }\n            });\n\n            return this._load;\n        }\n\n        /**\n         *\n         * @param {Resource} resource\n         * @returns {Promise}\n         */\n        fetch(resource) {\n            return new Promise((resolve, reject) => {\n                const isConsistent = resource.consistent && document.body.contains(resource.element);\n                const hasSources = isConsistent && resource.element.querySelectorAll('source').length;\n                const createdElement = document.createElement(resource.tagName);\n\n                let mainEventsTarget = createdElement;\n\n                if (resource.type === 'iframe') {\n                    createdElement.style.visibility = 'hidden';\n                    createdElement.style.position = 'fixed';\n                    createdElement.style.top = '-999px';\n                    createdElement.style.left = '-999px';\n                    createdElement.style.width = '1px';\n                    createdElement.style.height = '1px';\n                    document.body.appendChild(createdElement);\n                }\n\n                if (isConsistent) {\n                    copyAttributes(createdElement, resource.element, Object.values(this._options.srcAttributes));\n                    copyAttributes(createdElement, resource.element, Object.values(this._options.sizesAttributes));\n\n                    if (hasSources) {\n                        [...resource.element.querySelectorAll('source')].forEach(source => {\n                            const createdSource = document.createElement('source');\n                            copyAttributes(createdSource, source, Object.values(this._options.srcAttributes));\n                            copyAttributes(createdSource, source, Object.values(this._options.sizesAttributes));\n                            createdElement.append(createdSource);\n                        });\n                    }\n\n                    if (resource.tagName === 'picture') {\n                        // picture elements event listeners need to be attached to inner img elements\n                        const img = resource.element.querySelector('img');\n                        const createdImg = document.createElement('img');\n                        copyAttributes(createdImg, img, Object.values(this._options.srcAttributes));\n                        copyAttributes(createdImg, img, Object.values(this._options.sizesAttributes));\n                        createdElement.append(createdImg);\n                        mainEventsTarget = createdImg;\n                    }\n                }\n\n                const finishPromise = (event, resolver) => {\n                    if (isConsistent) {\n                        switchAttributes(resource.element, this._options.srcAttributes);\n                        switchAttributes(resource.element, this._options.sizesAttributes);\n\n                        if (hasSources) {\n                            [...resource.element.querySelectorAll('source')].forEach(source => {\n                                switchAttributes(source, this._options.srcAttributes);\n                                switchAttributes(source, this._options.sizesAttributes);\n                            });\n                        }\n\n                        if (resource.type === 'video' || resource.type === 'audio') {\n                            resource.element.load();\n                        }\n\n                        if (resource.type === 'iframe') {\n                            createdElement.parentElement.removeChild(createdElement);\n                        }\n                    }\n\n                    this._queue.delete(createdElement);\n\n                    resolver({\n                        event: event,\n                        resource: resource\n                    });\n                };\n\n                const prepareLoad = () => {\n                    if (isConsistent) {\n                        switchAttributes(createdElement, this._options.srcAttributes);\n                        switchAttributes(createdElement, this._options.sizesAttributes);\n\n                        if (hasSources) {\n                            [...createdElement.querySelectorAll('source')].forEach(source => {\n                                switchAttributes(source, this._options.srcAttributes);\n                                switchAttributes(source, this._options.sizesAttributes);\n                            });\n                        }\n                    } else {\n                        createdElement.setAttribute('src', resource.url);\n                    }\n\n                    if (resource.type === 'video' || resource.type === 'audio') {\n                        createdElement.load();\n                    }\n                };\n\n                const dispatchEvent = (eventName = '', data = {}) => {\n                    const event = new CustomEvent(eventName, {\n                        detail: {\n                            ...data,\n                            ...{\n                                resource: resource\n                            }\n                        }\n                    });\n\n                    if (resource.element) {\n                        resource.element.dispatchEvent(event);\n                    }\n\n                    document.dispatchEvent(event);\n\n                    return event;\n                };\n\n                let queuer = {\n                    resource: resource,\n                    observer: null,\n                    element: createdElement\n                };\n\n                createdElement.addEventListener(`abort__${ID}`, () => {\n                    removeAttributes(createdElement, Object.keys(this._options.srcAttributes));\n                    removeAttributes(createdElement, Object.values(this._options.srcAttributes));\n                    removeAttributes(createdElement, Object.keys(this._options.sizesAttributes));\n                    removeAttributes(createdElement, Object.values(this._options.sizesAttributes));\n\n                    if (hasSources) {\n                        [...createdElement.querySelectorAll('source')].forEach(source => {\n                            removeAttributes(source, Object.keys(this._options.srcAttributes));\n                            removeAttributes(source, Object.values(this._options.srcAttributes));\n                            removeAttributes(source, Object.keys(this._options.sizesAttributes));\n                            removeAttributes(source, Object.values(this._options.sizesAttributes));\n                        });\n                    }\n\n                    const dispatchedEvent = dispatchEvent('resourceError', { type: 'abortion', message: 'Resource load aborted' });\n\n                    finishPromise(dispatchedEvent, reject);\n                });\n\n                mainEventsTarget.addEventListener('error', e => {\n                    const dispatchedEvent = dispatchEvent('resourceError', {\n                        type: e.type,\n                        message: 'Resource failed to load' // TODO: a way to retrieve http error code ?\n                    });\n\n                    finishPromise(dispatchedEvent, reject);\n                });\n\n                if (resource.type === 'image' || resource.type === 'iframe') {\n                    mainEventsTarget.addEventListener('load', e => {\n                        if (e.target.tagName.toLowerCase() === 'iframe' && !e.target.getAttribute('src')) {\n                            return; // iframes fire \"load\" event when ready in dom\n                        }\n\n                        const dispatchedEvent = dispatchEvent('resourceLoad', {\n                            type: e.type\n                        });\n\n                        finishPromise(dispatchedEvent, resolve);\n                    });\n                }\n\n                if (resource.type === 'audio' || resource.type === 'video') {\n                    mainEventsTarget.addEventListener(this._options.playthrough ? 'canplaythrough' : 'loadedmetadata', e => {\n                        const dispatchedEvent = dispatchEvent('resourceLoad', {\n                            type: e.type\n                        });\n\n                        finishPromise(dispatchedEvent, resolve);\n                    });\n                }\n\n                if (resource.element instanceof HTMLElement && this._options.lazy) {\n                    if (isIntersectionObserverSupported) {\n                        queuer.observer = new IntersectionObserver(\n                            (entries, observer) => {\n                                entries.forEach(entry => {\n                                    if (entry.intersectionRatio > 0) {\n                                        observer.unobserve(entry.target);\n\n                                        prepareLoad();\n                                    }\n                                });\n                            },\n                            {\n                                root: null,\n                                rootMargin: '0px',\n                                threshold: threshold\n                            }\n                        );\n\n                        queuer.observer.observe(resource.element);\n                    } else {\n                        if (isElementInViewport(resource.element)) {\n                            prepareLoad();\n                        } else {\n                            this.manuallyObservedElements.push({\n                                element: resource.element,\n                                intersected: false\n                            });\n\n                            resource.element.addEventListener(`intersected__${ID}`, () => prepareLoad());\n                        }\n                    }\n\n                    this._queue.set(resource.element, queuer);\n                } else {\n                    this._queue.set(createdElement, queuer);\n\n                    prepareLoad();\n                }\n            });\n        }\n    }\n\n    return Loader;\n\n})));\n"],"file":"loader.min.js"}