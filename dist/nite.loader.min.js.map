{"version":3,"sources":["nite.loader.js"],"names":["window","document","$","undefined","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","prototype","Event","Array","findIndex","Object","defineProperty","value","predicate","this","TypeError","o","len","length","thisArg","arguments","k","kValue","call","configurable","writable","isArray","arg","toString","filter","func","res","t","c","i","String","startsWith","search","pos","substr","includes","start","indexOf","generateInstanceID","Math","floor","random","pluginName","pluginMethod","pluginInstance","detachEventListener","element","events","keys","privateEventsStorage","forEach","key","replace","type","split","join","removeEventListener","handler","attachEventListener","once","count","_handler","addEventListener","hyphensToCamelCase","string","g","toUpperCase","capitalize","charAt","slice","nodelistToArray","nodelist","isInArray","needle","stack","isVisible","getComputedStyle","bodyEl","getElementsByTagName","winWidth","innerWidth","documnt","documentElement","clientWidth","winHeight","innerHeight","clientHeight","rect","getBoundingClientRect","right","bottom","left","top","isHTMLObject","HTMLElement","e","nodeType","style","ownerDocument","isLoaded","source","privateCache","currentSrc","complete","readyState","isBroken","naturalWidth","videoWidth","decodeResource","resource","formatExtensions","image","audio","video","formatTagNames","output","format","extension","tag","exists","breakLoop","formatCandidate","RegExp","test","matches64","match","matches","tagName","toLowerCase","allTags","values","tags","SingleLoader","[object Object]","options","_settings","srcAttr","srcsetAttr","playthrough","visible","_id","_idEvent","_busy","_element","_resource","_format","_done","_success","_error","_callback","src","push","thisArguments","apply","data","id","info","_tag","_exists","createElement","dataset","picture","closest","querySelectorAll","el","setAttribute","isPlaythroughModeNormal","isPlaythroughModeFull","sources","isFullyBuffered","media","buffered","round","end","seekable","callMediaLoad","sourcesErrorId","thisSource","load","onProgressReplacementInterval","setInterval","isError","duration","currentTime","paused","play","clearInterval","pause","callback","status","getAttribute","srcset","removeAttribute","Loader","_collection","_collectionLoaded","_collectionInstances","_collectionPending","_resourcesLoaded","backgrounds","attributes","contains","percentage","_progress","_loop","_abort","_loaded","_complete","collection","item","targetsExtended","targets","targetsFilter","targetsTags","target","children","x","targetSource","targetsBg","backgroundImage","url","attr","hasOwnProperty","sequentialMode","sequential","thisLoadId","thisLoadIndex","thisLoadInstance","instance","done","aProgress","parseFloat","toFixed","thisResource","_func","resources","abort","define","amd","exports","module","$window","throttle","wait","context","timeout","callbackArgs","later","setTimeout","methodCollection","fn","originalUserOptions","settings","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","isFunction","each","$element","uniqueMethodPluginName","collect","progress","trigger","pluginPrefix","eventName","off","thisMethodCollection","is","on","clearTimeout","parseInt","isNaN","isFinite","jQuery"],"mappings":"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","sourcesContent":["/*! Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\n(function (window, document, $, undefined) {\n    'use strict';\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    (function () {\n        if (typeof window.CustomEvent === \"function\") {\n            return false;\n        }\n        function CustomEvent(event, params) {\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            const evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n        CustomEvent.prototype = window.Event.prototype;\n        window.CustomEvent = CustomEvent;\n    })();\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex#Polyfill\n    if (!Array.prototype.findIndex) {\n        Object.defineProperty(Array.prototype, 'findIndex', {\n            value: function (predicate) {\n                if (this == null) {\n                    throw new TypeError('\"this\" is null or not defined');\n                }\n                let\n                    o = Object(this),\n                    len = o.length >>> 0;\n                if (typeof predicate !== 'function') {\n                    throw new TypeError('predicate must be a function');\n                }\n                let\n                    thisArg = arguments[1],\n                    k = 0;\n                while (k < len) {\n                    let kValue = o[k];\n                    if (predicate.call(thisArg, kValue, k, o)) {\n                        return k;\n                    }\n                    k++;\n                }\n                return -1;\n            },\n            configurable: true,\n            writable: true\n        });\n    }\n\n    // https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#Polyfill\n    Array.isArray = Array.isArray || function (arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter#Polyfill\n    Array.prototype.filter = Array.prototype.filter || function (func, thisArg) {\n        'use strict';\n        if (!((typeof func === 'Function' || typeof func === 'function') && this)) {\n            throw new TypeError();\n        }\n        let\n            len = this.length >>> 0,\n            res = new Array(len),\n            t = this, c = 0, i = -1;\n        if (thisArg === undefined) {\n            while (++i !== len) {\n                if (i in this) {\n                    if (func(t[i], i, t)) {\n                        res[c++] = t[i];\n                    } else {\n                        while (++i !== len) {\n                            if (i in this) {\n                                if (func.call(thisArg, t[i], i, t)) {\n                                    res[c++] = t[i];\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        res.length = c;\n        return res;\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith#Polyfill\n    String.prototype.startsWith = String.prototype.startsWith || function (search, pos) {\n        return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n    };\n\n    // https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n    String.prototype.includes = String.prototype.includes || function (search, start) {\n        'use strict';\n        if (typeof start !== 'number') {\n            start = 0;\n        }\n        if (start + search.length > this.length) {\n            return false;\n        } else {\n            return this.indexOf(search, start) !== -1;\n        }\n    };\n\n    const\n        generateInstanceID = function () {\n            return Math.floor(Math.random() * (9999 - 1000)) + 1000;\n        },\n        pluginPrefix = 'nite',\n        pluginMethod = pluginPrefix + 'Load',\n        pluginName = pluginMethod + 'er',\n        pluginInstance = generateInstanceID(),\n        eventNamespaceParserSeparator = '__namespace__',\n        detachEventListener = (element, events) => {\n\n            if (!element || typeof events !== 'string') {\n                return;\n            }\n\n            if (events.startsWith('.')) {\n                Object.keys(privateEventsStorage).forEach(key => {\n                    if (key.replace(eventNamespaceParserSeparator, '.').includes(events) && privateEventsStorage[key].element === element) {\n                        detachEventListener(element, key.replace(eventNamespaceParserSeparator, '.'));\n                    }\n                });\n            } else {\n\n                events = events.split('.');\n\n                const\n                    type = events[0],\n                    namespace = events[1];\n\n                if (namespace) {\n                    events = events.join(eventNamespaceParserSeparator);\n                }\n\n                if (events in privateEventsStorage) {\n                    element.removeEventListener(type, privateEventsStorage[events].handler);\n                    delete privateEventsStorage[events];\n                }\n\n            }\n\n        },\n        attachEventListener = (element, events, handler, once) => {\n\n            if (!element || typeof events !== 'string' || typeof handler !== 'function') {\n                return;\n            }\n\n            events = events.split('.');\n\n            const\n                type = events[0],\n                namespace = events[1];\n\n            if (namespace) {\n                events = events.join(eventNamespaceParserSeparator);\n            }\n\n            privateEventsStorage[events] = {\n                element: element,\n                count: 0,\n                once: false\n            };\n\n            if (true === once) {\n                let _handler = handler;\n                handler = function (event) {\n                    if (events in privateEventsStorage) {\n                        privateEventsStorage[events].count++;\n                        if (privateEventsStorage[events].once && privateEventsStorage[events].count > 1) {\n                            return;\n                        }\n                        _handler.call(this, event);\n                    }\n                    detachEventListener(element, events);\n                }\n            } else {\n                once = false;\n            }\n\n            privateEventsStorage[events] = {\n                ...privateEventsStorage[events], ...{\n                    handler: handler,\n                    once: once\n                }\n            };\n\n            element.addEventListener(type, privateEventsStorage[events].handler, { once: once });\n\n        },\n        hyphensToCamelCase = string => {\n            return string.replace(/-([a-z])/g, g => g[1].toUpperCase());\n        },\n        capitalize = string => {\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        },\n        nodelistToArray = nodelist => {\n            return [...nodelist];\n        },\n        isInArray = (needle, stack) => {\n            return stack.indexOf(needle) > -1;\n        },\n        // TODO: intersection observer\n        isVisible = element => {\n\n            if (window.getComputedStyle(element, 'display') === 'none') {\n                return false;\n            }\n\n            const\n                bodyEl = document.getElementsByTagName('body')[0],\n                winWidth = window.innerWidth || documnt.documentElement.clientWidth || bodyEl.clientWidth,\n                winHeight = window.innerHeight || documnt.documentElement.clientHeight || bodyEl.clientHeight,\n                rect = element.getBoundingClientRect();\n\n            return !(rect.right < 0 || rect.bottom < 0 || rect.left > winWidth || rect.top > winHeight);\n\n        },\n        isHTMLObject = element => {\n            if (typeof element !== 'object') {\n                return false;\n            }\n            try {\n                return element instanceof HTMLElement;\n            } catch (e) {\n                return element.nodeType === 1 && typeof element.style === 'object' && typeof element.ownerDocument === 'object';\n            }\n        },\n        isLoaded = source => {\n            return (\n                (\n                    typeof source === 'string'\n                    &&\n                    isInArray(source, privateCache)\n                )\n                ||\n                (\n                    isHTMLObject(source)\n                    &&\n                    ('currentSrc' in source && source.currentSrc.length > 0)\n                    &&\n                    (\n                        ('complete' in source && source.complete)\n                        ||\n                        ('readyState' in source && source.readyState >= 2))\n                )\n            );\n        },\n        isBroken = source => {\n            return (\n                isLoaded(source)\n                &&\n                (\n                    (\n                        typeof source === 'object'\n                        &&\n                        (\n                            ('naturalWidth' in source && Math.floor(source.naturalWidth) === 0)\n                            ||\n                            ('videoWidth' in source && source.videoWidth === 0)\n                        )\n                    )\n                    ||\n                    typeof source === 'string'\n                )\n            );\n        },\n        decodeResource = resource => {\n\n            const\n                formatExtensions = {\n                    image: 'jp[e]?g|jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\n                    audio: 'mp3|ogg|oga|spx|ogg|wav',\n                    video: 'mp4|ogv|webm'\n                },\n                formatTagNames = {\n                    image: 'img|picture|source',\n                    audio: 'audio|source',\n                    video: 'video|source'\n                },\n                base64Heading = '\\;base64\\,';\n\n            let\n                output = {\n                    format: null,\n                    extension: null,\n                    tag: null,\n                    exists: false\n                },\n                breakLoop = false;\n\n            resource.resource = resource.resource.split('?')[0];\n            resource.resource = resource.resource.split('#')[0];\n            Object.keys(formatExtensions).forEach(formatCandidate => {\n\n                if (breakLoop) {\n                    return;\n                }\n\n                if (new RegExp('(\\.(' + formatExtensions[formatCandidate] + ')$)|' + base64Heading, 'g').test(resource.resource)) {\n\n                    if (new RegExp(base64Heading, 'g').test(resource.resource)) {\n\n                        let matches64 = resource.resource.match(new RegExp('^data:' + formatCandidate + '\\/(' + formatExtensions[formatCandidate] + ')', 'g'));\n\n                        if (null === matches64) {\n                            return;\n                        }\n\n                        matches64 = matches64[0];\n\n                        output.format = formatCandidate;\n                        output.extension = matches64.replace('data:' + formatCandidate + '/', '');\n                        output.tag = formatTagNames[formatCandidate];\n\n                        breakLoop = true;\n\n                    } else {\n\n                        let matches = resource.resource.match(new RegExp(formatExtensions[formatCandidate], 'g'));\n\n                        if (matches) {\n\n                            output.format = formatCandidate;\n                            output.extension = matches[0];\n                            output.tag = formatTagNames[formatCandidate];\n\n                            breakLoop = true;\n\n                        }\n\n                    }\n\n                }\n\n            });\n\n            if (isHTMLObject(resource.element)) {\n\n                let\n                    tagName = resource.element.tagName.toLowerCase(),\n                    allTags = '';\n\n                Object.values(formatTagNames).forEach(tags => {\n                    allTags += '|' + tags;\n                });\n\n                allTags = allTags.split('|');\n\n                if (isInArray(tagName, allTags)) {\n                    output.tag = tagName;\n                    output.exists = true;\n                    if( output.format === null ){\n                        Object.keys(formatTagNames).forEach(format => {\n                            if( formatTagNames[format].includes(output.tag) ){\n                                output.format = format;\n                            }\n                        });\n                    }\n                }\n\n            }\n\n            if (output.tag.includes('|')) {\n                output.tag = output.tag.split('|')[0];\n            }\n\n            return output;\n\n        };\n\n    let\n        privateEventsStorage = {},\n        privateCache = [];\n\n    // TODO: Promise support maybe\n    // TODO: think about useful vars in callback args (this class is not public but its vars are returned in .progress() callback)\n    class SingleLoader {\n\n        constructor(options) {\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n\n            if (!this._settings.srcAttr.startsWith('data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n\n            if (!this._settings.srcsetAttr.startsWith('data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this._id = null;\n            this._idEvent = null;\n            this._busy = false;\n\n            this._element = null;\n            this._resource = null;\n            this._format = null;\n\n            this._done = () => { };\n            this._success = () => { };\n            this._error = () => { };\n\n            this._callback = (e) => {\n\n                this._busy = false;\n\n                const src = this._element.currentSrc || this._element.src;\n\n                if (!isInArray(src, privateCache)) {\n                    privateCache.push(src);\n                }\n\n                let thisArguments = [this._element, e.type, src, this._id];\n\n                this[e.type !== 'error' ? '_success' : '_error'].apply(this, thisArguments);\n                this._done.apply(this, thisArguments);\n\n            };\n\n        }\n\n        set resource(data) {\n\n            if (typeof data === 'object' && 'id' in data && 'element' in data && 'resource' in data) {\n\n                this._id = data.id;\n                this._element = data.element;\n                this._resource = data.resource;\n\n                let info = decodeResource({ resource: this._resource, element: this._element });\n                this._tag = info.tag;\n                this._exists = info.exists;\n                this._format = info.format;\n\n                if (!this._exists) {\n                    this._element = document.createElement(this._tag);\n                    this._element.dataset[this.srcAttr] = this._resource;\n                }\n\n                this._idEvent = this._element[pluginInstance + '_IDEvent'];\n                this._busy = this._idEvent !== undefined;\n                this._idEvent = this._busy ? this._idEvent : pluginName + '_unique_' + this._element.tagName + '_' + generateInstanceID();\n\n            }\n\n        }\n\n        get resource() {\n            return this._resource;\n        }\n\n        /**\n         *\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\n         */\n        load() {\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n\n                if (!this._busy) {\n                    // TODO: mayabe this should be called in this._callback\n                    detachEventListener(this._element, '.' + this._idEvent);\n                }\n\n                this._callback(new CustomEvent(!isBroken(this._exists ? this._element : this._resource) ? 'load' : 'error'));\n\n                return false;\n\n            } else if (this._exists && this._settings.visible && !isVisible(this._element)) {\n\n                return false;\n\n            } else {\n\n                if (this._format === 'image') {\n\n                    attachEventListener(this._element, 'load.' + this._idEvent, this._callback, !this._busy);\n                    attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                    const picture = this._element.closest('picture');\n\n                    if (picture && 'HTMLPictureElement' in window) {\n\n                        delete this._element.dataset[this.srcsetAttr];\n                        delete this._element.dataset[this.srcAttr];\n\n                        picture.querySelectorAll('source[' + this._settings.srcsetAttr + ']').forEach((el) => {\n                            el.setAttribute('srcset', el.dataset[this.srcAttr]);\n                            delete el.dataset[this.srcAttr];\n                        });\n\n                    } else {\n\n                        if (this._element.matches('[' + this._settings.srcsetAttr + ']')) {\n                            this._element.setAttribute('srcset', this._element.dataset[this.srcsetAttr]);\n                            delete this._element.dataset[this.srcsetAttr];\n                        }\n\n                        if (this._element.matches('[' + this._settings.srcAttr + ']')) {\n                            this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                            delete this._element.dataset[this.srcAttr];\n                        }\n\n                    }\n\n                } else if (this._format === 'video' || this._format === 'audio') {\n\n                    const\n                        isPlaythroughModeNormal = true === this._settings.playthrough,\n                        isPlaythroughModeFull = 'full' === this._settings.playthrough,\n                        sources = this._element.querySelectorAll('source'),\n                        isFullyBuffered = function (media) {\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\n                        };\n\n                    let callMediaLoad = false;\n\n                    if (sources) {\n\n                        sources.forEach((source) => {\n\n                            if (source.matches('[' + this._settings.srcAttr + ']')) {\n\n                                source.setAttribute('src', source.dataset[this.srcAttr]);\n                                delete source.dataset[this.srcsetAttr];\n\n                                callMediaLoad = true;\n\n                            }\n\n                            attachEventListener(source, 'error.' + this._idEvent, (e) => {\n\n                                const sourcesErrorId = pluginName + '_error';\n\n                                source[pluginInstance + '_' + sourcesErrorId] = true;\n\n                                if (sources.length === nodelistToArray(sources).filter(thisSource => true === thisSource[pluginInstance + '_' + sourcesErrorId]).length) {\n                                    this._callback(e);\n                                }\n\n                            }, !this._busy);\n\n                        });\n\n                    } else if (this._element.matches('[' + this._settings.srcAttr + ']')) {\n\n                        this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                        delete this._element.dataset[this.srcAttr];\n\n                        attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                        callMediaLoad = true;\n\n                    }\n\n                    if (callMediaLoad) {\n                        this._element.load();\n                    }\n\n                    attachEventListener(this._element, 'loadedmetadata.' + this._idEvent, () => {\n\n                        if (!isPlaythroughModeNormal && !isPlaythroughModeFull) {\n                            this._callback(new CustomEvent('load'));\n                        }\n\n                        if (isPlaythroughModeFull) {\n\n                            let onProgressReplacementInterval = setInterval(() => {\n\n                                let isError = this._element.readyState > 0 && !this._element.duration;\n\n                                if (isError || isFullyBuffered(this._element)) {\n\n                                    this._element.currentTime = 0;\n\n                                    if (!isError && !this._busy && this._element.paused && this._element.matches('[autoplay]')) {\n                                        this._element.play();\n                                    }\n\n                                    clearInterval(onProgressReplacementInterval);\n\n                                    this._callback(new CustomEvent(!isError ? 'load' : 'error'));\n\n                                } else {\n\n                                    if (!this._element.paused) {\n                                        this._element.pause();\n                                    }\n\n                                    if (!this._busy) {\n                                        this._element.currentTime += 2;\n                                    }\n\n                                }\n\n                            }, 500);\n\n                            this._element[pluginName + '_' + this._idEvent] = onProgressReplacementInterval;\n\n                        }\n\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplay.' + this._idEvent, () => {\n                        if (isPlaythroughModeFull && this._element.currentTime === 0 && !isFullyBuffered(this._element)) {\n                            this._element.currentTime++;\n                        }\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplaythrough.' + this._idEvent, () => {\n                        if (isPlaythroughModeNormal) {\n                            this._callback(new CustomEvent('load'));\n                        }\n                    }, !this._busy);\n\n                } else {\n\n                    return false;\n\n                }\n\n                if (!this._busy) {\n                    this._element[pluginInstance + '_IDEvent'] = this._idEvent;\n                }\n\n            }\n\n            this._resource = this._element.currentSrc || this._element.src;\n\n            return !this._busy;\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            this._done = function (element, status, resource, id) {\n                callback.apply(this, [element, status, resource, id]);\n            };\n\n        };\n\n        abort() {\n\n            detachEventListener(this._element, '.' + this._idEvent);\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n                return;\n            }\n\n            const\n                src = this._element.getAttribute('srcset'),\n                srcset = this._element.getAttribute('src');\n\n            if (undefined !== src) {\n                this._element.dataset[this.srcAttr] = src;\n                this._element.setAttribute(this._settings.srcAttr, src);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n            if (undefined !== srcset) {\n                this._element.dataset[this.srcsetAttr] = srcset;\n                this._element.setAttribute(this._settings.srcsetAttr, srcset);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n        }\n\n    }\n\n    // TODO: Promise support\n    // TODO: private vars\n    // TODO: refactory succes/done/progress code...\n    class Loader {\n\n        constructor(options) {\n\n            this._collection = [];\n            this._collectionLoaded = [];\n            this._collectionInstances = [];\n            this._collectionPending = [];\n            this._resourcesLoaded = [];\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                    backgrounds: false,\n                    attributes: []\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n            if (!this._settings.srcAttr.startsWith('data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n            if (!this._settings.srcsetAttr.startsWith('data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            if (typeof this._settings.attributes === 'string') {\n                this._settings.attributes = this._settings.attributes.split(this._settings.attributes.contains(',') ? ',' : ' ');\n            }\n            if (!Array.isArray(this._settings.attributes)) {\n                this._settings.attributes = [];\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this.percentage = 0;\n\n            this._done = () => { };\n            this._progress = () => { };\n            this._success = () => { };\n            this._error = () => { };\n            this._loop = this.load;\n\n            this._abort = false;\n            this._loaded = 0;\n            this._complete = false;\n            this._busy = false;\n\n        }\n\n        set collection(collection) {\n\n            if (!Array.isArray(collection)) {\n                collection = [];\n            }\n\n            collection.forEach(item => {\n\n                let element = {\n                    resource: '',\n                    element: null,\n                    id: generateInstanceID()\n                };\n\n                if (typeof item === 'string') {\n                    element.resource = item;\n                } else if (typeof item === 'object' && 'resource' in item) {\n                    element = { ...element, ...item };\n                } else {\n                    return;\n                }\n\n                this._collection.push(element);\n\n            });\n\n        }\n\n        get collection() {\n            return this._collection;\n        }\n\n        collect(element) {\n\n            const\n                targets = 'img, video, audio',\n                targetsExtended = targets + ', picture, source',\n                targetsFilter = '[' + this._settings.srcAttr + '], [' + this._settings.srcsetAttr + ']';\n\n            let\n                collection = [],\n                targetsTags = nodelistToArray(element.querySelectorAll(targets));\n\n            if (element.matches(targetsExtended)) {\n                targetsTags.push(element);\n            }\n\n            targetsTags = targetsTags.filter((target) => {\n                let children = nodelistToArray(target.children);\n                children = children.filter(x => x.matches(targetsExtended));\n                children = children.filter(x => x.matches(targetsFilter));\n                return target.matches(targetsFilter) || children.length;\n            });\n\n            targetsTags.forEach((target) => {\n                let targetSource = target;\n                if (!targetSource.matches(targetsFilter)) {\n                    targetSource = targetSource.querySelectorAll(targetsFilter);\n                    targetSource = [...targetSource][0];\n                }\n                collection.push({\n                    element: target,\n                    resource: targetSource.getAttribute(this._settings.srcAttr) || targetSource.getAttribute(this._settings.srcsetAttr)\n                });\n            });\n\n            if (true === this._settings.backgrounds) {\n                let targetsBg = nodelistToArray(element.querySelectorAll('*'));\n                targetsBg.push(element);\n                targetsBg = targetsBg.filter(target => !target.matches(targetsExtended));\n                targetsBg = targetsBg.filter(target => getComputedStyle(target).backgroundImage !== 'none');\n                targetsBg.forEach((target) => {\n\n                    const url = getComputedStyle(target).backgroundImage.match(/\\((.*?)\\)/);\n\n                    if (null === url || url.length < 2) {\n                        return true;\n                    }\n\n                    collection.push({\n                        element: target,\n                        resource: url[1].replace(/('|\")/g, '')\n                    });\n\n                });\n            }\n\n            if (this._settings.attributes.length) {\n                for (const attr in this._settings.attributes) {\n                    if (this._settings.attributes.hasOwnProperty(attr)) {\n\n                        nodelistToArray(element.querySelectorAll('[' + attr + ']:not(' + targetsExtended + ')')).forEach((target) => {\n                            collection.push({\n                                element: target,\n                                resource: target.getAttribute(attr)\n                            });\n                        });\n\n                        if (element.matches('[' + attr + ']') && !element.matches(targetsExtended)) {\n                            collection.push({\n                                element: element,\n                                resource: element.getAttribute(attr)\n                            });\n                        }\n\n                    }\n                }\n            }\n\n            this.collection = collection;\n\n        }\n\n        load() {\n\n            // resets pending elements (sequential opt helper array) every time we loop\n            this._collectionPending = [];\n\n            const sequentialMode = true === this._settings.sequential;\n\n            for (let i = 0; i < this._collection.length; i++) {\n\n                if (this._abort) {\n                    break;\n                }\n\n                let thisLoadId = this._collection[i].id,\n                    thisLoadIndex = this._collectionInstances.findIndex(x => x.id === thisLoadId),\n                    thisLoadInstance = new SingleLoader(this._settings);\n\n                if (thisLoadIndex === -1) {\n                    this._collectionInstances.push({ id: thisLoadId, instance: thisLoadInstance });\n                    thisLoadIndex = this._collectionInstances.findIndex(x => x.id === thisLoadId);\n                } else {\n                    this._collectionInstances[thisLoadIndex].instance = thisLoadInstance;\n                }\n\n                thisLoadInstance.resource = this._collection[i];\n\n                thisLoadInstance.done((element, status, resource, id) => {\n\n                    if (this._complete || this._abort) {\n                        return;\n                    }\n\n                    const aProgress = !isInArray(id, this._collectionLoaded);\n\n                    if (aProgress) {\n\n                        this._collectionLoaded.push(id);\n                        this._busy = false;\n\n                        this._loaded++;\n                        this.percentage = this._loaded / this._collection.length * 100;\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\n\n                        const thisResource = { resource: resource, status: status, element: element };\n                        this._resourcesLoaded.push(thisResource);\n                        this._progress.call(this, thisResource);\n                        this[status !== 'error' ? '_success' : '_error'].call(this, thisResource);\n                        // TODO: dispatch event on element maybe?\n                        // element.dispatchEvent(new CustomEvent(pluginPrefix + capitalize(status) + '.' + pluginPrefix));\n\n                    }\n\n                    if (this._loaded === this._collection.length) {\n\n                        this._done.call(this, this._resourcesLoaded);\n\n                        this._complete = true;\n\n                    } else if (aProgress && sequentialMode && this._collectionPending.length) {\n\n                        this._collectionPending = this._collectionPending.filter(x => x.id !== id);\n\n                        if (this._collectionPending.length) {\n                            this._busy = this._collectionPending[0].instance.load();\n                        }\n\n                    }\n\n                });\n\n                if (!sequentialMode || (sequentialMode && !this._busy)) {\n                    this._busy = thisLoadInstance.load();\n\n                } else if (sequentialMode && this._busy && (!this._settings.visible || !thisLoadInstance._exists || (this._settings.visible && thisLoadInstance._exists && isVisible(thisLoadInstance._element)))) {\n                    this._collectionPending.push({ id: thisLoadId, instance: thisLoadInstance });\n\n                }\n\n\n            }\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resources) {\n                callback.call(this, resources);\n            };\n\n            if (this._collection.length) {\n                this._done = _func;\n            } else {\n                _func();\n            }\n\n        };\n\n        progress(callback) {\n\n            if (typeof callback !== 'function')\n                return;\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._progress = _func;\n            }\n\n        };\n\n        success(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._success = _func;\n            }\n\n        };\n\n        error(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._error = _func;\n            }\n\n        };\n\n        abort() {\n\n            for (const key in this._collectionInstances) {\n                this._collectionInstances[key].instance.abort();\n            }\n\n            if (this._collection.length) {\n                this._abort = true;\n            }\n\n        };\n\n    }\n\n    // public interface\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    // requirejs\n    if (typeof define === 'function' && define.amd) {\n        define(capitalize(pluginName), Loader);\n        // nodejs\n    } else if ('object' === typeof exports) {\n        module.exports[capitalize(pluginName)] = Loader;\n        // vanilla\n    } else {\n        window[capitalize(pluginName)] = Loader;\n    }\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    // jQuery interface\n    // - - - - - - - - - - - - - - - - - - - -\n    if (!$) {\n        return undefined;\n    }\n\n    $[capitalize(pluginName)] = Loader;\n\n    const\n        $document = $(document),\n        $window = $(window),\n        // thanks https://gist.github.com/beaucharman/e46b8e4d03ef30480d7f4db5a78498ca\n        throttle = (callback, wait, context = this) => {\n            let timeout = null,\n                callbackArgs = null\n            const later = () => {\n                callback.apply(context, callbackArgs)\n                timeout = null\n            }\n            return function () {\n                if (!timeout) {\n                    callbackArgs = arguments\n                    timeout = setTimeout(later, wait)\n                }\n            }\n        };\n\n    let methodCollection = [];\n\n    $.fn[pluginMethod] = function (options) {\n\n        let originalUserOptions = options;\n\n        if (typeof options !== 'object') {\n            options = {};\n        }\n\n        let settings = {\n            ...{\n\n                srcAttr: 'data-src',\n                srcsetAttr: 'data-srcset',\n\n                visible: false,\n\n                sequential: false,\n\n                backgrounds: false,\n                extraAttrs: [],\n\n                playthrough: false,\n\n                early: false,\n                earlyTimeout: 0,\n\n                onProgress: () => { },\n                onLoad: () => { },\n                onError: () => { },\n\n                onComplete: () => { },\n\n            }, ...options\n        };\n\n        let callback = settings.onComplete;\n        if ($.isFunction(originalUserOptions)) {\n            callback = originalUserOptions;\n        }\n\n        return this.each(function (i) {\n\n            const\n                $element = $(this),\n                uniqueMethodPluginName = generateInstanceID() + i,\n                thisLoadInstance = new Loader(settings);\n\n            thisLoadInstance.collect(this);\n\n            methodCollection.push({\n                id: uniqueMethodPluginName,\n                instance: thisLoadInstance,\n                element: this,\n                timeout: null\n            });\n\n            thisLoadInstance.progress((resource) => {\n\n                $(resource.element).trigger(pluginPrefix + capitalize(resource.status) + '.' + pluginPrefix, [resource.element, resource.resource]);\n                $element.trigger(pluginPrefix + 'Progress.' + pluginPrefix, [this, resource]);\n\n                const thisArguments = [thisLoadInstance, resource];\n\n                if (typeof settings.onProgress === 'function') {\n                    settings.onProgress.apply(this, thisArguments);\n                }\n\n                let eventName = capitalize(resource.status);\n                if (typeof settings['on' + eventName] === 'function') {\n                    settings['on' + eventName].apply(this, thisArguments);\n                }\n\n            });\n\n            thisLoadInstance.done(resources => {\n\n                $element.trigger(pluginPrefix + 'Complete.' + pluginPrefix, [this, resources]);\n                callback.apply(this, [thisLoadInstance, resources]);\n\n                if (settings.visible) {\n                    // TODO: intersection observer\n                    $window.off('scroll.' + uniqueMethodPluginName);\n                }\n\n                // refresh other method calls for same el (omitting this one)\n                methodCollection = methodCollection.filter(x => x.id !== uniqueMethodPluginName);\n                methodCollection.forEach(thisMethodCollection => {\n                    if ($element.is(thisMethodCollection.element)) {\n                        thisMethodCollection.instance.load();\n                    }\n                });\n\n            });\n\n            thisLoadInstance.load();\n\n            if (settings.visible) {\n                // TODO: intersection observer\n                $window.on('scroll.' + uniqueMethodPluginName, throttle(() => thisLoadInstance.load(), 250));\n            }\n\n            if (true === settings.early) for (let key in methodCollection) {\n\n                let thisMethodCollection = methodCollection[key];\n\n                if (methodCollection[key].id === uniqueMethodPluginName) {\n\n                    clearTimeout(thisMethodCollection.timeout);\n\n                    let timeout = parseInt(settings.earlyTimeout);\n\n                    thisMethodCollection.timeout = setTimeout(function () {\n\n                        // TODO: appropriate method to set/update settings?\n                        thisMethodCollection.instance._settings.visible = false;\n                        thisMethodCollection.instance._settings.sequential = true;\n\n                        thisMethodCollection.instance.load();\n\n                    }, !isNaN(timeout) && isFinite(timeout) ? timeout : 0);\n\n                    break;\n\n                }\n\n            }\n\n        });\n\n    };\n\n})(window, document, jQuery);"],"file":"nite.loader.min.js"}