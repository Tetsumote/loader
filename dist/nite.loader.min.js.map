{"version":3,"sources":["nite.loader.js"],"names":["window","document","$","undefined","namespace_prefix","Math","floor","namespace_method","namespace","CustomEvent","sequential_mode","Array","prototype","findIndex","list","length","console","global","con","prop","method","filter","properties","capitalize","is_format","split","format_names","pop","_settings","extend","methods","dummy","$sources","string_resource","isFunction","error","callback","_func","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","TypeError","i","Object","thisArg","arguments","call","a","b","c","d","e","push","cache","string","charAt","toUpperCase","slice","$document","$window","unique_id","nite","uniqueId","random","is_visible","element","$el","in_viewport","inViewport","ratio","rect","getBoundingClientRect","right","bottom","left","width","top","height","is","css","is_html_object","object","HTMLElement","nodeType","style","ownerDocument","is_loaded","inArray","currentSrc","complete","readyState","is_broken","naturalWidth","videoWidth","item","expected_format","format_extensions","image","audio","video","keys","base64_heading","output","format","extension","format_queue","x","hasOwnProperty","RegExp","test","matches64","match","replace","matches","tag_name","tagName","toLowerCase","ResourceLoader","options","srcAttr","srcsetAttr","playthrough","visible","_id","_id_event","_element","_$element","_resource","_busy","_format","_done","noop","_success","_error","_callback","removeData","src","this_arguments","type","apply","src_clean","_exists","off","$picture","closest","srcset","srcset_clean","removeAttr","find","attr","data","is_playthrough_mode__normal","is_playthrough_mode__full","is_fully_buffered","media","round","buffered","end","seekable","call_media_load","self","each","$t","sources_error_id","load","on_progress_replacement_interval","setInterval","is_error","duration","currentTime","paused","play","clearInterval","pause","status","resource","id","element_resource","is_img","createElement","ResourcesLoader","collection","_collection","_collection_loaded","_collection_instances","_collection_pending","_resources_loaded","isArray","percentage","_progress","_abort","_loaded","_complete","_loop","setTimeout","loop","sequential","this_load_id","this_load_index","this_load_instance","instance","done","a_progress","parseFloat","toFixed","this_resource","trigger","process","resources","key","abort","CollectionPopulator","$element","backgrounds","attributes","is_plain_data_collection","targets","targets_extended","$targets","add","children","collection_item","addBack","not","url","method_collection","fn","original_user_options","settings","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","collect","unique_method_namespace","timeout","progress","event_name","forEach","this_method_collection","scroll","fps","throttle_scroll_event","wait","time","Date","now","on","clearTimeout","isNumeric","parseInt","jQuery"],"mappings":"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","file":"nite.loader.min.js","sourcesContent":["/*! JQuery Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\n(function(window, document, $, undefined){\n    'use strict';\n\n    const\n        namespace_prefix = 'nite',\n        namespace_method = namespace_prefix+'Load',\n        namespace = namespace_method+'er';\n\n\n    // thanks to https://github.com/paulmillr/console-polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function(global) {\n        if (!global.console)\n            global.console = {};\n        let con = global.console,\n            prop, method,\n            dummy = function() {},\n            properties = ['memory'],\n            methods = ('assert,clear,count,debug,dir,dirxml,error,exception,group,' +\n                'groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,' +\n                'show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn').split(',');\n        while (prop = properties.pop())\n            if (!con[prop])\n                con[prop] = {};\n        while (method = methods.pop())\n            if (!con[method])\n                con[method] = dummy;\n    })(window);\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // - - - - - - - - - - - - - - - - - - - -\n    if( !$ ) {\n        console.error('jQuery is needed for '+namespace+' to work!');\n        return undefined;\n    }\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function () {\n\n        if ( typeof window.CustomEvent === \"function\" )\n            return false; //If not IE\n\n        function CustomEvent ( event, params ) {\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            let evt = document.createEvent( 'CustomEvent' );\n            evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n\n    })();\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // thanks to https://github.com/jsPolyfill/Array.prototype.findIndex\n    // todo check efficiency and reliability in MS Internet Explorer\n    // - - - - - - - - - - - - - - - - - - - -\n    Array.prototype.findIndex = Array.prototype.findIndex || function(callback) {\n        if (this === null) {\n            throw new TypeError('Array.prototype.findIndex called on null or undefined');\n        } else if (typeof callback !== 'function') {\n            throw new TypeError('callback must be a function');\n        }\n        const\n            list = Object(this),\n            // Makes sures is always has an positive integer as length.\n             length = list.length >>> 0,\n             thisArg = arguments[1];\n        for (let i = 0; i < length; i++) {\n            if ( callback.call(thisArg, list[i], i, list) ) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // thanks to https://gist.github.com/eliperelman/1031656\n    // todo check efficiency and reliability in MS Internet Explorer\n    // - - - - - - - - - - - - - - - - - - - -\n    [].filter||(Array.prototype.filter=function(a,b,c,d,e){c=this;d=[];for(e in c)~~e+''==e&&e>=0&&a.call(b,c[e],+e,c)&&d.push(c[e]);return d})\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    let cache = [];\n\n    const\n\n        capitalize = function(string){\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        },\n\n        $document = $(document),\n        $window = $(window),\n\n        unique_id = function(){\n\n            return $.nite && 'uniqueId' in $.nite ? $.nite.uniqueId() : Math.floor(Math.random() * (9999 - 1000)) + 1000;\n\n        },\n\n        is_visible = function(element){\n\n            const $el = $(element);\n\n            let in_viewport = false;\n\n            if( $.nite && 'inViewport' in $.nite )\n                in_viewport = $.nite.inViewport(element).ratio;\n\n            else{\n\n                const rect = element.getBoundingClientRect();\n\n                in_viewport = !( rect.right < 0 || rect.bottom < 0 || rect.left > $window.width() || rect.top > $window.height() );\n\n            }\n\n            return in_viewport && $el.is(':visible') && $el.css('visibility') !== 'hidden';\n\n        },\n\n        is_html_object = function( object ){\n\n            if( typeof object !== 'object' )\n                return false;\n\n            try {\n                return object instanceof HTMLElement;\n            }\n            catch(e){\n                return object.nodeType === 1 && typeof object.style === 'object' && typeof object.ownerDocument === 'object';\n            }\n\n        },\n\n        is_loaded = function(element){\n\n            return (\n                typeof element === 'string'\n                && $.inArray(element, cache) > -1\n            )\n            || (\n                is_html_object(element)\n                && ( 'currentSrc' in element && element.currentSrc.length )\n                && ( ( 'complete' in element && element.complete ) || ( 'readyState' in element && element.readyState >= 2 ) )\n            );\n\n        },\n\n        is_broken = function(element){\n\n            return is_loaded(element) && (\n                    (\n                        typeof element === 'object' && (\n                            ( 'naturalWidth' in element && Math.floor(element.naturalWidth) === 0 )\n                            ||\n                            ( 'videoWidth' in element && element.videoWidth === 0 )\n                        )\n                    )\n                    || typeof element === 'string' // todo check if is url maybe?\n                );\n\n        },\n        \n        is_format = function( item, expected_format ){\n\n            const\n                format_extensions = {\n                    image : 'jp[e]?g||jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\n                    audio : 'mp3|ogg|oga|spx|ogg|wav',\n                    video : 'mp4|ogv|webm'\n                },\n                format_names = Object.keys(format_extensions),\n                base64_heading = '\\;base64\\,';\n\n            let output = { format: null, extension: null };\n\n            if( typeof item === 'string' ) {\n\n                item = item.split('?')[0]; // get rid of query strings\n                item = item.split('#')[0]; // get rid of hashes\n\n                if (item === '')\n                    return false;\n\n                let format_queue = undefined !== expected_format ? [ expected_format ] : format_names;\n\n                for (const x in format_queue) {\n\n                    if (format_queue.hasOwnProperty(x)){\n\n                        if (new RegExp('(\\.(' + format_extensions[format_queue[x]] + ')$)|' + base64_heading, 'g').test(item)) {\n\n                            if (new RegExp(base64_heading, 'g').test(item)) {\n\n                                let matches64 = item.match(new RegExp('^data:' + format_queue[x] + '\\/(' + format_extensions[format_queue[x]] + ')', 'g'));\n\n                                if ( !matches64 || null === matches64 )\n                                    continue;\n\n                                matches64 = matches64[0];\n\n                                output.format = format_queue[x];\n                                output.extension = matches64.replace('data:' + format_queue[x] + '/', '');\n\n                                break;\n\n                            } else {\n\n                                let matches = item.match(new RegExp(format_extensions[format_queue[x]], 'g'));\n\n                                if (matches) {\n\n                                    output.format = format_queue[x];\n                                    output.extension = matches[0];\n\n                                    break;\n\n                                }\n\n                            }\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            if( is_html_object(item) ){\n\n                let tag_name = item.tagName.toLowerCase();\n                \n                if( $.inArray(tag_name, format_names) > -1 )\n                    output.format = item.tagName.toLowerCase();\n\n                if( tag_name === 'img' )\n                    output.format = 'image';\n\n            }\n\n            return output;\n    \n        };\n\n    class ResourceLoader {\n\n        constructor(options){\n\n            // todo make _vars really private\n            // todo make useful vars since this class is not public but is returned in .progress() callback\n            this._settings  = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                playthrough : false,\n                visible     : false,\n            }, options);\n\n            this._id        = null;\n            this._id_event  = null;\n\n            this._element   = null;\n            this._$element  = $();\n\n            this._resource  = null;\n            this._busy      = false;\n\n            this._format    = null;\n\n            this._done      = $.noop;\n            this._success   = $.noop;\n            this._error     = $.noop;\n\n            this._callback  = (e) => {\n\n                this._$element.removeData(namespace);\n\n                this._busy = false;\n\n                const src = this._element.currentSrc || this._element.src;\n\n                if( $.inArray(src, cache) === -1 )\n                    cache.push(src);\n\n                let this_arguments = [ this._element, e.type, src, this._id ];\n\n                this[ e.type !== 'error' ? '_success' : '_error' ].apply(this, this_arguments);\n                this._done.apply(this, this_arguments);\n\n            };\n\n        }\n\n        set resource( data ){\n\n            const\n                element_resource = is_html_object(data.resource),\n                string_resource = typeof data.resource === 'string';\n\n            if( !element_resource && !string_resource )\n                return;\n\n            this._id = data.id;\n            this._format = is_format(data.resource).format;\n\n            this._exists = element_resource; // todo maybe search for an element with this src\n\n            if( string_resource ){\n\n                let is_img = this._format === 'image';\n\n                this._element = document.createElement(is_img ? 'img' : this._format);\n\n                if( is_img )\n                    this._settings.srcsetAttr = 'data-srcset';\n                this._settings.srcAttr = 'data-src';\n\n                this._resource = data.resource;\n\n            }\n\n            if( element_resource )\n                this._element = data.resource;\n\n            this._$element = $(this._element);\n\n            if( string_resource ){\n\n                this._$element\n                    .data(this._settings.srcAttr.replace('data-', ''), this._resource)\n                    .data(this._settings.srcsetAttr.replace('data-', ''), this._resource)\n                    .attr(this._settings.srcAttr, this._resource)\n                    .attr(this._settings.srcsetAttr, this._resource);\n\n            }\n\n            this._id_event = this._$element.data(namespace);\n            this._busy = this._id_event !== undefined;\n            this._id_event = this._busy ? this._id_event : namespace + '_unique_' + this._element.tagName + '_'+ unique_id();\n\n        }\n\n        /**\n         *\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\n         */\n        process(){\n\n            const\n                src = this._settings.srcAttr,\n                src_clean = this._settings.srcAttr.replace('data-', '');\n\n            if ( is_loaded( this._exists ? this._element : this._resource ) ) {\n\n                if (!this._busy)\n                    this._$element.off('.' + this._id_event); // todo this should be called when in callback\n\n                this._callback(new CustomEvent(!is_broken( this._exists ? this._element : this._resource ) ? 'load' : 'error'));\n\n                return false;\n\n            }else if( this._exists && this._settings.visible && !is_visible(this._element) ){\n\n                return false;\n\n            }else{\n\n                if( this._format === 'image' ) {\n\n                    this._$element[this._busy ? 'on' : 'one']('load.' + this._id_event + ' error.' + this._id_event, this._callback);\n\n                    const\n                        $picture = this._$element.closest('picture'),\n                        srcset = this._settings.srcsetAttr,\n                        srcset_clean = this._settings.srcsetAttr.replace('data-', '');\n\n                    if ($picture.length && 'HTMLPictureElement' in window ) {\n\n                        this._$element\n                            .removeData(srcset_clean)\n                            .removeAttr(srcset)\n                            .removeData(src_clean)\n                            .removeAttr(src);\n\n                        $picture.find('source[' + srcset + ']')\n                            .attr('srcset', $picture.data(srcset_clean))\n                            .removeData(srcset_clean)\n                            .removeAttr(srcset);\n\n                    } else {\n\n                        if (this._$element.is('[' + srcset + ']'))\n                            this._$element\n                                .attr('srcset', this._$element.data(srcset_clean))\n                                .removeData(srcset_clean)\n                                .removeAttr(srcset);\n\n                        if (this._$element.is('[' + src + ']'))\n                            this._$element\n                                .attr('src', this._$element.data(src_clean))\n                                .removeData(src_clean)\n                                .removeAttr(src);\n\n                    }\n\n                }else if( this._format === 'video' || this._format === 'audio' ){\n\n                    const\n\n                        is_playthrough_mode__normal = true === this._settings.playthrough,\n                        is_playthrough_mode__full = 'full' === this._settings.playthrough,\n\n                        $sources = this._$element.find('source'),\n                        is_fully_buffered = function(media){\n\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\n\n                        };\n\n                    let call_media_load = false;\n\n                    if( $sources.length ){\n\n                        let self = this; // todo arrow func ?\n\n                        $sources.each(function() {\n\n                            let $t = $(this);\n\n                            if ( $t.is('[' + src + ']') ) {\n\n                                $t\n                                    .attr('src', $t.data(src_clean))\n                                    .removeData(src_clean)\n                                    .removeAttr(src);\n\n                                call_media_load = true;\n\n                            }\n\n                        })\n                        [this._busy ? 'on' : 'one']('error.' + this._id_event, function(e){\n\n                            const sources_error_id = namespace+'_error';\n\n                            $(this).data(sources_error_id, true);\n\n                            if( $sources.length === $sources.filter(function(){ return true === $(this).data(sources_error_id); }).length )\n                                self._callback(e);\n\n                        });\n\n                    }else{\n\n                        if (this._$element.is('[' + src + ']')) {\n\n                            this._$element\n                                .attr('src', this._$element.data(src_clean))\n                                .removeData(src_clean)\n                                .removeAttr(src)\n                                [this._busy ? 'on' : 'one']('error.' + this._id_event, this._callback);\n\n                            call_media_load = true;\n\n                        }\n\n                    }\n\n                    if( call_media_load )\n                        this._element.load();\n\n                    this._$element\n                        [this._busy ? 'on' : 'one']('loadedmetadata.' + this._id_event, () => {\n\n                            if ( !is_playthrough_mode__normal && !is_playthrough_mode__full )\n                                this._callback(new CustomEvent('load'));\n\n                            if( is_playthrough_mode__full ) {\n\n                                let on_progress_replacement_interval = setInterval(() => {\n\n                                    let is_error = this._element.readyState > 0 && !this._element.duration;\n\n                                    if( is_error || is_fully_buffered(this._element) ){\n\n                                        this._element.currentTime = 0;\n\n                                        if( !is_error && !this._busy && this._element.paused && this._$element.is('[autoplay]') )\n                                            this._element.play();\n\n                                        clearInterval(on_progress_replacement_interval);\n\n                                        this._callback(new CustomEvent( !is_error ? 'load' : 'error' ));\n\n                                    } else {\n\n                                        if( !this._element.paused )\n                                            this._element.pause();\n\n                                        if( !this._busy )\n                                            this._element.currentTime += 2;\n\n                                    }\n\n                                }, 500);\n\n                                this._$element.data(this._id_event, on_progress_replacement_interval);\n\n                            }\n\n                        })\n                        [this._busy ? 'on' : 'one']('canplay.' + this._id_event, () => {\n\n                            if ( is_playthrough_mode__full && this._element.currentTime === 0 && !is_fully_buffered(this._element))\n                                this._element.currentTime++;\n\n                        })\n                        [this._busy ? 'on' : 'one']('canplaythrough.' + this._id_event, () => {\n\n                            if( is_playthrough_mode__normal )\n                                this._callback(new CustomEvent('load'));\n\n                        });\n\n                }else {\n\n                    return false;\n\n                }\n\n                if ( !this._busy )\n                    this._$element.data(namespace, this._id_event);\n\n            }\n\n            this._resource = this._element.currentSrc || this._element.src;\n\n            return !this._busy;\n\n        }\n\n        done(callback){\n\n            if( !$.isFunction(callback) )\n                return;\n\n            this._done = function(element, status, resource, id){\n                callback.apply(this, [element, status, resource, id]);\n            };\n\n        };\n\n        abort(){\n\n            this._$element\n                .off('.' + this._id_event);\n\n            if( is_loaded(this._exists ? this._element : this._resource ) )\n                return;\n\n            const\n                src = this._$element.attr('srcset'),\n                srcset = this._$element.attr('src');\n\n            if( undefined !== src )\n                this._$element\n                    .data(this._settings.srcAttr, src)\n                    .attr(this._settings.srcAttr, src)\n                    .removeAttr('src').removeAttr('srcset');\n\n            if( undefined !== srcset )\n                this._$element\n                    .data(this._settings.srcsetAttr, srcset)\n                    .attr(this._settings.srcsetAttr, srcset)\n                    .removeAttr('src').removeAttr('srcset');\n\n        }\n\n    }\n    \n    class ResourcesLoader {\n\n        constructor(collection, options) {\n\n            // todo make _vars really private\n            this._collection           = [];\n            this._collection_loaded    = [];\n            this._collection_instances = [];\n            this._collection_pending   = [];\n            this._resources_loaded     = [];\n\n            if ($.isArray(collection) && ( typeof collection[0] === 'string' || is_html_object(collection[0]) ))\n                for ( const resource in collection )\n                    if( collection.hasOwnProperty(resource) )\n                        this._collection.push({ id : unique_id(), resource : collection[resource] });\n            if ( typeof collection === 'string' || is_html_object(collection) )\n                this._collection.push({ id : unique_id(), resource : collection });\n\n            this._settings = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                playthrough : false,\n                visible     : false,\n            }, options);\n\n            this.percentage = 0;\n\n            this._done      = $.noop;\n            this._progress  = $.noop;\n            this._success   = $.noop;\n            this._error     = $.noop;\n\n            this._abort     = false;\n            this._loaded    = 0;\n            this._complete  = false;\n            this._busy      = false;\n\n            (this._loop = () => { // self invoking this._loop\n                setTimeout( () => { // force asynchrony (gives time to chain methods synchronously)\n                    this.loop();\n                }, 25);\n            })();\n\n        }\n\n        loop(){\n\n            this._collection_pending = []; // resets pending elements (sequential opt helper array) every time we loop\n\n            const sequential_mode = true === this._settings.sequential;\n\n            for( let i = 0; i < this._collection.length; i++ ){\n\n                if( this._abort )\n                    break;\n\n                let this_load_id = this._collection[i].id,\n                    this_load_index = this._collection_instances.findIndex( x => x.id === this_load_id ),\n                    this_load_instance = new ResourceLoader(this._settings);\n\n                if( this_load_index === -1 ) {\n                    this._collection_instances.push({ id : this_load_id, instance : this_load_instance });\n                    this_load_index = this._collection_instances.findIndex( x => x.id === this_load_id );\n                }else\n                    this._collection_instances[this_load_index].instance = this_load_instance;\n\n                this_load_instance.resource = this._collection[i];\n\n                this_load_instance.done((element, status, resource, id) => {\n\n                    if( this._complete || this._abort )\n                        return;\n\n                    let a_progress = $.inArray(id, this._collection_loaded) === -1;\n\n                    if( a_progress ) {\n\n                        this._collection_loaded.push(id);\n                        this._busy = false;\n\n                        this._loaded++;\n                        this.percentage = this._loaded / this._collection.length * 100;\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\n\n                        let this_resource = { resource : resource, status : status };\n                        this._resources_loaded.push(this_resource);\n\n                        this._progress.call(this, this_resource);\n                        this[ status !== 'error' ? '_success' : '_error' ].call(this, this_resource);\n\n                        $(element).trigger(namespace_prefix + capitalize(status) + '.' + namespace_prefix, [ element, resource ]);\n\n                    }\n\n                    if( this._loaded === this._collection.length ) {\n\n                        this._done.call(this, this._resources_loaded);\n\n                        this._complete = true;\n\n                    }else if( a_progress && sequential_mode ){\n\n                        if( this._collection_pending.length ){\n\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\n\n                            if( this._collection_pending.length )\n                                this._busy = this._collection_pending[0].instance.process();\n\n                        }\n\n                    }\n\n                });\n\n                if( !sequential_mode || ( sequential_mode && !this._busy ) )\n                    this._busy = this_load_instance.process();\n\n                else if( sequential_mode && this._busy ){\n\n                    if( !this._settings.visible || ( this._settings.visible && is_visible(this_load_instance._element) ) )\n                        this._collection_pending.push({ id : this_load_id, instance : this_load_instance });\n\n                }\n\n\n            }\n\n        }\n\n        done(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resources){\n                callback.call(this, resources);\n            };\n\n            if( this._collection.length ) {\n\n                this._done = _func;\n\n                this._loop();\n\n            }else\n                _func();\n\n        };\n\n        progress(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._progress = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        success(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._success = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        error(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._error = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        abort(){\n\n            for( const key in this._collection_instances )\n                this._collection_instances[ key ].instance.abort();\n\n            if( this._collection.length )\n                this._abort = true;\n\n        };\n\n    }\n\n    class CollectionPopulator {\n\n        constructor($element, options) {\n\n            this._$element  = $element;\n            this._element   = $element[0];\n\n            this._settings  = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                backgrounds : false,\n                attributes  : []\n            }, options);\n\n        }\n\n        collect( output ) {\n\n            let collection = [];\n\n            const\n                is_plain_data_collection = output === 'plain',\n\n                src = this._settings.srcAttr,\n                srcset = this._settings.srcsetAttr,\n\n                targets = 'img, video, audio',\n                targets_extended = targets + ', picture, source';\n\n            let $targets = this._$element.find(targets);\n            if (this._$element.is(targets))\n                $targets = $targets.add(this._$element);\n            $targets = $targets.filter(function(){\n                let $t = $(this),\n                    filter = '['+src+'], ['+srcset+']';\n                return $t.is(filter) || $t.children(targets_extended).filter(filter).length;\n            });\n            $targets.each(function () {\n\n                let collection_item = {\n                    element : this,\n                    resource : $(this).attr(src) || $(this).attr(srcset)\n                };\n\n                if( is_plain_data_collection )\n                    collection_item = collection_item.element;\n\n                collection.push(collection_item);\n\n            });\n\n            if (true === this._settings.backgrounds)\n                this._$element.find('*').addBack().not(targets_extended).filter(function () {\n                    return $(this).css('background-image') !== 'none';\n                }).each(function () {\n\n                    const url = $(this).css('background-image').match(/\\((.*?)\\)/);\n\n                    if( null === url || url.length < 2 )\n                        return true;\n\n                    let collection_item = {\n                        element : this,\n                        resource : url[1].replace(/('|\")/g,'')\n                    };\n\n                    if( is_plain_data_collection )\n                        collection_item = collection_item.resource;\n\n                    collection.push(collection_item);\n\n                });\n\n            if (this._settings.attributes.length)\n                for (const attr in this._settings.attributes) {\n                    if( this._settings.attributes.hasOwnProperty(attr) ) {\n\n                        this._$element.find('[' + attr + ']:not(' + targets_extended + ')').each(function () {\n\n                            let collection_item = {\n                                element : this,\n                                resource : $(this).attr(attr)\n                            };\n\n                            if( is_plain_data_collection )\n                                collection_item = collection_item.resource;\n\n                            collection.push(collection_item);\n\n                        });\n\n                        if (this._$element.is('[' + attr + ']') && !this._$element.is(targets_extended)) {\n\n                            let collection_item = {\n                                element: this._element,\n                                resource: this._$element.attr(attr)\n                            };\n\n                            if( is_plain_data_collection )\n                                collection_item = collection_item.resource;\n\n                            collection.push(collection_item);\n\n                        }\n\n                    }\n                }\n\n            return collection;\n\n        }\n\n    }\n\n    $[namespace_method] = ResourcesLoader;\n\n    let method_collection = [];\n\n    $.fn[namespace_method] = function(options){\n\n        let original_user_options = options;\n\n        if( typeof options !== 'object' )\n            options = {};\n\n        let settings = $.extend(true, {\n\n            srcAttr       : 'data-src',\n            srcsetAttr    : 'data-srcset',\n\n            visible       : false,\n\n            sequential    : false,\n\n            backgrounds   : false,\n            extraAttrs    : [],\n\n            playthrough   : false,\n\n            early         : false,\n            earlyTimeout  : 0,\n\n            onProgress    : $.noop,\n            onLoad        : $.noop,\n            onError       : $.noop,\n\n            onComplete    : $.noop,\n\n        }, options);\n\n        let callback = settings.onComplete;\n        if( $.isFunction(original_user_options) )\n            callback = original_user_options;\n\n        if( !$.isArray(settings.attributes) )\n            settings.attributes = [];\n        if( typeof settings.attributes === 'string' )\n            settings.attributes = settings.attributes.split(' ');\n\n        return this.each(function(){\n\n            const\n                element = this,\n                $element = $(element),\n                collection = new CollectionPopulator($element, settings).collect('plain'),\n                unique_method_namespace = namespace + '_' + unique_id(),\n\n                this_load_instance = new ResourcesLoader(collection, settings);\n\n            method_collection.push({\n                id : unique_method_namespace,\n                instance : this_load_instance,\n                element : element,\n                timeout : null\n            });\n\n            this_load_instance.progress(function (resource) {\n\n                $element.trigger(namespace_prefix+'Progress.'+namespace_prefix, [element, resource]);\n\n                const this_arguments = [ this_load_instance, resource ];\n\n                if( $.isFunction(settings.onProgress) )\n                    settings.onProgress.apply(element, this_arguments);\n\n                let event_name = capitalize(resource.status);\n                if( $.isFunction(settings['on'+event_name]) )\n                    settings['on'+event_name].apply(element, this_arguments);\n\n            });\n\n            this_load_instance.done(function(resources){\n\n                $element.trigger(namespace_prefix + 'Complete.' + namespace_prefix, [ element, resources ]);\n                callback.apply(element, [ this_load_instance, resources ]);\n\n                if( settings.visible )\n                    $( $.nite && 'scroll' in $.nite ? $document : $window ).off('scroll.' + unique_method_namespace);\n\n                // refresh other method calls for same el (omitting this one)\n                method_collection = method_collection.filter( x => x.id !== unique_method_namespace );\n                method_collection.forEach((this_method_collection) => {\n                    if ($element.is(this_method_collection.element))\n                        this_method_collection.instance.loop();\n                });\n\n            });\n\n            if( settings.visible ){\n\n                if( $.nite && 'scroll' in $.nite )\n                    $.nite.scroll(unique_method_namespace, function(){ this_load_instance.loop(); }, { fps : 25 });\n\n                else{\n\n                    const throttle_scroll_event = function(fn, wait) {\n                        let time = Date.now();\n                        return function() {\n                            if( ( time + wait - Date.now() ) < 0 ){\n                                fn();\n                                time = Date.now();\n                            }\n                        }\n                    };\n\n                    $window.on('scroll.'+unique_method_namespace, throttle_scroll_event(function(){ this_load_instance.loop(); }, 1000));\n\n                }\n\n            }\n\n            if( true === settings.early ) for( let key in method_collection ) {\n\n                let this_method_collection = method_collection[key];\n\n                if (method_collection[key].id === unique_method_namespace) {\n\n                    clearTimeout(this_method_collection.timeout);\n\n                    this_method_collection.timeout = setTimeout(function () {\n\n                        // todo appropriate method for setting settings?\n                        this_method_collection.instance._settings.visible = false;\n                        this_method_collection.instance._settings.sequential = true;\n\n                        this_method_collection.instance.loop();\n\n                    }, $.isNumeric(settings.earlyTimeout) ? parseInt(settings.earlyTimeout) : 0);\n\n                    break;\n\n                }\n\n            }\n\n        });\n\n    };\n\n})(window, document, jQuery);"]}