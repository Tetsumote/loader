{"version":3,"sources":["nite.loader.js"],"names":["window","document","$","undefined","console","prop","method","con","dummy","properties","methods","split","pop","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","prototype","Event","Array","findIndex","callback","this","TypeError","list","Object","length","thisArg","arguments","i","call","isArray","arg","toString","filter","a","b","c","d","e","push","generateInstanceID","Math","floor","random","pluginPrefix","pluginMethod","pluginName","pluginInstance","innerEvents","detachEventListener","element","eventName","_eventName","id","removeEventListener","attachEventListener","oneTime","_callback","target","type","callee","addEventListener","isInArray","needle","stack","indexOf","capitalize","string","charAt","toUpperCase","slice","isVisible","bodyEl","getElementsByTagName","winWidth","innerWidth","documnt","documentElement","clientWidth","winHeight","innerHeight","clientHeight","rect","getBoundingClientRect","right","bottom","left","top","getComputedStyle","isHTMLObject","object","HTMLElement","nodeType","style","ownerDocument","isLoaded","currentSrc","complete","readyState","isBroken","naturalWidth","videoWidth","isFormat","item","expectedFormat","formatExtensions","image","audio","video","formatNames","keys","output","format","extension","formatQueue","x","hasOwnProperty","RegExp","test","matches64","match","replace","matches","tagName","toLowerCase","ResourceLoader","[object Object]","options","_settings","srcAttr","srcsetAttr","playthrough","visible","_id","_id_event","_element","_resource","_busy","_format","_done","_success","_error","src","this_arguments","apply","resource","data","element_resource","string_resource","_exists","is_img","createElement","dataset","setAttribute","_resourc","src_clean","_elemnt","picture","closest","srcset","srcset_clean","removeAttribute","queryAll","forEach","el","addAttribute","is_playthrough_mode__normal","is_playthrough_mode__full","sources","isFullyBuffered","media","buffered","round","end","seekable","call_media_load","source","sources_error_id","_$element","load","on_progress_replacement_interval","setInterval","is_error","duration","currentTime","paused","play","clearInterval","pause","status","getAttribute","ResourcesLoader","collection","_collection","_collection_loaded","_collection_instances","_collection_pending","_resources_loaded","percentage","_progress","_abort","_loaded","_complete","_loop","setTimeout","loop","sequential_mode","sequential","this_load_id","this_load_index","this_load_instance","instance","done","a_progress","parseFloat","toFixed","this_resource","trigger","process","_func","resources","key","abort","define","amd","exports","module","$window","throttle","wait","context","timeout","callbackArgs","later","method_collection","fn","original_user_options","settings","backgrounds","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","isFunction","attributes","each","$element","is_plain_data_collection","targets","targets_extended","$targets","find","is","add","$t","children","collection_item","attr","addBack","not","css","url","collect","unique_method_pluginName","progress","event_name","off","this_method_collection","on","clearTimeout","parseInt","isNaN","isFinite","jQuery"],"mappings":"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","sourcesContent":["/*! JQuery Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\r\n(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // thanks to https://github.com/paulmillr/console-polyfill\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    (function () {\r\n        if (!window.console) {\r\n            window.console = {};\r\n        }\r\n        let con = window.console,\r\n            prop, method,\r\n            dummy = function () { },\r\n            properties = ['memory'],\r\n            methods = ('assert,clear,count,debug,dir,dirxml,error,exception,group,' +\r\n                'groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,' +\r\n                'show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn').split(',');\r\n        while (prop = properties.pop()) {\r\n            if (!con[prop]) {\r\n                con[prop] = {};\r\n            }\r\n        }\r\n        while (method = methods.pop()) {\r\n            if (!con[method]) {\r\n                con[method] = dummy;\r\n            }\r\n        }\r\n    })();\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    (function () {\r\n        if (typeof window.CustomEvent === \"function\") {\r\n            return false; //If not IE\r\n        }\r\n        function CustomEvent(event, params) {\r\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n            let evt = document.createEvent('CustomEvent');\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n            return evt;\r\n        }\r\n        CustomEvent.prototype = window.Event.prototype;\r\n        window.CustomEvent = CustomEvent;\r\n    })();\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    // thanks to https://github.com/jsPolyfill/Array.prototype.findIndex\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    Array.prototype.findIndex = Array.prototype.findIndex || function (callback) {\r\n        if (this === null) {\r\n            throw new TypeError('Array.prototype.findIndex called on null or undefined');\r\n        } else if (typeof callback !== 'function') {\r\n            throw new TypeError('callback must be a function');\r\n        }\r\n        const\r\n            list = Object(this),\r\n            length = list.length >>> 0,\r\n            thisArg = arguments[1];\r\n        for (let i = 0; i < length; i++) {\r\n            if (callback.call(thisArg, list[i], i, list)) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    // https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    Array.isArray = Array.isArray || function (arg) {\r\n        return Object.prototype.toString.call(arg) === '[object Array]';\r\n    };\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    // thanks to https://gist.github.com/eliperelman/1031656\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    [].filter || (Array.prototype.filter = function (a, b, c, d, e) { c = this; d = []; for (e in c) ~~e + '' == e && e >= 0 && a.call(b, c[e], +e, c) && d.push(c[e]); return d })\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    const\r\n        generateInstanceID = function () {\r\n            return Math.floor(Math.random() * (9999 - 1000)) + 1000;\r\n        },\r\n        pluginPrefix = 'nite',\r\n        pluginMethod = pluginPrefix + 'Load',\r\n        pluginName = pluginMethod + 'er',\r\n        pluginInstance = generateInstanceID();\r\n\r\n    window[pluginName + 'Cache'] = [];\r\n\r\n    let innerEvents = {};\r\n\r\n    const\r\n        detachEventListener = (element, eventName) => {\r\n\r\n            const _eventName = eventName.split(','),\r\n                id = _eventName[1];\r\n\r\n            if( id ){\r\n\r\n                element.removeEventListener(_eventName[0], innerEvents[eventName].callback);\r\n\r\n                delete innerEvents[id];\r\n\r\n            }\r\n\r\n        },\r\n        attachEventListener = (element, eventName, callback, oneTime) => {\r\n\r\n            let _callback = callback;\r\n\r\n            callback = (event) => {\r\n                \r\n                if( oneTime ){\r\n                    event.target.removeEventListener(event.type, arguments.callee);\r\n                }\r\n\r\n                _callback();\r\n\r\n            }\r\n\r\n            const\r\n                _eventName = eventName.split(','),\r\n                id = _eventName[1];\r\n\r\n            if( id ){\r\n\r\n                innerEvents[id] = {\r\n                    eventName : eventName,\r\n                    callback : callback\r\n                };\r\n\r\n                eventName = _eventName[0];\r\n\r\n            }\r\n\r\n            element.addEventListener(eventName, callback);\r\n\r\n        },\r\n        isInArray = (needle, stack) => {\r\n            return stack.indexOf(needle) > -1;\r\n        },\r\n        capitalize = (string) => {\r\n            return string.charAt(0).toUpperCase() + string.slice(1);\r\n        },\r\n        isVisible = (element) => {\r\n\r\n            const\r\n                bodyEl = document.getElementsByTagName('body')[0],\r\n                winWidth = window.innerWidth || documnt.documentElement.clientWidth || bodyEl.clientWidth,\r\n                winHeight = window.innerHeight || documnt.documentElement.clientHeight || bodyEl.clientHeight,\r\n                rect = element.getBoundingClientRect();\r\n\r\n            return !(rect.right < 0 || rect.bottom < 0 || rect.left > winWidth || rect.top > winHeight) && window.getComputedStyle(element, 'display') !== 'none';\r\n\r\n        },\r\n        isHTMLObject = function (object) {\r\n\r\n            if (typeof object !== 'object') {\r\n                return false;\r\n            }\r\n\r\n            try {\r\n                return object instanceof HTMLElement;\r\n            }\r\n            catch (e) {\r\n                return object.nodeType === 1 && typeof object.style === 'object' && typeof object.ownerDocument === 'object';\r\n            }\r\n\r\n        },\r\n        isLoaded = function (element) {\r\n\r\n            return (\r\n                typeof element === 'string'\r\n                &&\r\n                isInArray(element, window[pluginName + 'Cache'])\r\n            )\r\n                || (\r\n                    isHTMLObject(element)\r\n                    && ('currentSrc' in element && element.currentSrc.length)\r\n                    && (('complete' in element && element.complete) || ('readyState' in element && element.readyState >= 2))\r\n                );\r\n\r\n        },\r\n        isBroken = function (element) {\r\n\r\n            return isLoaded(element) && (\r\n                (\r\n                    typeof element === 'object' && (\r\n                        ('naturalWidth' in element && Math.floor(element.naturalWidth) === 0)\r\n                        ||\r\n                        ('videoWidth' in element && element.videoWidth === 0)\r\n                    )\r\n                )\r\n                || typeof element === 'string' // todo check if is url maybe?\r\n            );\r\n\r\n        },\r\n        isFormat = function (item, expectedFormat) {\r\n\r\n            const\r\n                formatExtensions = {\r\n                    image: 'jp[e]?g||jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\r\n                    audio: 'mp3|ogg|oga|spx|ogg|wav',\r\n                    video: 'mp4|ogv|webm'\r\n                },\r\n                formatNames = Object.keys(formatExtensions),\r\n                base64Heading = '\\;base64\\,';\r\n\r\n            let output = { format: null, extension: null };\r\n\r\n            if (typeof item === 'string') {\r\n\r\n                item = item.split('?')[0]; // this gets rid of query strings\r\n                item = item.split('#')[0]; // this gets rid of hashes\r\n\r\n                if (item === '') {\r\n                    return false;\r\n                }\r\n\r\n                let formatQueue = undefined !== expectedFormat ? [expectedFormat] : formatNames;\r\n\r\n                for (const x in formatQueue) {\r\n\r\n                    if (formatQueue.hasOwnProperty(x)) {\r\n\r\n                        if (new RegExp('(\\.(' + formatExtensions[formatQueue[x]] + ')$)|' + base64Heading, 'g').test(item)) {\r\n\r\n                            if (new RegExp(base64Heading, 'g').test(item)) {\r\n\r\n                                let matches64 = item.match(new RegExp('^data:' + formatQueue[x] + '\\/(' + formatExtensions[formatQueue[x]] + ')', 'g'));\r\n\r\n                                if (!matches64 || null === matches64) {\r\n                                    continue;\r\n                                }\r\n\r\n                                matches64 = matches64[0];\r\n\r\n                                output.format = formatQueue[x];\r\n                                output.extension = matches64.replace('data:' + formatQueue[x] + '/', '');\r\n\r\n                                break;\r\n\r\n                            } else {\r\n\r\n                                let matches = item.match(new RegExp(formatExtensions[formatQueue[x]], 'g'));\r\n\r\n                                if (matches) {\r\n\r\n                                    output.format = formatQueue[x];\r\n                                    output.extension = matches[0];\r\n\r\n                                    break;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (isHTMLObject(item)) {\r\n\r\n                let tagName = item.tagName.toLowerCase();\r\n\r\n                if (isInArray(tagName, formatNames)) {\r\n                    output.format = item.tagName.toLowerCase();\r\n                }\r\n\r\n                if (tagName === 'img') {\r\n                    output.format = 'image';\r\n                }\r\n\r\n            }\r\n\r\n            return output;\r\n\r\n        };\r\n\r\n    class ResourceLoader {\r\n\r\n        constructor(options) {\r\n\r\n            // todo make _vars really private\r\n            // todo think about useful vars (this class is not public but its vars are returned in .progress() callback)\r\n            this._settings = {\r\n                srcAttr: 'data-src',\r\n                srcsetAttr: 'data-srcset',\r\n                playthrough: false,\r\n                visible: false,\r\n            };\r\n            this._settings = { ...this._settings, ...options };\r\n\r\n            this._id = null;\r\n            this._id_event = null;\r\n\r\n            this._element = null;\r\n\r\n            this._resource = null;\r\n            this._busy = false;\r\n\r\n            this._format = null;\r\n\r\n            this._done = () => {};\r\n            this._success = () => {};\r\n            this._error = () => {};\r\n\r\n            this._callback = (e) => {\r\n\r\n                this._busy = false;\r\n\r\n                const src = this._element.currentSrc || this._element.src;\r\n\r\n                if (!isInArray(src, window[pluginName + 'Cache']))\r\n                    window[pluginName + 'Cache'].push(src);\r\n\r\n                let this_arguments = [this._element, e.type, src, this._id];\r\n\r\n                this[e.type !== 'error' ? '_success' : '_error'].apply(this, this_arguments);\r\n                this._done.apply(this, this_arguments);\r\n\r\n            };\r\n\r\n        }\r\n\r\n        set resource(data) {\r\n\r\n            const\r\n                element_resource = isHTMLObject(data.resource),\r\n                string_resource = typeof data.resource === 'string';\r\n\r\n            if (!element_resource && !string_resource) {\r\n                return;\r\n            }\r\n\r\n            this._id = data.id;\r\n            this._format = isFormat(data.resource).format;\r\n\r\n            this._exists = element_resource; // todo maybe search for an element with this src\r\n\r\n            if (string_resource) {\r\n\r\n                let is_img = this._format === 'image';\r\n\r\n                this._element = document.createElement(is_img ? 'img' : this._format);\r\n\r\n                if (is_img) {\r\n                    this._settings.srcsetAttr = 'data-srcset';\r\n                }\r\n\r\n                this._settings.srcAttr = 'data-src';\r\n\r\n                this._resource = data.resource;\r\n\r\n            }\r\n\r\n            if (element_resource) {\r\n                this._element = data.resource;\r\n            }\r\n\r\n            if (string_resource) {\r\n\r\n                this._element.dataset[this._settings.srcAttr.replace('data-', '')] = this._resource;\r\n                this._element.dataset[this._settings.srcsetAttr.replace('data-', '')] = this._resource;\r\n                this._element.setAttribute(this._settings.srcAttr, this._resourc);\r\n                this._element.setAttribute(this._settings.srcsetAttr, this._resourc);\r\n\r\n            }\r\n\r\n            this._id_event = this._element[pluginInstance + '_IDEvent'];\r\n            this._busy = this._id_event !== undefined;\r\n            this._id_event = this._busy ? this._id_event : pluginName + '_unique_' + this._element.tagName + '_' + generateInstanceID();\r\n\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\r\n         */\r\n        process() {\r\n\r\n            const\r\n                src = this._settings.srcAttr,\r\n                src_clean = this._settings.srcAttr.replace('data-', '');\r\n\r\n            if (isLoaded(this._exists ? this._element : this._resource)) {\r\n\r\n                if (!this._busy) {\r\n                    detachEventListener(this._elemnt, '.' + this._id_event); //TODO: this should be called when in callback\r\n                }\r\n\r\n                this._callback(new CustomEvent(!isBroken(this._exists ? this._element : this._resource) ? 'load' : 'error'));\r\n\r\n                return false;\r\n\r\n            } else if (this._exists && this._settings.visible && !isVisible(this._element)) {\r\n\r\n                return false;\r\n\r\n            } else {\r\n\r\n                if (this._format === 'image') {\r\n\r\n                    attachEventListener(this._element, 'load.' + this._id_event, this._callback, !this._busy);\r\n                    attachEventListener(this._element, 'error.' + this._id_event, this._callback, !this._busy);\r\n\r\n                    const\r\n                        picture = this._element.closest('picture'),\r\n                        srcset = this._settings.srcsetAttr,\r\n                        srcset_clean = this._settings.srcsetAttr.replace('data-', '');\r\n\r\n                    if (picture && 'HTMLPictureElement' in window) {\r\n\r\n                        delete this._element.dataset[srcset_clean];\r\n                        delete this._element.dataset[src_clean];\r\n                        this._element.removeAttribute(srcset);\r\n                        this._element.removeAttribute(src);\r\n\r\n                        picture.queryAll('source[' + srcset + ']').forEach((el) => {\r\n                            el.addAttribute('srcset', this._element.dataset[srcset_clean]);\r\n                            delete this._element.dataset[srcset_clean];\r\n                            el.removeAttribute(srcset);\r\n                        });\r\n\r\n                    } else {\r\n\r\n                        if (this._element.matches('[' + srcset + ']')) {\r\n                            this._element.addAttribute('srcset', this._element.dataset[srcset_clean]);\r\n                            delete this._element.dataset[srcset_clean];\r\n                            this._element.removeAttribute(srcset);\r\n                        }\r\n\r\n                        if (this._element.matches('[' + src + ']')) {\r\n                            this._element.addAttribute('src', this._element.dataset[src_clean]);\r\n                            delete this._element.dataset[src_clean];\r\n                            this._element.removeAttribute(src);\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if (this._format === 'video' || this._format === 'audio') {\r\n\r\n                    const\r\n\r\n                        is_playthrough_mode__normal = true === this._settings.playthrough,\r\n                        is_playthrough_mode__full = 'full' === this._settings.playthrough,\r\n\r\n                        sources = this._element.queryAll('source'),\r\n                        isFullyBuffered = function (media) {\r\n\r\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\r\n\r\n                        };\r\n\r\n                    let call_media_load = false;\r\n\r\n                    if (sources) {\r\n\r\n                        sources.forEach((source) => {\r\n\r\n                            if (source.matches('[' + src + ']')) {\r\n\r\n                                source.setAttribute('src', source.dataset[src_clean]);\r\n                                delete source.dataset[src_clean];\r\n                                source.removeAttribute(src);\r\n\r\n                                call_media_load = true;\r\n\r\n                            }\r\n\r\n                            attachEventListener(source, 'error.' + this._id_event, (e) => {\r\n\r\n                                const sources_error_id = pluginName + '_error';\r\n    \r\n                                source[pluginInstance + '_' + sources_error_id] = true;\r\n    \r\n                                if ( sources.length === sources.filter(() => true === source[pluginInstance + '_' + sources_error_id] ).length ) {\r\n                                    this._callback(e);\r\n                                }\r\n    \r\n                            }, !this._busy);\r\n\r\n                        });\r\n\r\n                    } else {\r\n\r\n                        if (this._element.matches('[' + src + ']')) {\r\n\r\n                            this._element.setAttribute('src', this._$element.data(src_clean));\r\n                            delete this._element.dataset[src_clean];\r\n                            this._element.removeAttribute(src);\r\n\r\n                            attachEventListener(this._element, 'error.' + this._id_event, this._callback, !this._busy);\r\n\r\n                            call_media_load = true;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (call_media_load) {\r\n                        this._element.load();\r\n                    }\r\n\r\n\r\n                    attachEventListener(this._element, 'loadedmetadata.' + this._id_event, () => {\r\n\r\n                        if (!is_playthrough_mode__normal && !is_playthrough_mode__full) {\r\n                            this._callback(new CustomEvent('load'));\r\n                        }\r\n\r\n                        if (is_playthrough_mode__full) {\r\n\r\n                            let on_progress_replacement_interval = setInterval(() => {\r\n\r\n                                let is_error = this._element.readyState > 0 && !this._element.duration;\r\n\r\n                                if (is_error || isFullyBuffered(this._element)) {\r\n\r\n                                    this._element.currentTime = 0;\r\n\r\n                                    if (!is_error && !this._busy && this._element.paused && this._element.matches('[autoplay]')) {\r\n                                        this._element.play();\r\n                                    }\r\n\r\n                                    clearInterval(on_progress_replacement_interval);\r\n\r\n                                    this._callback(new CustomEvent(!is_error ? 'load' : 'error'));\r\n\r\n                                } else {\r\n\r\n                                    if (!this._element.paused) {\r\n                                        this._element.pause();\r\n                                    }\r\n\r\n                                    if (!this._busy) {\r\n                                        this._element.currentTime += 2;\r\n                                    }\r\n\r\n                                }\r\n\r\n                            }, 500);\r\n\r\n                            this._element[ pluginName +'_'+ this._id_event ] = on_progress_replacement_interval;\r\n\r\n                        }\r\n\r\n                    }, !this._busy);\r\n\r\n                    attachEventListener(this._element, 'canplay.' + this._id_event, () => {\r\n                        if (is_playthrough_mode__full && this._element.currentTime === 0 && !isFullyBuffered(this._element)) {\r\n                            this._element.currentTime++;\r\n                        }\r\n                    }, !this._busy);\r\n\r\n                    attachEventListener(this._element, 'canplaythrough.' + this._id_event, () => {\r\n                        if (is_playthrough_mode__normal) {\r\n                            this._callback(new CustomEvent('load'));\r\n                        }\r\n                    }, !this._busy);\r\n\r\n                } else {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                if (!this._busy) {\r\n                    this._element[pluginInstance + '_IDEvent'] = this._id_event;\r\n                }\r\n\r\n            }\r\n\r\n            this._resource = this._element.currentSrc || this._element.src;\r\n\r\n            return !this._busy;\r\n\r\n        }\r\n\r\n        done(callback) {\r\n\r\n            if (typeof callback !== 'function') {\r\n                return;\r\n            }\r\n\r\n            this._done = function (element, status, resource, id) {\r\n                callback.apply(this, [element, status, resource, id]);\r\n            };\r\n\r\n        };\r\n\r\n        abort() {\r\n\r\n            detachEventListener(this._elemnt, '.' + this._id_event);\r\n\r\n            if (isLoaded(this._exists ? this._element : this._resource)) {\r\n                return;\r\n            }\r\n\r\n            const\r\n                src = this._element.getAttribute('srcset'),\r\n                srcset = this._element.getAttribute('src');\r\n\r\n            if (undefined !== src) {\r\n                this._element.dataset[src] = this._settings.srcAttr;\r\n                this._element.setAttribute(this._settings.srcAttr, src);\r\n                this._element.removeAttribute('src');\r\n                this._element.removeAttribute('srcset');\r\n            }\r\n\r\n            if (undefined !== srcset) {\r\n                this._element.dataset[srcset] = this._settings.srcsetAttr;\r\n                this._element.setAttribute(this._settings.srcsetAttr, srcset);\r\n                this._element.removeAttribute('src');\r\n                this._element.removeAttribute('srcset');\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    class ResourcesLoader {\r\n\r\n        constructor(collection, options) {\r\n\r\n            // todo make _vars really private\r\n            this._collection = [];\r\n            this._collection_loaded = [];\r\n            this._collection_instances = [];\r\n            this._collection_pending = [];\r\n            this._resources_loaded = [];\r\n\r\n            if (Array.isArray(collection) && (typeof collection[0] === 'string' || isHTMLObject(collection[0]))) {\r\n                for (const resource in collection) {\r\n                    if (collection.hasOwnProperty(resource)) {\r\n                        this._collection.push({ id: generateInstanceID(), resource: collection[resource] });\r\n                    }\r\n                }\r\n            }\r\n            if (typeof collection === 'string' || isHTMLObject(collection)) {\r\n                this._collection.push({ id: generateInstanceID(), resource: collection });\r\n            }\r\n\r\n            this._settings = {\r\n                srcAttr: 'data-src',\r\n                srcsetAttr: 'data-srcset',\r\n                playthrough: false,\r\n                visible: false,\r\n            };\r\n            this._settings = { ...this._settings, ...options };\r\n\r\n            this.percentage = 0;\r\n\r\n            this._done = () => { };\r\n            this._progress = () => { };\r\n            this._success = () => { };\r\n            this._error = () => { };\r\n\r\n            this._abort = false;\r\n            this._loaded = 0;\r\n            this._complete = false;\r\n            this._busy = false;\r\n\r\n            // self invoking this._loop + force asynchrony (gives time to chain methods synchronously)\r\n            (this._loop = () => setTimeout(() => this.loop(), 25))();\r\n\r\n        }\r\n\r\n        loop() {\r\n\r\n            this._collection_pending = []; // resets pending elements (sequential opt helper array) every time we loop\r\n\r\n            const sequential_mode = true === this._settings.sequential;\r\n\r\n            for (let i = 0; i < this._collection.length; i++) {\r\n\r\n                if (this._abort) {\r\n                    break;\r\n                }\r\n\r\n                let this_load_id = this._collection[i].id,\r\n                    this_load_index = this._collection_instances.findIndex(x => x.id === this_load_id),\r\n                    this_load_instance = new ResourceLoader(this._settings);\r\n\r\n                if (this_load_index === -1) {\r\n                    this._collection_instances.push({ id: this_load_id, instance: this_load_instance });\r\n                    this_load_index = this._collection_instances.findIndex(x => x.id === this_load_id);\r\n                } else {\r\n                    this._collection_instances[this_load_index].instance = this_load_instance;\r\n                }\r\n\r\n                this_load_instance.resource = this._collection[i];\r\n\r\n                this_load_instance.done((element, status, resource, id) => {\r\n\r\n                    if (this._complete || this._abort) {\r\n                        return;\r\n                    }\r\n\r\n                    let a_progress = !isInArray(id, this._collection_loaded);\r\n\r\n                    if (a_progress) {\r\n\r\n                        this._collection_loaded.push(id);\r\n                        this._busy = false;\r\n\r\n                        this._loaded++;\r\n                        this.percentage = this._loaded / this._collection.length * 100;\r\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\r\n\r\n                        let this_resource = { resource: resource, status: status };\r\n                        this._resources_loaded.push(this_resource);\r\n\r\n                        this._progress.call(this, this_resource);\r\n                        this[status !== 'error' ? '_success' : '_error'].call(this, this_resource);\r\n\r\n                        if( $ ){ // TODO: clean?\r\n                            $(element).trigger(pluginPrefix + capitalize(status) + '.' + pluginPrefix, [element, resource]);\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (this._loaded === this._collection.length) {\r\n\r\n                        this._done.call(this, this._resources_loaded);\r\n\r\n                        this._complete = true;\r\n\r\n                    } else if (a_progress && sequential_mode) {\r\n\r\n                        if (this._collection_pending.length) {\r\n\r\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\r\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\r\n\r\n                            if (this._collection_pending.length) {\r\n                                this._busy = this._collection_pending[0].instance.process();\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                if (!sequential_mode || (sequential_mode && !this._busy)) {\r\n                    this._busy = this_load_instance.process();\r\n                }\r\n\r\n                else if (sequential_mode && this._busy) {\r\n\r\n                    if (!this._settings.visible || (this._settings.visible && isVisible(this_load_instance._element))) {\r\n                        this._collection_pending.push({ id: this_load_id, instance: this_load_instance });\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        }\r\n\r\n        done(callback) { // todo refactory\r\n\r\n            if (typeof callback !== 'function') {\r\n                return;\r\n            }\r\n\r\n            const _func = function (resources) {\r\n                callback.call(this, resources);\r\n            };\r\n\r\n            if (this._collection.length) {\r\n\r\n                this._done = _func;\r\n\r\n                this._loop();\r\n\r\n            } else {\r\n                _func();\r\n            }\r\n\r\n        };\r\n\r\n        progress(callback) { // todo refactory\r\n\r\n            if (typeof callback !== 'function')\r\n                return;\r\n\r\n            const _func = function (resource) {\r\n                callback.call(this, resource);\r\n            };\r\n\r\n            if (this._collection.length) {\r\n\r\n                this._progress = _func;\r\n\r\n                this._loop();\r\n\r\n            }\r\n\r\n        };\r\n\r\n        success(callback) { // todo refactory\r\n\r\n            if (typeof callback !== 'function') {\r\n                return;\r\n            }\r\n\r\n            const _func = function (resource) {\r\n                callback.call(this, resource);\r\n            };\r\n\r\n            if (this._collection.length) {\r\n\r\n                this._success = _func;\r\n\r\n                this._loop();\r\n\r\n            }\r\n\r\n        };\r\n\r\n        error(callback) { // todo refactory\r\n\r\n            if (typeof callback !== 'function') {\r\n                return;\r\n            }\r\n\r\n            const _func = function (resource) {\r\n                callback.call(this, resource);\r\n            };\r\n\r\n            if (this._collection.length) {\r\n\r\n                this._error = _func;\r\n\r\n                this._loop();\r\n\r\n            }\r\n\r\n        };\r\n\r\n        abort() {\r\n\r\n            for (const key in this._collection_instances) {\r\n                this._collection_instances[key].instance.abort();\r\n            }\r\n\r\n            if (this._collection.length) {\r\n                this._abort = true;\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    // vanilla public interface\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n    // requirejs syntax\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(pluginMethod, pluginMethod);\r\n        // nodejs syntax\r\n    } else if ('object' === typeof exports) {\r\n        module.exports[pluginMethod] = pluginMethod;\r\n        // standard \"global variable\" syntax\r\n    } else {\r\n        window[pluginMethod] = pluginMethod;\r\n    }\r\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n    // from here jQuery is needed\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n    if (!$) {\r\n        return undefined;\r\n    }\r\n    // - - - - - - - - - - - - - - - - - - - -\r\n\r\n    $[pluginMethod] = ResourcesLoader;\r\n\r\n    class CollectionPopulator {\r\n\r\n        constructor($element, options) {\r\n\r\n            this._$element = $element;\r\n            this._element = $element[0];\r\n\r\n            this._settings = {\r\n                srcAttr: 'data-src',\r\n                srcsetAttr: 'data-srcset',\r\n                backgrounds: false,\r\n                attributes: []\r\n            };\r\n            this._settings = {...this._settings, ...options};\r\n\r\n        }\r\n\r\n        collect(output) {\r\n\r\n            let collection = [];\r\n\r\n            const\r\n                is_plain_data_collection = output === 'plain',\r\n\r\n                src = this._settings.srcAttr,\r\n                srcset = this._settings.srcsetAttr,\r\n\r\n                targets = 'img, video, audio',\r\n                targets_extended = targets + ', picture, source';\r\n\r\n            let $targets = this._$element.find(targets);\r\n            if (this._$element.is(targets)) {\r\n                $targets = $targets.add(this._$element);\r\n            }\r\n            $targets = $targets.filter(function () {\r\n                let $t = $(this),\r\n                    filter = '[' + src + '], [' + srcset + ']';\r\n                return $t.is(filter) || $t.children(targets_extended).filter(filter).length;\r\n            });\r\n            $targets.each(function () {\r\n\r\n                let collection_item = {\r\n                    element: this,\r\n                    resource: $(this).attr(src) || $(this).attr(srcset)\r\n                };\r\n\r\n                if (is_plain_data_collection) {\r\n                    collection_item = collection_item.element;\r\n                }\r\n\r\n                collection.push(collection_item);\r\n\r\n            });\r\n\r\n            if (true === this._settings.backgrounds)\r\n                this._$element.find('*').addBack().not(targets_extended).filter(function () {\r\n                    return $(this).css('background-image') !== 'none';\r\n                }).each(function () {\r\n\r\n                    const url = $(this).css('background-image').match(/\\((.*?)\\)/);\r\n\r\n                    if (null === url || url.length < 2) {\r\n                        return true;\r\n                    }\r\n\r\n                    let collection_item = {\r\n                        element: this,\r\n                        resource: url[1].replace(/('|\")/g, '')\r\n                    };\r\n\r\n                    if (is_plain_data_collection) {\r\n                        collection_item = collection_item.resource;\r\n                    }\r\n\r\n                    collection.push(collection_item);\r\n\r\n                });\r\n\r\n            if (this._settings.attributes.length)\r\n                for (const attr in this._settings.attributes) {\r\n                    if (this._settings.attributes.hasOwnProperty(attr)) {\r\n\r\n                        this._$element.find('[' + attr + ']:not(' + targets_extended + ')').each(function () {\r\n\r\n                            let collection_item = {\r\n                                element: this,\r\n                                resource: $(this).attr(attr)\r\n                            };\r\n\r\n                            if (is_plain_data_collection) {\r\n                                collection_item = collection_item.resource;\r\n                            }\r\n\r\n                            collection.push(collection_item);\r\n\r\n                        });\r\n\r\n                        if (this._$element.is('[' + attr + ']') && !this._$element.is(targets_extended)) {\r\n\r\n                            let collection_item = {\r\n                                element: this._element,\r\n                                resource: this._$element.attr(attr)\r\n                            };\r\n\r\n                            if (is_plain_data_collection) {\r\n                                collection_item = collection_item.resource;\r\n                            }\r\n\r\n                            collection.push(collection_item);\r\n\r\n                        }\r\n\r\n                    }\r\n                }\r\n\r\n            return collection;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const\r\n        $document = $(document),\r\n        $window = $(window),\r\n        // thanks https://gist.github.com/beaucharman/e46b8e4d03ef30480d7f4db5a78498ca\r\n        throttle = (callback, wait, context = this) => {\r\n            let timeout = null,\r\n                callbackArgs = null\r\n            const later = () => {\r\n                callback.apply(context, callbackArgs)\r\n                timeout = null\r\n            }\r\n            return function () {\r\n                if (!timeout) {\r\n                    callbackArgs = arguments\r\n                    timeout = setTimeout(later, wait)\r\n                }\r\n            }\r\n        };\r\n\r\n    let method_collection = [];\r\n\r\n    $.fn[pluginMethod] = function (options) {\r\n\r\n        let original_user_options = options;\r\n\r\n        if (typeof options !== 'object') {\r\n            options = {};\r\n        }\r\n\r\n        let settings = {\r\n\r\n            srcAttr: 'data-src',\r\n            srcsetAttr: 'data-srcset',\r\n\r\n            visible: false,\r\n\r\n            sequential: false,\r\n\r\n            backgrounds: false,\r\n            extraAttrs: [],\r\n\r\n            playthrough: false,\r\n\r\n            early: false,\r\n            earlyTimeout: 0,\r\n\r\n            onProgress: () => { },\r\n            onLoad: () => { },\r\n            onError: () => { },\r\n\r\n            onComplete: () => { },\r\n\r\n        };\r\n        settings = {...settings,...options};\r\n\r\n        let callback = settings.onComplete;\r\n        if ($.isFunction(original_user_options)) {\r\n            callback = original_user_options;\r\n        }\r\n\r\n        if (!$.isArray(settings.attributes)) {\r\n            settings.attributes = [];\r\n        }\r\n        if (typeof settings.attributes === 'string') {\r\n            settings.attributes = settings.attributes.split(' ');\r\n        }\r\n\r\n        return this.each(function (i) {\r\n\r\n            const\r\n                element = this,\r\n                $element = $(element),\r\n                collection = new CollectionPopulator($element, settings).collect('plain'),\r\n                unique_method_pluginName = generateInstanceID() + i,\r\n\r\n                this_load_instance = new ResourcesLoader(collection, settings);\r\n\r\n            method_collection.push({\r\n                id: unique_method_pluginName,\r\n                instance: this_load_instance,\r\n                element: element,\r\n                timeout: null\r\n            });\r\n\r\n            this_load_instance.progress(function (resource) {\r\n\r\n                $element.trigger(pluginPrefix + 'Progress.' + pluginPrefix, [element, resource]);\r\n\r\n                const this_arguments = [this_load_instance, resource];\r\n\r\n                if (typeof settings.onProgress === 'function') {\r\n                    settings.onProgress.apply(element, this_arguments);\r\n                }\r\n\r\n                let event_name = capitalize(resource.status);\r\n                if (typeof settings['on' + event_name] === 'function') {\r\n                    settings['on' + event_name].apply(element, this_arguments);\r\n                }\r\n\r\n            });\r\n\r\n            this_load_instance.done(function (resources) {\r\n\r\n                $element.trigger(pluginPrefix + 'Complete.' + pluginPrefix, [element, resources]);\r\n                callback.apply(element, [this_load_instance, resources]);\r\n\r\n                if (settings.visible) {\r\n                    $window.off('scroll.' + unique_method_pluginName);\r\n                }\r\n\r\n                // refresh other method calls for same el (omitting this one)\r\n                method_collection = method_collection.filter(x => x.id !== unique_method_pluginName);\r\n                method_collection.forEach((this_method_collection) => {\r\n                    if ($element.is(this_method_collection.element)) {\r\n                        this_method_collection.instance.loop();\r\n                    }\r\n                });\r\n\r\n            });\r\n\r\n            if (settings.visible) {\r\n                $window.on('scroll.' + unique_method_pluginName, throttle(() => this_load_instance.loop(), 250));\r\n            }\r\n\r\n            if (true === settings.early) for (let key in method_collection) {\r\n\r\n                let this_method_collection = method_collection[key];\r\n\r\n                if (method_collection[key].id === unique_method_pluginName) {\r\n\r\n                    clearTimeout(this_method_collection.timeout);\r\n\r\n                    let timeout = parseInt(settings.earlyTimeout);\r\n\r\n                    this_method_collection.timeout = setTimeout(function () {\r\n\r\n                        // todo appropriate method for setting settings?\r\n                        this_method_collection.instance._settings.visible = false;\r\n                        this_method_collection.instance._settings.sequential = true;\r\n\r\n                        this_method_collection.instance.loop();\r\n\r\n                    }, !isNaN(timeout) && isFinite(timeout) ? timeout : 0);\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n    };\r\n\r\n})(window, document, jQuery);"],"file":"nite.loader.min.js"}