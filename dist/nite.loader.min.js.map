{"version":3,"sources":["nite.loader.js"],"names":["a","b","c","d","Math","floor","e","f","g","console","pop","error","bubbles","cancelable","detail","createEvent","initCustomEvent","CustomEvent","prototype","Event","Array","findIndex","TypeError","Object","length","arguments","call","filter","push","h","i","charAt","toUpperCase","slice","j","k","l","nite","uniqueId","random","m","inViewport","ratio","getBoundingClientRect","right","bottom","left","width","top","height","is","css","n","HTMLElement","nodeType","style","ownerDocument","o","inArray","currentSrc","complete","readyState","p","naturalWidth","videoWidth","q","image","audio","video","keys","format","extension","split","hasOwnProperty","RegExp","test","match","replace","tagName","toLowerCase","r","constructor","_settings","extend","srcAttr","srcsetAttr","playthrough","visible","_id","_id_event","_element","_$element","_resource","_busy","_format","_done","noop","_success","_error","_callback","removeData","src","type","apply","_exists","off","closest","removeAttr","find","attr","data","round","buffered","end","seekable","each","load","setInterval","duration","currentTime","paused","play","clearInterval","pause","done","isFunction","abort","resource","id","createElement","process","s","_collection","_collection_loaded","_collection_instances","_collection_pending","_resources_loaded","isArray","percentage","_progress","_abort","_loaded","_complete","_loop","setTimeout","loop","sequential","instance","parseFloat","toFixed","status","trigger","progress","success","t","backgrounds","attributes","collect","add","children","element","addBack","not","u","fn","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","timeout","forEach","scroll","fps","on","Date","now","clearTimeout","isNumeric","parseInt","window","document","jQuery"],"mappings":"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","file":"nite.loader.min.js","sourcesContent":["/*! JQuery Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\n(function(window, document, $, undefined){\n    'use strict';\n\n    const\n        namespace_prefix = 'nite',\n        namespace_method = namespace_prefix+'Load',\n        namespace = namespace_method+'er';\n\n\n    // thanks to https://github.com/paulmillr/console-polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function(global) {\n        if (!global.console)\n            global.console = {};\n        let con = global.console,\n            prop, method,\n            dummy = function() {},\n            properties = ['memory'],\n            methods = ('assert,clear,count,debug,dir,dirxml,error,exception,group,' +\n                'groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,' +\n                'show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn').split(',');\n        while (prop = properties.pop())\n            if (!con[prop])\n                con[prop] = {};\n        while (method = methods.pop())\n            if (!con[method])\n                con[method] = dummy;\n    })(window);\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // - - - - - - - - - - - - - - - - - - - -\n    if( !$ ) {\n        console.error('jQuery is needed for '+namespace+' to work!');\n        return undefined;\n    }\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function () {\n\n        if ( typeof window.CustomEvent === \"function\" )\n            return false; //If not IE\n\n        function CustomEvent ( event, params ) {\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            let evt = document.createEvent( 'CustomEvent' );\n            evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n\n    })();\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // thanks to https://github.com/jsPolyfill/Array.prototype.findIndex\n    // todo check efficiency and reliability in MS Internet Explorer\n    // - - - - - - - - - - - - - - - - - - - -\n    Array.prototype.findIndex = Array.prototype.findIndex || function(callback) {\n        if (this === null) {\n            throw new TypeError('Array.prototype.findIndex called on null or undefined');\n        } else if (typeof callback !== 'function') {\n            throw new TypeError('callback must be a function');\n        }\n        const\n            list = Object(this),\n            // Makes sures is always has an positive integer as length.\n             length = list.length >>> 0,\n             thisArg = arguments[1];\n        for (let i = 0; i < length; i++) {\n            if ( callback.call(thisArg, list[i], i, list) ) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    // thanks to https://gist.github.com/eliperelman/1031656\n    // todo check efficiency and reliability in MS Internet Explorer\n    // - - - - - - - - - - - - - - - - - - - -\n    [].filter||(Array.prototype.filter=function(a,b,c,d,e){c=this;d=[];for(e in c)~~e+''==e&&e>=0&&a.call(b,c[e],+e,c)&&d.push(c[e]);return d})\n    // - - - - - - - - - - - - - - - - - - - -\n\n\n    let cache = [];\n\n    const\n\n        capitalize = function(string){\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        },\n\n        $document = $(document),\n        $window = $(window),\n\n        unique_id = function(){\n\n            return $.nite && 'uniqueId' in $.nite ? $.nite.uniqueId() : Math.floor(Math.random() * (9999 - 1000)) + 1000;\n\n        },\n\n        is_visible = function(element){\n\n            const $el = $(element);\n\n            let in_viewport = false;\n\n            if( $.nite && 'inViewport' in $.nite )\n                in_viewport = $.nite.inViewport(element).ratio;\n\n            else{\n\n                const rect = element.getBoundingClientRect();\n\n                in_viewport = !( rect.right < 0 || rect.bottom < 0 || rect.left > $window.width() || rect.top > $window.height() );\n\n            }\n\n            return in_viewport && $el.is(':visible') && $el.css('visibility') !== 'hidden';\n\n        },\n\n        is_html_object = function( object ){\n\n            if( typeof object !== 'object' )\n                return false;\n\n            try {\n                return object instanceof HTMLElement;\n            }\n            catch(e){\n                return object.nodeType === 1 && typeof object.style === 'object' && typeof object.ownerDocument === 'object';\n            }\n\n        },\n\n        is_loaded = function(element){\n\n            return (\n                typeof element === 'string'\n                && $.inArray(element, cache) > -1\n            )\n            || (\n                is_html_object(element)\n                && ( 'currentSrc' in element && element.currentSrc.length )\n                && ( ( 'complete' in element && element.complete ) || ( 'readyState' in element && element.readyState >= 2 ) )\n            );\n\n        },\n\n        is_broken = function(element){\n\n            return is_loaded(element) && (\n                    (\n                        typeof element === 'object' && (\n                            ( 'naturalWidth' in element && Math.floor(element.naturalWidth) === 0 )\n                            ||\n                            ( 'videoWidth' in element && element.videoWidth === 0 )\n                        )\n                    )\n                    || typeof element === 'string' // todo check if is url maybe?\n                );\n\n        },\n        \n        is_format = function( item, expected_format ){\n\n            const\n                format_extensions = {\n                    image : 'jp[e]?g||jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\n                    audio : 'mp3|ogg|oga|spx|ogg|wav',\n                    video : 'mp4|ogv|webm'\n                },\n                format_names = Object.keys(format_extensions),\n                base64_heading = '\\;base64\\,';\n\n            let output = { format: null, extension: null };\n\n            if( typeof item === 'string' ) {\n\n                item = item.split('?')[0]; // get rid of query strings\n                item = item.split('#')[0]; // get rid of hashes\n\n                if (item === '')\n                    return false;\n\n                let format_queue = undefined !== expected_format ? [ expected_format ] : format_names;\n\n                for (const x in format_queue) {\n\n                    if (format_queue.hasOwnProperty(x)){\n\n                        if (new RegExp('(\\.(' + format_extensions[format_queue[x]] + ')$)|' + base64_heading, 'g').test(item)) {\n\n                            if (new RegExp(base64_heading, 'g').test(item)) {\n\n                                let matches64 = item.match(new RegExp('^data:' + format_queue[x] + '\\/(' + format_extensions[format_queue[x]] + ')', 'g'));\n\n                                if ( !matches64 || null === matches64 )\n                                    continue;\n\n                                matches64 = matches64[0];\n\n                                output.format = format_queue[x];\n                                output.extension = matches64.replace('data:' + format_queue[x] + '/', '');\n\n                                break;\n\n                            } else {\n\n                                let matches = item.match(new RegExp(format_extensions[format_queue[x]], 'g'));\n\n                                if (matches) {\n\n                                    output.format = format_queue[x];\n                                    output.extension = matches[0];\n\n                                    break;\n\n                                }\n\n                            }\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            if( is_html_object(item) ){\n\n                let tag_name = item.tagName.toLowerCase();\n                \n                if( $.inArray(tag_name, format_names) > -1 )\n                    output.format = item.tagName.toLowerCase();\n\n                if( tag_name === 'img' )\n                    output.format = 'image';\n\n            }\n\n            return output;\n    \n        };\n\n    class ResourceLoader {\n\n        constructor(options){\n\n            // todo make _vars really private\n            // todo make useful vars since this class is not public but is returned in .progress() callback\n            this._settings  = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                playthrough : false,\n                visible     : false,\n            }, options);\n\n            this._id        = null;\n            this._id_event  = null;\n\n            this._element   = null;\n            this._$element  = $();\n\n            this._resource  = null;\n            this._busy      = false;\n\n            this._format    = null;\n\n            this._done      = $.noop;\n            this._success   = $.noop;\n            this._error     = $.noop;\n\n            this._callback  = (e) => {\n\n                this._$element.removeData(namespace);\n\n                this._busy = false;\n\n                const src = this._element.currentSrc || this._element.src;\n\n                if( $.inArray(src, cache) === -1 )\n                    cache.push(src);\n\n                let this_arguments = [ this._element, e.type, src, this._id ];\n\n                this[ e.type !== 'error' ? '_success' : '_error' ].apply(this, this_arguments);\n                this._done.apply(this, this_arguments);\n\n            };\n\n        }\n\n        set resource( data ){\n\n            const\n                element_resource = is_html_object(data.resource),\n                string_resource = typeof data.resource === 'string';\n\n            if( !element_resource && !string_resource )\n                return;\n\n            this._id = data.id;\n            this._format = is_format(data.resource).format;\n\n            this._exists = element_resource; // todo maybe search for an element with this src\n\n            if( string_resource ){\n\n                let is_img = this._format === 'image';\n\n                this._element = document.createElement(is_img ? 'img' : this._format);\n\n                if( is_img )\n                    this._settings.srcsetAttr = 'data-srcset';\n                this._settings.srcAttr = 'data-src';\n\n                this._resource = data.resource;\n\n            }\n\n            if( element_resource )\n                this._element = data.resource;\n\n            this._$element = $(this._element);\n\n            if( string_resource ){\n\n                this._$element\n                    .data(this._settings.srcAttr.replace('data-', ''), this._resource)\n                    .data(this._settings.srcsetAttr.replace('data-', ''), this._resource)\n                    .attr(this._settings.srcAttr, this._resource)\n                    .attr(this._settings.srcsetAttr, this._resource);\n\n            }\n\n            this._id_event = this._$element.data(namespace);\n            this._busy = this._id_event !== undefined;\n            this._id_event = this._busy ? this._id_event : namespace + '_unique_' + this._element.tagName + '_'+ unique_id();\n\n        }\n\n        /**\n         *\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\n         */\n        process(){\n\n            const\n                src = this._settings.srcAttr,\n                src_clean = this._settings.srcAttr.replace('data-', '');\n\n            if ( is_loaded( this._exists ? this._element : this._resource ) ) {\n\n                if (!this._busy)\n                    this._$element.off('.' + this._id_event); // todo this should be called when in callback\n\n                this._callback(new CustomEvent(!is_broken( this._exists ? this._element : this._resource ) ? 'load' : 'error'));\n\n                return false;\n\n            }else if( this._exists && this._settings.visible && !is_visible(this._element) ){\n\n                return false;\n\n            }else{\n\n                if( this._format === 'image' ) {\n\n                    this._$element[this._busy ? 'on' : 'one']('load.' + this._id_event + ' error.' + this._id_event, this._callback);\n\n                    const\n                        $picture = this._$element.closest('picture'),\n                        srcset = this._settings.srcsetAttr,\n                        srcset_clean = this._settings.srcsetAttr.replace('data-', '');\n\n                    if ($picture.length && 'HTMLPictureElement' in window ) {\n\n                        this._$element\n                            .removeData(srcset_clean)\n                            .removeAttr(srcset)\n                            .removeData(src_clean)\n                            .removeAttr(src);\n\n                        $picture.find('source[' + srcset + ']')\n                            .attr('srcset', $picture.data(srcset_clean))\n                            .removeData(srcset_clean)\n                            .removeAttr(srcset);\n\n                    } else {\n\n                        if (this._$element.is('[' + srcset + ']'))\n                            this._$element\n                                .attr('srcset', this._$element.data(srcset_clean))\n                                .removeData(srcset_clean)\n                                .removeAttr(srcset);\n\n                        if (this._$element.is('[' + src + ']'))\n                            this._$element\n                                .attr('src', this._$element.data(src_clean))\n                                .removeData(src_clean)\n                                .removeAttr(src);\n\n                    }\n\n                }else if( this._format === 'video' || this._format === 'audio' ){\n\n                    const\n\n                        is_playthrough_mode__normal = true === this._settings.playthrough,\n                        is_playthrough_mode__full = 'full' === this._settings.playthrough,\n\n                        $sources = this._$element.find('source'),\n                        is_fully_buffered = function(media){\n\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\n\n                        };\n\n                    let call_media_load = false;\n\n                    if( $sources.length ){\n\n                        let self = this; // todo arrow func ?\n\n                        $sources.each(function() {\n\n                            let $t = $(this);\n\n                            if ( $t.is('[' + src + ']') ) {\n\n                                $t\n                                    .attr('src', $t.data(src_clean))\n                                    .removeData(src_clean)\n                                    .removeAttr(src);\n\n                                call_media_load = true;\n\n                            }\n\n                        })\n                        [this._busy ? 'on' : 'one']('error.' + this._id_event, function(e){\n\n                            const sources_error_id = namespace+'_error';\n\n                            $(this).data(sources_error_id, true);\n\n                            if( $sources.length === $sources.filter(function(){ return true === $(this).data(sources_error_id); }).length )\n                                self._callback(e);\n\n                        });\n\n                    }else{\n\n                        if (this._$element.is('[' + src + ']')) {\n\n                            this._$element\n                                .attr('src', this._$element.data(src_clean))\n                                .removeData(src_clean)\n                                .removeAttr(src)\n                                [this._busy ? 'on' : 'one']('error.' + this._id_event, this._callback);\n\n                            call_media_load = true;\n\n                        }\n\n                    }\n\n                    if( call_media_load )\n                        this._element.load();\n\n                    this._$element\n                        [this._busy ? 'on' : 'one']('loadedmetadata.' + this._id_event, () => {\n\n                            if ( !is_playthrough_mode__normal && !is_playthrough_mode__full )\n                                this._callback(new CustomEvent('load'));\n\n                            if( is_playthrough_mode__full ) {\n\n                                let on_progress_replacement_interval = setInterval(() => {\n\n                                    let is_error = this._element.readyState > 0 && !this._element.duration;\n\n                                    if( is_error || is_fully_buffered(this._element) ){\n\n                                        this._element.currentTime = 0;\n\n                                        if( !is_error && !this._busy && this._element.paused && this._$element.is('[autoplay]') )\n                                            this._element.play();\n\n                                        clearInterval(on_progress_replacement_interval);\n\n                                        this._callback(new CustomEvent( !is_error ? 'load' : 'error' ));\n\n                                    } else {\n\n                                        if( !this._element.paused )\n                                            this._element.pause();\n\n                                        if( !this._busy )\n                                            this._element.currentTime += 2;\n\n                                    }\n\n                                }, 500);\n\n                                this._$element.data(this._id_event, on_progress_replacement_interval);\n\n                            }\n\n                        })\n                        [this._busy ? 'on' : 'one']('canplay.' + this._id_event, () => {\n\n                            if ( is_playthrough_mode__full && this._element.currentTime === 0 && !is_fully_buffered(this._element))\n                                this._element.currentTime++;\n\n                        })\n                        [this._busy ? 'on' : 'one']('canplaythrough.' + this._id_event, () => {\n\n                            if( is_playthrough_mode__normal )\n                                this._callback(new CustomEvent('load'));\n\n                        });\n\n                }else {\n\n                    return false;\n\n                }\n\n                if ( !this._busy )\n                    this._$element.data(namespace, this._id_event);\n\n            }\n\n            this._resource = this._element.currentSrc || this._element.src;\n\n            return !this._busy;\n\n        }\n\n        done(callback){\n\n            if( !$.isFunction(callback) )\n                return;\n\n            this._done = function(element, status, resource, id){\n                callback.apply(this, [element, status, resource, id]);\n            };\n\n        };\n\n        abort(){\n\n            this._$element\n                .off('.' + this._id_event);\n\n            if( is_loaded(this._exists ? this._element : this._resource ) )\n                return;\n\n            const\n                src = this._$element.attr('srcset'),\n                srcset = this._$element.attr('src');\n\n            if( undefined !== src )\n                this._$element\n                    .data(this._settings.srcAttr, src)\n                    .attr(this._settings.srcAttr, src)\n                    .removeAttr('src').removeAttr('srcset');\n\n            if( undefined !== srcset )\n                this._$element\n                    .data(this._settings.srcsetAttr, srcset)\n                    .attr(this._settings.srcsetAttr, srcset)\n                    .removeAttr('src').removeAttr('srcset');\n\n        }\n\n    }\n    \n    class ResourcesLoader {\n\n        constructor(collection, options) {\n\n            // todo make _vars really private\n            this._collection           = [];\n            this._collection_loaded    = [];\n            this._collection_instances = [];\n            this._collection_pending   = [];\n            this._resources_loaded     = [];\n\n            if ($.isArray(collection) && ( typeof collection[0] === 'string' || is_html_object(collection[0]) ))\n                for ( const resource in collection )\n                    if( collection.hasOwnProperty(resource) )\n                        this._collection.push({ id : unique_id(), resource : collection[resource] });\n            if ( typeof collection === 'string' || is_html_object(collection) )\n                this._collection.push({ id : unique_id(), resource : collection });\n\n            this._settings = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                playthrough : false,\n                visible     : false,\n            }, options);\n\n            this.percentage = 0;\n\n            this._done      = $.noop;\n            this._progress  = $.noop;\n            this._success   = $.noop;\n            this._error     = $.noop;\n\n            this._abort     = false;\n            this._loaded    = 0;\n            this._complete  = false;\n            this._busy      = false;\n\n            (this._loop = () => { // self invoking this._loop\n                setTimeout( () => { // force asynchrony (gives time to chain methods synchronously)\n                    this.loop();\n                }, 25);\n            })();\n\n        }\n\n        loop(){\n\n            this._collection_pending = []; // resets pending elements (sequential opt helper array) every time we loop\n\n            const sequential_mode = true === this._settings.sequential;\n\n            for( let i = 0; i < this._collection.length; i++ ){\n\n                if( this._abort )\n                    break;\n\n                let this_load_id = this._collection[i].id,\n                    this_load_index = this._collection_instances.findIndex( x => x.id === this_load_id ),\n                    this_load_instance = new ResourceLoader(this._settings);\n\n                if( this_load_index === -1 ) {\n                    this._collection_instances.push({ id : this_load_id, instance : this_load_instance });\n                    this_load_index = this._collection_instances.findIndex( x => x.id === this_load_id );\n                }else\n                    this._collection_instances[this_load_index].instance = this_load_instance;\n\n                this_load_instance.resource = this._collection[i];\n\n                this_load_instance.done((element, status, resource, id) => {\n\n                    if( this._complete || this._abort )\n                        return;\n\n                    let a_progress = $.inArray(id, this._collection_loaded) === -1;\n\n                    if( a_progress ) {\n\n                        this._collection_loaded.push(id);\n                        this._busy = false;\n\n                        this._loaded++;\n                        this.percentage = this._loaded / this._collection.length * 100;\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\n\n                        let this_resource = { resource : resource, status : status };\n                        this._resources_loaded.push(this_resource);\n\n                        this._progress.call(this, this_resource);\n                        this[ status !== 'error' ? '_success' : '_error' ].call(this, this_resource);\n\n                        $(element).trigger(namespace_prefix + capitalize(status) + '.' + namespace_prefix, [ element, resource ]);\n\n                    }\n\n                    if( this._loaded === this._collection.length ) {\n\n                        this._done.call(this, this._resources_loaded);\n\n                        this._complete = true;\n\n                    }else if( a_progress && sequential_mode ){\n\n                        if( this._collection_pending.length ){\n\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\n                            this._collection_pending = this._collection_pending.filter(x => x.id !== id);\n\n                            if( this._collection_pending.length )\n                                this._busy = this._collection_pending[0].instance.process();\n\n                        }\n\n                    }\n\n                });\n\n                if( !sequential_mode || ( sequential_mode && !this._busy ) )\n                    this._busy = this_load_instance.process();\n\n                else if( sequential_mode && this._busy ){\n\n                    if( !this._settings.visible || ( this._settings.visible && is_visible(this_load_instance._element) ) )\n                        this._collection_pending.push({ id : this_load_id, instance : this_load_instance });\n\n                }\n\n\n            }\n\n        }\n\n        done(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resources){\n                callback.call(this, resources);\n            };\n\n            if( this._collection.length ) {\n\n                this._done = _func;\n\n                this._loop();\n\n            }else\n                _func();\n\n        };\n\n        progress(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._progress = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        success(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._success = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        error(callback){ // todo refactory\n\n            if( !$.isFunction(callback) )\n                return;\n\n            const _func = function(resource){\n                callback.call(this, resource);\n            };\n\n            if( this._collection.length ) {\n\n                this._error = _func;\n\n                this._loop();\n\n            }\n\n        };\n\n        abort(){\n\n            for( const key in this._collection_instances )\n                this._collection_instances[ key ].instance.abort();\n\n            if( this._collection.length )\n                this._abort = true;\n\n        };\n\n    }\n\n    class CollectionPopulator {\n\n        constructor($element, options) {\n\n            this._$element  = $element;\n            this._element   = $element[0];\n\n            this._settings  = $.extend(true, {\n                srcAttr     : 'data-src',\n                srcsetAttr  : 'data-srcset',\n                backgrounds : false,\n                attributes  : []\n            }, options);\n\n        }\n\n        collect( output ) {\n\n            let collection = [];\n\n            const\n                is_plain_data_collection = output === 'plain',\n\n                src = this._settings.srcAttr,\n                srcset = this._settings.srcsetAttr,\n\n                targets = 'img, video, audio',\n                targets_extended = targets + ', picture, source';\n\n            let $targets = this._$element.find(targets);\n            if (this._$element.is(targets))\n                $targets = $targets.add(this._$element);\n            $targets = $targets.filter(function(){\n                let $t = $(this),\n                    filter = '['+src+'], ['+srcset+']';\n                return $t.is(filter) || $t.children(targets_extended).filter(filter).length;\n            });\n            $targets.each(function () {\n\n                let collection_item = {\n                    element : this,\n                    resource : $(this).attr(src) || $(this).attr(srcset)\n                };\n\n                if( is_plain_data_collection )\n                    collection_item = collection_item.element;\n\n                collection.push(collection_item);\n\n            });\n\n            if (true === this._settings.backgrounds)\n                this._$element.find('*').addBack().not(targets_extended).filter(function () {\n                    return $(this).css('background-image') !== 'none';\n                }).each(function () {\n\n                    const url = $(this).css('background-image').match(/\\((.*?)\\)/);\n\n                    if( null === url || url.length < 2 )\n                        return true;\n\n                    let collection_item = {\n                        element : this,\n                        resource : url[1].replace(/('|\")/g,'')\n                    };\n\n                    if( is_plain_data_collection )\n                        collection_item = collection_item.resource;\n\n                    collection.push(collection_item);\n\n                });\n\n            if (this._settings.attributes.length)\n                for (const attr in this._settings.attributes) {\n                    if( this._settings.attributes.hasOwnProperty(attr) ) {\n\n                        this._$element.find('[' + attr + ']:not(' + targets_extended + ')').each(function () {\n\n                            let collection_item = {\n                                element : this,\n                                resource : $(this).attr(attr)\n                            };\n\n                            if( is_plain_data_collection )\n                                collection_item = collection_item.resource;\n\n                            collection.push(collection_item);\n\n                        });\n\n                        if (this._$element.is('[' + attr + ']') && !this._$element.is(targets_extended)) {\n\n                            let collection_item = {\n                                element: this._element,\n                                resource: this._$element.attr(attr)\n                            };\n\n                            if( is_plain_data_collection )\n                                collection_item = collection_item.resource;\n\n                            collection.push(collection_item);\n\n                        }\n\n                    }\n                }\n\n            return collection;\n\n        }\n\n    }\n\n    $[namespace_method] = ResourcesLoader;\n\n    let method_collection = [];\n\n    $.fn[namespace_method] = function(options){\n\n        let original_user_options = options;\n\n        if( typeof options !== 'object' )\n            options = {};\n\n        let settings = $.extend(true, {\n\n            srcAttr       : 'data-src',\n            srcsetAttr    : 'data-srcset',\n\n            visible       : false,\n\n            sequential    : false,\n\n            backgrounds   : false,\n            extraAttrs    : [],\n\n            playthrough   : false,\n\n            early         : false,\n            earlyTimeout  : 0,\n\n            onProgress    : $.noop,\n            onLoad        : $.noop,\n            onError       : $.noop,\n\n            onComplete    : $.noop,\n\n        }, options);\n\n        let callback = settings.onComplete;\n        if( $.isFunction(original_user_options) )\n            callback = original_user_options;\n\n        if( !$.isArray(settings.attributes) )\n            settings.attributes = [];\n        if( typeof settings.attributes === 'string' )\n            settings.attributes = settings.attributes.split(' ');\n\n        return this.each(function(){\n\n            const\n                element = this,\n                $element = $(element),\n                collection = new CollectionPopulator($element, settings).collect('plain'),\n                unique_method_namespace = namespace + '_' + unique_id(),\n\n                this_load_instance = new ResourcesLoader(collection, settings);\n\n            method_collection.push({\n                id : unique_method_namespace,\n                instance : this_load_instance,\n                element : element,\n                timeout : null\n            });\n\n            this_load_instance.progress(function (resource) {\n\n                $element.trigger(namespace_prefix+'Progress.'+namespace_prefix, [element, resource]);\n\n                const this_arguments = [ this_load_instance, resource ];\n\n                if( $.isFunction(settings.onProgress) )\n                    settings.onProgress.apply(element, this_arguments);\n\n                let event_name = capitalize(resource.status);\n                if( $.isFunction(settings['on'+event_name]) )\n                    settings['on'+event_name].apply(element, this_arguments);\n\n            });\n\n            this_load_instance.done(function(resources){\n\n                $element.trigger(namespace_prefix + 'Complete.' + namespace_prefix, [ element, resources ]);\n                callback.apply(element, [ this_load_instance, resources ]);\n\n                if( settings.visible )\n                    $( $.nite && 'scroll' in $.nite ? $document : $window ).off('scroll.' + unique_method_namespace);\n\n                // refresh other method calls for same el (omitting this one)\n                method_collection = method_collection.filter( x => x.id !== unique_method_namespace );\n                method_collection.forEach((this_method_collection) => {\n                    if ($element.is(this_method_collection.element))\n                        this_method_collection.instance.loop();\n                });\n\n            });\n\n            if( settings.visible ){\n\n                if( $.nite && 'scroll' in $.nite )\n                    $.nite.scroll(unique_method_namespace, function(){ this_load_instance.loop(); }, { fps : 25 });\n\n                else{\n\n                    const throttle_scroll_event = function(fn, wait) {\n                        let time = Date.now();\n                        return function() {\n                            if( ( time + wait - Date.now() ) < 0 ){\n                                fn();\n                                time = Date.now();\n                            }\n                        }\n                    };\n\n                    $window.on('scroll.'+unique_method_namespace, throttle_scroll_event(function(){ this_load_instance.loop(); }, 1000));\n\n                }\n\n            }\n\n            if( true === settings.early ) for( let key in method_collection ) {\n\n                let this_method_collection = method_collection[key];\n\n                if (method_collection[key].id === unique_method_namespace) {\n\n                    clearTimeout(this_method_collection.timeout);\n\n                    this_method_collection.timeout = setTimeout(function () {\n\n                        // todo appropriate method for setting settings?\n                        this_method_collection.instance._settings.visible = false;\n                        this_method_collection.instance._settings.sequential = true;\n\n                        this_method_collection.instance.loop();\n\n                    }, $.isNumeric(settings.earlyTimeout) ? parseInt(settings.earlyTimeout) : 0);\n\n                    break;\n\n                }\n\n            }\n\n        });\n\n    };\n\n})(window, document, jQuery);"]}