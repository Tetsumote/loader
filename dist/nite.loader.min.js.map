{"version":3,"sources":["nite.loader.js"],"names":["window","document","$","undefined","console","prop","method","con","dummy","properties","methods","split","pop","CustomEvent","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","prototype","Event","Array","findIndex","Object","defineProperty","value","predicate","this","TypeError","o","len","length","thisArg","arguments","k","kValue","call","configurable","writable","isArray","arg","toString","filter","func","res","t","c","i","String","startsWith","search","pos","substr","includes","start","indexOf","generateInstanceID","Math","floor","random","pluginName","pluginMethod","pluginInstance","privateEventsStorage","detachEventListener","element","events","keys","forEach","key","replace","type","join","removeEventListener","handler","attachEventListener","once","count","_handler","addEventListener","hyphensToCamelCase","string","g","toUpperCase","capitalize","charAt","slice","nodelistToArray","nodelist","isInArray","needle","stack","isVisible","getComputedStyle","bodyEl","getElementsByTagName","winWidth","innerWidth","documnt","documentElement","clientWidth","winHeight","innerHeight","clientHeight","rect","getBoundingClientRect","right","bottom","left","top","isHTMLObject","object","HTMLElement","e","nodeType","style","ownerDocument","isLoaded","currentSrc","complete","readyState","isBroken","naturalWidth","videoWidth","decodeResource","item","expectedFormat","formatExtensions","image","audio","video","formatNames","output","format","extension","formatQueue","x","hasOwnProperty","RegExp","test","matches64","match","matches","tagName","toLowerCase","SingleLoader","[object Object]","options","_settings","srcAttr","srcsetAttr","playthrough","visible","_id","_idEvent","_busy","_element","_resource","_format","_done","_success","_error","_callback","src","push","thisArguments","apply","resource","data","elementResource","stringResource","id","_exists","isImg","createElement","dataset","setAttribute","picture","closest","querySelectorAll","el","isPlaythroughModeNormal","isPlaythroughModeFull","sources","isFullyBuffered","media","buffered","round","end","seekable","callMediaLoad","source","sourcesErrorId","thisSource","load","onProgressReplacementInterval","setInterval","isError","duration","currentTime","paused","play","clearInterval","pause","callback","status","getAttribute","srcset","removeAttribute","Loader","_collection","_collectionLoaded","_collectionInstances","_collectionPending","_resourcesLoaded","backgrounds","attributes","contains","percentage","_progress","_loop","_abort","_loaded","_complete","collection","targets","targetsExtended","targetsTags","target","children","collectionItem","targetsBg","backgroundImage","url","attr","sequentialMode","sequential","thisLoadId","thisLoadIndex","thisLoadInstance","instance","done","aProgress","parseFloat","toFixed","thisResource","_func","resources","abort","define","amd","exports","module","$window","throttle","wait","context","timeout","callbackArgs","later","setTimeout","methodCollection","fn","originalUserOptions","settings","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","isFunction","each","$element","uniqueMethodPluginName","collect","progress","trigger","pluginPrefix","eventName","off","thisMethodCollection","is","on","clearTimeout","parseInt","isNaN","isFinite","jQuery"],"mappings":"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","sourcesContent":["/*! JQuery Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\n(function (window, document, $, undefined) {\n    'use strict';\n\n    // thanks to https://github.com/paulmillr/console-polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function () {\n        if (!window.console) {\n            window.console = {};\n        }\n        let con = window.console,\n            prop, method,\n            dummy = () => { },\n            properties = ['memory'],\n            methods = ('assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn').split(',');\n        while (prop = properties.pop()) {\n            if (!con[prop]) {\n                con[prop] = {};\n            }\n        }\n        while (method = methods.pop()) {\n            if (!con[method]) {\n                con[method] = dummy;\n            }\n        }\n    })();\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    (function () {\n        if (typeof window.CustomEvent === \"function\") {\n            return false;\n        }\n        function CustomEvent(event, params) {\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            const evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n        CustomEvent.prototype = window.Event.prototype;\n        window.CustomEvent = CustomEvent;\n    })();\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    if (!Array.prototype.findIndex) {\n        Object.defineProperty(Array.prototype, 'findIndex', {\n            value: function (predicate) {\n                if (this == null) {\n                    throw new TypeError('\"this\" is null or not defined');\n                }\n                let o = Object(this);\n                let len = o.length >>> 0;\n                if (typeof predicate !== 'function') {\n                    throw new TypeError('predicate must be a function');\n                }\n                let thisArg = arguments[1];\n                let k = 0;\n                while (k < len) {\n                    let kValue = o[k];\n                    if (predicate.call(thisArg, kValue, k, o)) {\n                        return k;\n                    }\n                    k++;\n                }\n                return -1;\n            },\n            configurable: true,\n            writable: true\n        });\n    }\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    Array.isArray = Array.isArray || function (arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    Array.prototype.filter = Array.prototype.filter || function (func, thisArg) {\n        'use strict';\n        if (!((typeof func === 'Function' || typeof func === 'function') && this)) {\n            throw new TypeError();\n        }\n        let len = this.length >>> 0,\n            res = new Array(len),\n            t = this, c = 0, i = -1;\n        if (thisArg === undefined) {\n            while (++i !== len) {\n                if (i in this) {\n                    if (func(t[i], i, t)) {\n                        res[c++] = t[i];\n                    } else {\n                        while (++i !== len) {\n                            if (i in this) {\n                                if (func.call(thisArg, t[i], i, t)) {\n                                    res[c++] = t[i];\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        res.length = c;\n        return res;\n    }\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    String.prototype.startsWith = String.prototype.startsWith || function (search, pos) {\n        return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    String.prototype.includes = String.prototype.includes || function (search, start) {\n        'use strict';\n        if (typeof start !== 'number') {\n            start = 0;\n        }\n\n        if (start + search.length > this.length) {\n            return false;\n        } else {\n            return this.indexOf(search, start) !== -1;\n        }\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n    // - - - - - - - - - - - - - - - - - - - -\n    String.prototype.includes = String.prototype.includes || function (search, start) {\n        'use strict';\n        if (typeof start !== 'number') {\n            start = 0;\n        }\n        if (start + search.length > this.length) {\n            return false;\n        } else {\n            return this.indexOf(search, start) !== -1;\n        }\n    };\n    // - - - - - - - - - - - - - - - - - - - -\n\n    const\n        generateInstanceID = function () {\n            return Math.floor(Math.random() * (9999 - 1000)) + 1000;\n        },\n        pluginPrefix = 'nite',\n        pluginMethod = pluginPrefix + 'Load',\n        pluginName = pluginMethod + 'er',\n        pluginInstance = generateInstanceID();\n\n    window[pluginName + 'Cache'] = [];\n\n    let privateEventsStorage = {};\n\n    const\n        eventNamespaceParserSeparator = '__namespace__',\n        detachEventListener = (element, events) => {\n\n            if (!element || typeof events !== 'string') {\n                return;\n            }\n\n            if (events.startsWith('.')) {\n                Object.keys(privateEventsStorage).forEach(key => {\n                    if (key.replace(eventNamespaceParserSeparator, '.').includes(events) && privateEventsStorage[key].element === element) {\n                        detachEventListener(element, key.replace(eventNamespaceParserSeparator, '.'));\n                    }\n                });\n            } else {\n\n                events = events.split('.');\n\n                const\n                    type = events[0],\n                    namespace = events[1];\n\n                if (namespace) {\n                    events = events.join(eventNamespaceParserSeparator);\n                }\n\n                if (events in privateEventsStorage) {\n                    element.removeEventListener(type, privateEventsStorage[events].handler);\n                    delete privateEventsStorage[events];\n                }\n            }\n\n        },\n        attachEventListener = (element, events, handler, once) => {\n\n            if (!element || typeof events !== 'string' || typeof handler !== 'function') {\n                return;\n            }\n\n            events = events.split('.');\n\n            const\n                type = events[0],\n                namespace = events[1];\n\n            if (namespace) {\n                events = events.join(eventNamespaceParserSeparator);\n            }\n\n            privateEventsStorage[events] = {\n                element: element,\n                count: 0,\n                once: false\n            };\n\n            if (true === once) {\n                let _handler = handler;\n                handler = function (event) {\n                    privateEventsStorage[events].count++;\n                    if (privateEventsStorage[events].once && privateEventsStorage[events].count > 1) {\n                        return;\n                    }\n                    _handler.call(this, event);\n                    detachEventListener(element, events);\n                }\n            } else {\n                once = false;\n            }\n\n            privateEventsStorage[events] = {\n                ...privateEventsStorage[events], ...{\n                    handler: handler,\n                    once: once\n                }\n            };\n            element.addEventListener(type, privateEventsStorage[events].handler, { once: once });\n\n        },\n        hyphensToCamelCase = string => {\n            return string.replace(/-([a-z])/g, g => g[1].toUpperCase());\n        },\n        capitalize = string => {\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        },\n        nodelistToArray = nodelist => {\n            return [...nodelist];\n        },\n        isInArray = (needle, stack) => {\n            return stack.indexOf(needle) > -1;\n        },\n        isVisible = element => {\n\n            if (window.getComputedStyle(element, 'display') === 'none') {\n                return false;\n            }\n\n            const\n                bodyEl = document.getElementsByTagName('body')[0],\n                winWidth = window.innerWidth || documnt.documentElement.clientWidth || bodyEl.clientWidth,\n                winHeight = window.innerHeight || documnt.documentElement.clientHeight || bodyEl.clientHeight,\n                rect = element.getBoundingClientRect();\n\n            return !(rect.right < 0 || rect.bottom < 0 || rect.left > winWidth || rect.top > winHeight);\n\n        },\n        isHTMLObject = object => {\n            if (typeof object !== 'object') {\n                return false;\n            }\n            try {\n                return object instanceof HTMLElement;\n            }\n            catch (e) {\n                return object.nodeType === 1 && typeof object.style === 'object' && typeof object.ownerDocument === 'object';\n            }\n        },\n        isLoaded = element => {\n            return (\n                (\n                    typeof element === 'string'\n                    &&\n                    isInArray(element, window[pluginName + 'Cache'])\n                )\n                ||\n                (\n                    isHTMLObject(element)\n                    && ('currentSrc' in element && element.currentSrc.length)\n                    && (('complete' in element && element.complete) || ('readyState' in element && element.readyState >= 2))\n                )\n            );\n        },\n        isBroken = element => {\n            return (\n                isLoaded(element)\n                &&\n                (\n                    (\n                        typeof element === 'object'\n                        &&\n                        (\n                            ('naturalWidth' in element && Math.floor(element.naturalWidth) === 0)\n                            ||\n                            ('videoWidth' in element && element.videoWidth === 0)\n                        )\n                    )\n                    ||\n                    typeof element === 'string'// TODO: check if is url maybe?\n                )\n            );\n        },\n        decodeResource = (item, expectedFormat) => {\n\n            const\n                formatExtensions = {\n                    image: 'jp[e]?g||jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\n                    audio: 'mp3|ogg|oga|spx|ogg|wav',\n                    video: 'mp4|ogv|webm'\n                },\n                formatNames = Object.keys(formatExtensions),\n                base64Heading = '\\;base64\\,';\n\n            let output = { format: null, extension: null };\n\n            if (typeof item === 'string') {\n\n                item = item.split('?')[0]; // this gets rid of query strings\n                item = item.split('#')[0]; // this gets rid of hashes\n\n                if (item === '') {\n                    return false;\n                }\n\n                let formatQueue = undefined !== expectedFormat ? [expectedFormat] : formatNames;\n\n                for (const x in formatQueue) {\n\n                    if (formatQueue.hasOwnProperty(x)) {\n\n                        if (new RegExp('(\\.(' + formatExtensions[formatQueue[x]] + ')$)|' + base64Heading, 'g').test(item)) {\n\n                            if (new RegExp(base64Heading, 'g').test(item)) {\n\n                                let matches64 = item.match(new RegExp('^data:' + formatQueue[x] + '\\/(' + formatExtensions[formatQueue[x]] + ')', 'g'));\n\n                                if (!matches64 || null === matches64) {\n                                    continue;\n                                }\n\n                                matches64 = matches64[0];\n\n                                output.format = formatQueue[x];\n                                output.extension = matches64.replace('data:' + formatQueue[x] + '/', '');\n\n                                break;\n\n                            } else {\n\n                                let matches = item.match(new RegExp(formatExtensions[formatQueue[x]], 'g'));\n\n                                if (matches) {\n\n                                    output.format = formatQueue[x];\n                                    output.extension = matches[0];\n\n                                    break;\n\n                                }\n\n                            }\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            if (isHTMLObject(item)) {\n\n                let tagName = item.tagName.toLowerCase();\n\n                if (isInArray(tagName, formatNames)) {\n                    output.format = item.tagName.toLowerCase();\n                }\n\n                if (tagName === 'img') {\n                    output.format = 'image';\n                }\n\n            }\n\n            return output;\n\n        };\n\n    // TODO: Promise?\n    // TODO: private vars\n    // TODO: think about useful vars in callback args (this class is not public but its vars are returned in .progress() callback)\n    class SingleLoader {\n\n        constructor(options) {\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n\n            if (!this._settings.srcAttr.startsWith('data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n\n            if (!this._settings.srcsetAttr.startsWith('data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this._id = null;\n            this._idEvent = null;\n            this._busy = false;\n\n            this._element = null;\n            this._resource = null;\n            this._format = null;\n\n\n            this._done = () => { };\n            this._success = () => { };\n            this._error = () => { };\n\n            this._callback = (e) => {\n\n                this._busy = false;\n\n                const src = this._element.currentSrc || this._element.src;\n\n                if (!isInArray(src, window[pluginName + 'Cache']))\n                    window[pluginName + 'Cache'].push(src);\n\n                let thisArguments = [this._element, e.type, src, this._id];\n\n                this[e.type !== 'error' ? '_success' : '_error'].apply(this, thisArguments);\n                this._done.apply(this, thisArguments);\n\n            };\n\n        }\n\n        set resource(data) {\n\n            /* TODO:\n            if( typeof data === 'object' && 'id' in data && 'element' in data && 'resource' in data ){\n\n                this._id = data.id;\n                this._element = data.element;\n                this._resource = data.resource;\n\n                this._format = decodeResource(this._resource).format;\n                this._exists = isHTMLObject(this._element);\n\n                if (!this._exists) {\n\n                    let isImg = this._format === 'image';\n\n                    this._element = document.createElement(isImg ? 'img' : this._format);\n\n                    this._element.dataset[this.srcAttr] = this._resource;\n                    this._element.dataset[this.srcsetAttr] = this._resource;\n\n                }\n\n                this._idEvent = this._element[pluginInstance + '_IDEvent'];\n                this._busy = this._idEvent !== undefined;\n                this._idEvent = this._busy ? this._idEvent : pluginName + '_unique_' + this._element.tagName + '_' + generateInstanceID();\n            \n            }*/\n\n            const\n                elementResource = isHTMLObject(data.resource),\n                stringResource = typeof data.resource === 'string';\n\n            if (!elementResource && !stringResource) {\n                return;\n            }\n\n            this._id = data.id;\n            this._format = decodeResource(data.resource).format;\n\n            this._exists = elementResource;\n\n            if (stringResource) {\n\n                let isImg = this._format === 'image';\n\n                this._element = document.createElement(isImg ? 'img' : this._format);\n\n                if (isImg) {\n                    this.srcsetAttr = 'srcset';\n                    this._settings.srcsetAttr = 'data-' + this.srcsetAttr;\n                    this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n                }\n\n                this.srcAttr = 'src';\n                this._settings.srcAttr = 'data-' + this.srcAttr;\n                this.srcAttr = hyphensToCamelCase(this.srcAttr);\n\n                this._resource = data.resource;\n\n            }\n\n            if (elementResource) {\n                this._element = data.resource;\n            }\n\n            if (stringResource) {\n                this._element.dataset[this.srcAttr] = this._resource;\n                this._element.dataset[this.srcsetAttr] = this._resource;\n                this._element.setAttribute(this._settings.srcAttr, this._resource);\n                this._element.setAttribute(this._settings.srcsetAttr, this._resource);\n            }\n\n            this._idEvent = this._element[pluginInstance + '_IDEvent'];\n            this._busy = this._idEvent !== undefined;\n            this._idEvent = this._busy ? this._idEvent : pluginName + '_unique_' + this._element.tagName + '_' + generateInstanceID();\n\n        }\n\n        get resource(){\n            return this._resource;\n        }\n\n        /**\n         *\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\n         */\n        load() {\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n\n                if (!this._busy) {\n                    detachEventListener(this._element, '.' + this._idEvent); // TODO: mayabe this should be called in this._callback\n                }\n\n                this._callback(new CustomEvent(!isBroken(this._exists ? this._element : this._resource) ? 'load' : 'error'));\n\n                return false;\n\n            } else if (this._exists && this._settings.visible && !isVisible(this._element)) {\n\n                return false;\n\n            } else {\n\n                if (this._format === 'image') {\n\n                    attachEventListener(this._element, 'load.' + this._idEvent, this._callback, !this._busy);\n                    attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                    const picture = this._element.closest('picture');\n\n                    if (picture && 'HTMLPictureElement' in window) {\n\n                        delete this._element.dataset[this.srcsetAttr];\n                        delete this._element.dataset[this.srcAttr];\n\n                        picture.querySelectorAll('source[' + this._settings.srcsetAttr + ']').forEach((el) => {\n                            el.setAttribute('srcset', el.dataset[this.srcAttr]);\n                            delete el.dataset[this.srcAttr];\n                        });\n\n                    } else {\n\n                        if (this._element.matches('[' + this._settings.srcsetAttr + ']')) {\n                            this._element.setAttribute('srcset', this._element.dataset[this.srcsetAttr]);\n                            delete this._element.dataset[this.srcsetAttr];\n                        }\n\n                        if (this._element.matches('[' + this._settings.srcAttr + ']')) {\n                            this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                            delete this._element.dataset[this.srcAttr];\n                        }\n\n                    }\n\n                } else if (this._format === 'video' || this._format === 'audio') {\n\n                    const\n\n                        isPlaythroughModeNormal = true === this._settings.playthrough,\n                        isPlaythroughModeFull = 'full' === this._settings.playthrough,\n\n                        sources = this._element.querySelectorAll('source'),\n                        isFullyBuffered = function (media) {\n\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\n\n                        };\n\n                    let callMediaLoad = false;\n\n                    if (sources) {\n\n                        sources.forEach((source) => {\n\n                            if (source.matches('[' + this._settings.srcAttr + ']')) {\n\n                                source.setAttribute('src', source.dataset[this.srcAttr]);\n                                delete source.dataset[this.srcsetAttr];\n\n                                callMediaLoad = true;\n\n                            }\n\n                            attachEventListener(source, 'error.' + this._idEvent, (e) => {\n\n                                const sourcesErrorId = pluginName + '_error';\n\n                                source[pluginInstance + '_' + sourcesErrorId] = true;\n\n                                if (sources.length === nodelistToArray(sources).filter(thisSource => true === thisSource[pluginInstance + '_' + sourcesErrorId]).length) {\n                                    this._callback(e);\n                                }\n\n                            }, !this._busy);\n\n                        });\n\n                    } else {\n\n                        if (this._element.matches('[' + src + ']')) {\n\n                            this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                            delete this._element.dataset[this.srcAttr];\n\n                            attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                            callMediaLoad = true;\n\n                        }\n\n                    }\n\n                    if (callMediaLoad) {\n                        this._element.load();\n                    }\n\n\n                    attachEventListener(this._element, 'loadedmetadata.' + this._idEvent, () => {\n\n                        if (!isPlaythroughModeNormal && !isPlaythroughModeFull) {\n                            this._callback(new CustomEvent('load'));\n                        }\n\n                        if (isPlaythroughModeFull) {\n\n                            let onProgressReplacementInterval = setInterval(() => {\n\n                                let isError = this._element.readyState > 0 && !this._element.duration;\n\n                                if (isError || isFullyBuffered(this._element)) {\n\n                                    this._element.currentTime = 0;\n\n                                    if (!isError && !this._busy && this._element.paused && this._element.matches('[autoplay]')) {\n                                        this._element.play();\n                                    }\n\n                                    clearInterval(onProgressReplacementInterval);\n\n                                    this._callback(new CustomEvent(!isError ? 'load' : 'error'));\n\n                                } else {\n\n                                    if (!this._element.paused) {\n                                        this._element.pause();\n                                    }\n\n                                    if (!this._busy) {\n                                        this._element.currentTime += 2;\n                                    }\n\n                                }\n\n                            }, 500);\n\n                            this._element[pluginName + '_' + this._idEvent] = onProgressReplacementInterval;\n\n                        }\n\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplay.' + this._idEvent, () => {\n                        if (isPlaythroughModeFull && this._element.currentTime === 0 && !isFullyBuffered(this._element)) {\n                            this._element.currentTime++;\n                        }\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplaythrough.' + this._idEvent, () => {\n                        if (isPlaythroughModeNormal) {\n                            this._callback(new CustomEvent('load'));\n                        }\n                    }, !this._busy);\n\n                } else {\n\n                    return false;\n\n                }\n\n                if (!this._busy) {\n                    this._element[pluginInstance + '_IDEvent'] = this._idEvent;\n                }\n\n            }\n\n            this._resource = this._element.currentSrc || this._element.src;\n\n            return !this._busy;\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            this._done = function (element, status, resource, id) {\n                callback.apply(this, [element, status, resource, id]);\n            };\n\n        };\n\n        abort() {\n\n            detachEventListener(this._element, '.' + this._idEvent);\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n                return;\n            }\n\n            const\n                src = this._element.getAttribute('srcset'),\n                srcset = this._element.getAttribute('src');\n\n            if (undefined !== src) {\n                this._element.dataset[this.srcAttr] = src;\n                this._element.setAttribute(this._settings.srcAttr, src);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n            if (undefined !== srcset) {\n                this._element.dataset[this.srcsetAttr] = srcset;\n                this._element.setAttribute(this._settings.srcsetAttr, srcset);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n        }\n\n    }\n\n    // TODO: Promise?\n    // TODO: private vars\n    // TODO: refactory succes/done/progress...\n    class Loader {\n\n        constructor(options) {\n\n            this._collection = [];\n            this._collectionLoaded = [];\n            this._collectionInstances = [];\n            this._collectionPending = [];\n            this._resourcesLoaded = [];\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                    backgrounds: false,\n                    attributes: []\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n            if (!this._settings.srcAttr.startsWith('data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n            if (!this._settings.srcsetAttr.startsWith('data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            if (typeof this._settings.attributes === 'string') {\n                this._settings.attributes = this._settings.attributes.split(this._settings.attributes.contains(',') ? ',' :' ');\n            }\n            if (!Array.isArray(this._settings.attributes)) {\n                this._settings.attributes = [];\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this.percentage = 0;\n\n            this._done = () => { };\n            this._progress = () => { };\n            this._success = () => { };\n            this._error = () => { };\n            this._loop = this.load;\n\n            this._abort = false;\n            this._loaded = 0;\n            this._complete = false;\n            this._busy = false;\n\n        }\n\n        set collection(collection) {\n\n            //TODO:\n            /*\n            if (!Array.isArray(collection)){\n                collection = [];\n            }\n\n            collection.forEach(item => {\n\n                let element = {\n                    resource: '',\n                    element: null,\n                    id: generateInstanceID()\n                };\n\n                if (typeof item === 'string') {\n                    element.resource = item;\n                } else if (typeof item === 'object' && 'resource' in item) {\n                    element = { ...element, ...item };\n                } else {\n                    return;\n                }\n\n                this._collection.push(element);\n\n            });*/\n\n            if (Array.isArray(collection) && (typeof collection[0] === 'string' || isHTMLObject(collection[0]))) {\n                for (const resource in collection) {\n                    if (collection.hasOwnProperty(resource)) {\n                        this._collection.push({ id: generateInstanceID(), resource: collection[resource] });\n                    }\n                }\n            }\n            if (typeof collection === 'string' || isHTMLObject(collection)) {\n                this._collection.push({ id: generateInstanceID(), resource: collection });\n            }\n\n        }\n\n        get collection() {\n\n            return this._collection;\n\n        }\n\n        collect(element) {\n\n            const\n                targets = 'img, video, audio',\n                targetsExtended = targets + ', picture, source';\n\n            let\n                collection = [],\n                targetsTags = nodelistToArray(element.querySelectorAll(targets));\n\n            if (element.matches(targets)) {\n                targetsTags.push(element);\n            }\n\n            targetsTags = targetsTags.filter((target) => {\n                let filter = '[' + this._settings.srcAttr + '], [' + this._settings.srcsetAttr + ']',\n                    children = nodelistToArray(target.children);\n                children = children.filter(x => x.matches(targetsExtended));\n                children = children.filter(x => x.matches(filter));\n                return target.matches(filter) || children.length;\n            });\n\n            targetsTags.forEach((target) => {\n\n                let collectionItem = {\n                    element: target,\n                    resource: target.getAttribute(this._settings.srcAttr) || target.getAttribute(this._settings.srcsetAttr)\n                };\n\n                collectionItem = collectionItem.element;\n\n                collection.push(collectionItem);\n\n            });\n\n            if (true === this._settings.backgrounds) {\n                let targetsBg = nodelistToArray(element.querySelectorAll('*'));\n                targetsBg.push(element);\n                targetsBg = targetsBg.filter(target => !target.matches(targetsExtended));\n                targetsBg = targetsBg.filter(target => getComputedStyle(target).backgroundImage !== 'none');\n                targetsBg.forEach((target) => {\n\n                    const url = getComputedStyle(target).backgroundImage.match(/\\((.*?)\\)/);\n\n                    if (null === url || url.length < 2) {\n                        return true;\n                    }\n\n                    let collectionItem = {\n                        element: target,\n                        resource: url[1].replace(/('|\")/g, '')\n                    };\n\n                    collectionItem = collectionItem.resource;\n\n                    collection.push(collectionItem);\n\n                });\n            }\n\n            if (this._settings.attributes.length) {\n                for (const attr in this._settings.attributes) {\n                    if (this._settings.attributes.hasOwnProperty(attr)) {\n\n                        nodelistToArray(element.querySelectorAll('[' + attr + ']:not(' + targetsExtended + ')')).forEach((target) => {\n\n                            let collectionItem = {\n                                element: target,\n                                resource: target.getAttribute(attr)\n                            };\n\n                            collectionItem = collectionItem.resource;\n\n                            collection.push(collectionItem);\n\n                        });\n\n                        if (element.matches('[' + attr + ']') && !element.matches(targetsExtended)) {\n\n                            let collectionItem = {\n                                element: element,\n                                resource: element.getAttribute(attr)\n                            };\n\n                            collectionItem = collectionItem.resource;\n\n                            collection.push(collectionItem);\n\n                        }\n\n                    }\n                }\n            }\n\n            this.collection = collection;\n\n        }\n\n        load() {\n\n            this._collectionPending = []; // resets pending elements (sequential opt helper array) every time we loop\n\n            const sequentialMode = true === this._settings.sequential;\n\n            for (let i = 0; i < this._collection.length; i++) {\n\n                if (this._abort) {\n                    break;\n                }\n\n                let thisLoadId = this._collection[i].id,\n                    thisLoadIndex = this._collectionInstances.findIndex(x => x.id === thisLoadId),\n                    thisLoadInstance = new SingleLoader(this._settings);\n\n                if (thisLoadIndex === -1) {\n                    this._collectionInstances.push({ id: thisLoadId, instance: thisLoadInstance });\n                    thisLoadIndex = this._collectionInstances.findIndex(x => x.id === thisLoadId);\n                } else {\n                    this._collectionInstances[thisLoadIndex].instance = thisLoadInstance;\n                }\n\n                thisLoadInstance.resource = this._collection[i];\n\n                thisLoadInstance.done((element, status, resource, id) => {\n\n                    if (this._complete || this._abort) {\n                        return;\n                    }\n\n                    const aProgress = !isInArray(id, this._collectionLoaded);\n\n                    if (aProgress) {\n\n                        this._collectionLoaded.push(id);\n                        this._busy = false;\n\n                        this._loaded++;\n                        this.percentage = this._loaded / this._collection.length * 100;\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\n\n                        // TODO: cleanup/refactory\n                        const thisResource = { resource: resource, status: status, element: element };\n                        this._resourcesLoaded.push(thisResource);\n\n                        this._progress.call(this, thisResource);\n                        this[status !== 'error' ? '_success' : '_error'].call(this, thisResource);\n\n                        // TODO: dispatch event on element maybe?\n                        // element.dispatchEvent(new CustomEvent(pluginPrefix + capitalize(status) + '.' + pluginPrefix));\n\n                    }\n\n                    if (this._loaded === this._collection.length) {\n\n                        this._done.call(this, this._resourcesLoaded);\n\n                        this._complete = true;\n\n                    } else if (aProgress && sequentialMode && this._collectionPending.length) {\n\n                        this._collectionPending = this._collectionPending.filter(x => x.id !== id);\n\n                        if (this._collectionPending.length) {\n                            this._busy = this._collectionPending[0].instance.load();\n                        }\n\n                    }\n\n                });\n\n                if (!sequentialMode || (sequentialMode && !this._busy)) {\n                    this._busy = thisLoadInstance.load();\n                \n                }else if (sequentialMode && this._busy && (!this._settings.visible || (this._settings.visible && isVisible(thisLoadInstance._element)) ) ){\n                    this._collectionPending.push({ id: thisLoadId, instance: thisLoadInstance });\n                \n                }\n\n\n            }\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resources) {\n                callback.call(this, resources);\n            };\n\n            if (this._collection.length) {\n\n                this._done = _func;\n\n                //this._loop();\n\n            } else {\n                _func();\n            }\n\n        };\n\n        progress(callback) {\n\n            if (typeof callback !== 'function')\n                return;\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n\n                this._progress = _func;\n\n                //this._loop();\n\n            }\n\n        };\n\n        success(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n\n                this._success = _func;\n\n                //this._loop();\n\n            }\n\n        };\n\n        error(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n\n                this._error = _func;\n\n                //this._loop();\n\n            }\n\n        };\n\n        abort() {\n\n            for (const key in this._collectionInstances) {\n                this._collectionInstances[key].instance.abort();\n            }\n\n            if (this._collection.length) {\n                this._abort = true;\n            }\n\n        };\n\n    }\n\n    // public interface\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    // requirejs\n    if (typeof define === 'function' && define.amd) {\n        define(capitalize(pluginName), Loader);\n        // nodejs\n    } else if ('object' === typeof exports) {\n        module.exports[capitalize(pluginName)] = Loader;\n        // vanilla\n    } else {\n        window[capitalize(pluginName)] = Loader;\n    }\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    // jQuery interface\n    // - - - - - - - - - - - - - - - - - - - -\n    if (!$) {\n        return undefined;\n    }\n\n    $[capitalize(pluginName)] = Loader;\n\n    const\n        $document = $(document),\n        $window = $(window),\n        // thanks https://gist.github.com/beaucharman/e46b8e4d03ef30480d7f4db5a78498ca\n        throttle = (callback, wait, context = this) => {\n            let timeout = null,\n                callbackArgs = null\n            const later = () => {\n                callback.apply(context, callbackArgs)\n                timeout = null\n            }\n            return function () {\n                if (!timeout) {\n                    callbackArgs = arguments\n                    timeout = setTimeout(later, wait)\n                }\n            }\n        };\n\n    let methodCollection = [];\n\n    $.fn[pluginMethod] = function (options) {\n\n        let originalUserOptions = options;\n\n        if (typeof options !== 'object') {\n            options = {};\n        }\n\n        let settings = {\n            ...{\n\n                srcAttr: 'data-src',\n                srcsetAttr: 'data-srcset',\n\n                visible: false,\n\n                sequential: false,\n\n                backgrounds: false,\n                extraAttrs: [],\n\n                playthrough: false,\n\n                early: false,\n                earlyTimeout: 0,\n\n                onProgress: () => { },\n                onLoad: () => { },\n                onError: () => { },\n\n                onComplete: () => { },\n\n            }, ...options\n        };\n\n        let callback = settings.onComplete;\n        if ($.isFunction(originalUserOptions)) {\n            callback = originalUserOptions;\n        }\n\n        return this.each(function (i) {\n\n            const\n                $element = $(this),\n                uniqueMethodPluginName = generateInstanceID() + i,\n                thisLoadInstance = new Loader(settings);\n\n            thisLoadInstance.collect(this);\n\n            methodCollection.push({\n                id: uniqueMethodPluginName,\n                instance: thisLoadInstance,\n                element: this,\n                timeout: null\n            });\n\n            thisLoadInstance.progress((resource) => {\n\n                $(resource.element).trigger(pluginPrefix + capitalize(resource.status) + '.' + pluginPrefix, [resource.element, resource.resource]);\n                $element.trigger(pluginPrefix + 'Progress.' + pluginPrefix, [this, resource]);\n\n                const thisArguments = [thisLoadInstance, resource];\n\n                if (typeof settings.onProgress === 'function') {\n                    settings.onProgress.apply(this, thisArguments);\n                }\n\n                let eventName = capitalize(resource.status);\n                if (typeof settings['on' + eventName] === 'function') {\n                    settings['on' + eventName].apply(this, thisArguments);\n                }\n\n            });\n\n            thisLoadInstance.done(resources => {\n\n                $element.trigger(pluginPrefix + 'Complete.' + pluginPrefix, [this, resources]);\n                callback.apply(this, [thisLoadInstance, resources]);\n\n                if (settings.visible) {\n                    $window.off('scroll.' + uniqueMethodPluginName);\n                }\n\n                // refresh other method calls for same el (omitting this one)\n                methodCollection = methodCollection.filter(x => x.id !== uniqueMethodPluginName);\n                methodCollection.forEach(thisMethodCollection => {\n                    if ($element.is(thisMethodCollection.element)) {\n                        thisMethodCollection.instance.load();\n                    }\n                });\n\n            });\n\n            thisLoadInstance.load();\n\n            if (settings.visible) {\n                $window.on('scroll.' + uniqueMethodPluginName, throttle(() => thisLoadInstance.load(), 250));\n            }\n\n            if (true === settings.early) for (let key in methodCollection) {\n\n                let thisMethodCollection = methodCollection[key];\n\n                if (methodCollection[key].id === uniqueMethodPluginName) {\n\n                    clearTimeout(thisMethodCollection.timeout);\n\n                    let timeout = parseInt(settings.earlyTimeout);\n\n                    thisMethodCollection.timeout = setTimeout(function () {\n\n                        // TODO: appropriate method to set/update settings?\n                        thisMethodCollection.instance._settings.visible = false;\n                        thisMethodCollection.instance._settings.sequential = true;\n\n                        thisMethodCollection.instance.load();\n\n                    }, !isNaN(timeout) && isFinite(timeout) ? timeout : 0);\n\n                    break;\n\n                }\n\n            }\n\n        });\n\n    };\n\n})(window, document, jQuery);"],"file":"nite.loader.min.js"}