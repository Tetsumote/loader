{"version":3,"sources":["nite.loader.js"],"names":["window","document","$","undefined","generateInstanceID","Math","floor","random","pluginName","pluginMethod","pluginInstance","CustomEvent","_polyfill","event","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","prototype","Event","stringContains","heystack","needle","String","includes","indexOf","stringStartsWith","startsWith","substr","length","arrayFindIndex","filter","Array","findIndex","index","detachEventListener","element","events","Object","keys","privateEventsStorage","forEach","key","eventNameWithNamespace","replace","type","split","join","removeEventListener","handler","attachEventListener","once","count","_handler","call","this","addEventListener","hyphensToCamelCase","string","g","toUpperCase","capitalize","charAt","slice","nodelistToArray","nodelist","isInArray","isVisible","intersectionRatio","getComputedStyle","bodyEl","getElementsByTagName","winWidth","innerWidth","documnt","documentElement","clientWidth","winHeight","innerHeight","clientHeight","rect","getBoundingClientRect","right","bottom","left","top","isHTMLElement","HTMLElement","e","nodeType","style","ownerDocument","isLoaded","source","privateCache","currentSrc","complete","readyState","isBroken","naturalWidth","videoWidth","decodeResource","resource","formatExtensions","image","audio","video","formatTagNames","output","format","extension","tag","exists","breakLoop","formatCandidate","RegExp","test","matches64","match","matches","tagName","toLowerCase","allTags","values","tags","SingleLoader","[object Object]","options","_settings","srcAttr","srcsetAttr","playthrough","visible","_id","_idEvent","_busy","_element","_resource","_format","_observer","_done","_success","_error","_callback","unobserve","src","push","thisArguments","apply","data","id","info","_tag","_exists","IntersectionObserver","entries","observer","entry","target","root","rootMargin","threshold","observe","createElement","dataset","picture","closest","querySelectorAll","el","setAttribute","isPlaythroughModeNormal","isPlaythroughModeFull","sources","isFullyBuffered","media","buffered","round","end","seekable","callMediaLoad","sourcesErrorId","thisSource","load","onProgressReplacementInterval","setInterval","isError","duration","currentTime","paused","play","clearInterval","pause","callback","status","getAttribute","srcset","removeAttribute","Loader","_collection","_collectionLoaded","_collectionInstances","_collectionPending","_resourcesLoaded","backgrounds","attributes","contains","isArray","percentage","_progress","_loop","_abort","_loaded","_complete","collection","item","targetsExtended","targets","targetsFilter","targetsTags","children","x","targetSource","targetsBg","backgroundImage","url","attr","hasOwnProperty","sequentialMode","sequential","i","thisLoadId","thisLoadIndex","thisLoadInstance","instance","done","aProgress","parseFloat","toFixed","thisResource","_func","resources","abort","define","amd","exports","module","$window","throttle","wait","context","timeout","callbackArgs","later","arguments","setTimeout","methodCollection","fn","originalUserOptions","settings","extraAttrs","early","earlyTimeout","onProgress","onLoad","onError","onComplete","isFunction","each","$element","uniqueMethodPluginName","collect","progress","trigger","pluginPrefix","eventName","off","thisMethodCollection","is","on","clearTimeout","parseInt","isNaN","isFinite","jQuery"],"mappings":"CACA,SAAWA,EAAQC,EAAUC,EAAGC,GAC5B,aAEA,MAIIC,EAAqB,IACVC,KAAKC,MAAsB,KAAhBD,KAAKE,UAA4B,IAIvDC,EAAaC,aACbC,EAAiBN,IAEjBO,EAAcX,EAAOW,aAAe,MAChC,MAAMC,EAAY,CAACC,EAAOC,KACtBA,EAASA,IAAYC,SAAS,EAAOC,YAAY,EAAOC,OAAQd,GAChE,MAAMe,EAAMjB,EAASkB,YAAY,eAEjC,OADAD,EAAIE,gBAAgBP,EAAOC,EAAOC,QAASD,EAAOE,WAAYF,EAAOG,QAC9DC,GAGX,OADAN,EAAUS,UAAYrB,EAAOsB,MAAMD,UAC5BT,GARyB,GAepCW,EAAiB,CAACC,EAAUC,IACjBC,OAAOL,UAAUM,SAAWH,EAASG,SAASF,IAA2C,IAAjCD,EAASI,QAAQH,EAAQ,GAO5FI,EAAmB,CAACL,EAAUC,IACnBC,OAAOL,UAAUS,WAAaN,EAASM,WAAWL,GAAUD,EAASO,OAAO,EAAGN,EAAOO,UAAYP,EAO7GQ,EAAiB,CAACT,EAAUU,IACjBC,MAAMd,UAAUe,UAAYZ,EAASY,UAAUF,GAAU,MAC5D,IAAIF,EAASR,EAASQ,OAClBK,GAAS,EACb,OAASA,EAAQL,GACb,GAAIE,EAAOV,EAASa,GAAQA,EAAOb,GAC/B,OAAOa,EAGf,OAAQ,GARoD,GAgBpEC,EAAsB,CAACC,EAASC,KAE5B,GAAKD,GAA6B,iBAAXC,EAIvB,GAAIX,EAAiBW,EAAQ,KACzBC,OAAOC,KAAKC,GAAsBC,QAAQC,IACtC,MAAMC,EAAyBD,EAAIE,QAzDf,gBAyDsD,KACtExB,EAAeuB,EAAwBN,IAAWG,EAAqBE,GAAKN,UAAYA,GACxFD,EAAoBC,EAASO,SAGlC,CAIH,MACIE,GAHJR,EAASA,EAAOS,MAAM,MAGJ,GACFT,EAAO,KAGnBA,EAASA,EAAOU,KAvEI,kBA0EpBV,KAAUG,IACVJ,EAAQY,oBAAoBH,EAAML,EAAqBH,GAAQY,gBACxDT,EAAqBH,MAaxCa,EAAsB,CAACd,EAASC,EAAQY,EAASE,KAE7C,IAAKf,GAA6B,iBAAXC,GAA0C,mBAAZY,EACjD,OAKJ,MACIJ,GAHJR,EAASA,EAAOS,MAAM,MAGJ,GAalB,GAZgBT,EAAO,KAGnBA,EAASA,EAAOU,KAtGQ,kBAyG5BP,EAAqBH,IACjBD,QAASA,EACTgB,MAAO,EACPD,MAAM,IAGN,IAASA,EAAM,CACf,IAAIE,EAAWJ,EACfA,EAAU,SAAUvC,GAChB,GAAI2B,KAAUG,EAAsB,CAEhC,GADAA,EAAqBH,GAAQe,QACzBZ,EAAqBH,GAAQc,MAAQX,EAAqBH,GAAQe,MAAQ,EAC1E,OAEJC,EAASC,KAAKC,KAAM7C,GAExByB,EAAoBC,EAASC,SAGjCc,GAAO,EAGXX,EAAqBH,OACdG,EAAqBH,OACpBY,QAASA,EACTE,KAAMA,IAIdf,EAAQoB,iBAAiBX,EAAML,EAAqBH,GAAQY,SAAWE,KAAMA,KAOjFM,EAAqBC,GACVA,EAAOd,QAAQ,YAAae,GAAKA,EAAE,GAAGC,eAMjDC,EAAaH,GACFA,EAAOI,OAAO,GAAGF,cAAgBF,EAAOK,MAAM,GAMzDC,EAAkBC,OACHA,GAOfC,EAAY,CAAC5C,EAAQD,IACVA,EAASI,QAAQH,IAAW,EAMvC6C,EAAY/B,IAER,GAAI,yBAA0BvC,GAAU,sBAAuBuC,EAC3D,OAAOA,EAAQgC,kBAAoB,EAGvC,GAAoD,SAAhDvE,EAAOwE,iBAAiBjC,EAAS,WACjC,OAAO,EAGX,MACIkC,EAASxE,EAASyE,qBAAqB,QAAQ,GAC/CC,EAAW3E,EAAO4E,YAAcC,QAAQC,gBAAgBC,aAAeN,EAAOM,YAC9EC,EAAYhF,EAAOiF,aAAeJ,QAAQC,gBAAgBI,cAAgBT,EAAOS,aACjFC,EAAO5C,EAAQ6C,wBAEnB,QAASD,EAAKE,MAAQ,GAAKF,EAAKG,OAAS,GAAKH,EAAKI,KAAOZ,GAAYQ,EAAKK,IAAMR,IAOrFS,EAAgBlD,IACZ,GAAuB,iBAAZA,EACP,OAAO,EAEX,IACI,OAAOA,aAAmBmD,YAC5B,MAAOC,GACL,OAA4B,IAArBpD,EAAQqD,UAA2C,iBAAlBrD,EAAQsD,OAAuD,iBAA1BtD,EAAQuD,gBAO7FC,EAAWC,GAGmB,iBAAXA,GAEP3B,EAAU2B,EAAQC,IAIlBR,EAAcO,IAEb,eAAgBA,GAAUA,EAAOE,WAAWlE,OAAS,IAGjD,aAAcgE,GAAUA,EAAOG,UAE/B,eAAgBH,GAAUA,EAAOI,YAAc,GAQhEC,EAAWL,GAEHD,EAASC,KAIDP,EAAcO,KAGT,iBAAkBA,GAA8C,IAApC3F,KAAKC,MAAM0F,EAAOM,eAE9C,eAAgBN,GAAgC,IAAtBA,EAAOO,aAIxB,iBAAXP,GAQnBQ,EAAiBC,IAEb,MACIC,GACIC,MAAO,oEACPC,MAAO,0BACPC,MAAO,gBAEXC,GACIH,MAAO,qBACPC,MAAO,eACPC,MAAO,gBAIf,IACIE,GACIC,OAAQ,KACRC,UAAW,KACXC,IAAK,KACLC,QAAQ,GAEZC,GAAY,EAgDhB,GA9CAX,EAASA,SAAWA,EAASA,SAASxD,MAAM,KAAK,GACjDwD,EAASA,SAAWA,EAASA,SAASxD,MAAM,KAAK,GACjDR,OAAOC,KAAKgE,GAAkB9D,QAAQyE,IAElC,IAAID,GAIA,IAAIE,OAAO,MAASZ,EAAiBW,GAAmB,eAAwB,KAAKE,KAAKd,EAASA,UAEnG,GAAI,IAAIa,OArBI,WAqBkB,KAAKC,KAAKd,EAASA,UAAW,CAExD,IAAIe,EAAYf,EAASA,SAASgB,MAAM,IAAIH,OAAO,SAAWD,EAAkB,KAAQX,EAAiBW,GAAmB,IAAK,MAEjI,GAAI,OAASG,EACT,OAGJA,EAAYA,EAAU,GAEtBT,EAAOC,OAASK,EAChBN,EAAOE,UAAYO,EAAUzE,QAAQ,QAAUsE,EAAkB,IAAK,IACtEN,EAAOG,IAAMJ,EAAeO,GAE5BD,GAAY,MAET,CAEH,IAAIM,EAAUjB,EAASA,SAASgB,MAAM,IAAIH,OAAOZ,EAAiBW,GAAkB,MAEhFK,IAEAX,EAAOC,OAASK,EAChBN,EAAOE,UAAYS,EAAQ,GAC3BX,EAAOG,IAAMJ,EAAeO,GAE5BD,GAAY,MAUxB3B,EAAcgB,EAASlE,SAAU,CAEjC,IACIoF,EAAUlB,EAASlE,QAAQoF,QAAQC,cACnCC,EAAU,GAEdpF,OAAOqF,OAAOhB,GAAgBlE,QAAQmF,IAClCF,GAAW,IAAME,IAGrBF,EAAUA,EAAQ5E,MAAM,KAEpBoB,EAAUsD,EAASE,KACnBd,EAAOG,IAAMS,EACbZ,EAAOI,QAAS,EACM,OAAlBJ,EAAOC,QACPvE,OAAOC,KAAKoE,GAAgBlE,QAAQoE,IAC5BzF,EAAeuF,EAAeE,GAASD,EAAOG,OAC9CH,EAAOC,OAASA,MAYpC,OAJIzF,EAAewF,EAAOG,IAAK,OAC3BH,EAAOG,IAAMH,EAAOG,IAAIjE,MAAM,KAAK,IAGhC8D,GAIf,IACIpE,KACAsD,WAIE+B,EAEFC,YAAYC,GAERxE,KAAKyE,eAEGC,QAAS,WACTC,WAAY,cACZC,aAAa,EACbC,SAAS,MACPL,GAGVxE,KAAK0E,QAAU,GACf1E,KAAK2E,WAAa,GAEbxG,EAAiB6B,KAAKyE,UAAUC,QAAS,SAI1C1E,KAAK0E,QAAU1E,KAAKyE,UAAUC,QAAQrF,QAAQ,QAAS,KAHvDW,KAAK0E,QAAU1E,KAAKyE,UAAUC,QAC9B1E,KAAKyE,UAAUC,QAAU,QAAU1E,KAAKyE,UAAUC,SAKjDvG,EAAiB6B,KAAKyE,UAAUE,WAAY,SAI7C3E,KAAK2E,WAAa3E,KAAKyE,UAAUE,WAAWtF,QAAQ,QAAS,KAH7DW,KAAK2E,WAAa3E,KAAKyE,UAAUE,WACjC3E,KAAKyE,UAAUE,WAAa,QAAU3E,KAAKyE,UAAUE,YAKzD3E,KAAK0E,QAAUxE,EAAmBF,KAAK0E,SACvC1E,KAAK2E,WAAazE,EAAmBF,KAAK2E,YAE1C3E,KAAK8E,IAAM,KACX9E,KAAK+E,SAAW,KAChB/E,KAAKgF,OAAQ,EAEbhF,KAAKiF,SAAW,KAChBjF,KAAKkF,UAAY,KACjBlF,KAAKmF,QAAU,KACfnF,KAAKoF,UAAY,KAEjBpF,KAAKqF,MAAQ,SACbrF,KAAKsF,SAAW,SAChBtF,KAAKuF,OAAS,SAEdvF,KAAKwF,UAAY,CAACvD,IAEdjC,KAAKgF,OAAQ,EACT,OAAShF,KAAKoF,WACdpF,KAAKoF,UAAUK,UAAUzF,KAAKiF,UAGlC,MAAMS,EAAM1F,KAAKiF,SAASzC,YAAcxC,KAAKiF,SAASS,IAEjD/E,EAAU+E,EAAKnD,IAChBA,EAAaoD,KAAKD,GAGtB,IAAIE,GAAiB5F,KAAKiF,SAAUhD,EAAE3C,KAAMoG,EAAK1F,KAAK8E,KAEtD9E,KAAgB,UAAXiC,EAAE3C,KAAmB,WAAa,UAAUuG,MAAM7F,KAAM4F,GAC7D5F,KAAKqF,MAAMQ,MAAM7F,KAAM4F,KAM/B7C,aAAa+C,GAET,GAAoB,iBAATA,GAAqB,OAAQA,GAAQ,YAAaA,GAAQ,aAAcA,EAAM,CAErF9F,KAAK8E,IAAMgB,EAAKC,GAChB/F,KAAKiF,SAAWa,EAAKjH,QACrBmB,KAAKkF,UAAYY,EAAK/C,SAEtB,IAAIiD,EAAOlD,GAAiBC,SAAU/C,KAAKkF,UAAWrG,QAASmB,KAAKiF,WACpEjF,KAAKiG,KAAOD,EAAKxC,IACjBxD,KAAKkG,QAAUF,EAAKvC,OACpBzD,KAAKmF,QAAUa,EAAK1C,OAEftD,KAAKkG,QAKAlG,KAAKyE,UAAUI,SAAW,yBAA0BvI,IAE1D0D,KAAKoF,UAAY,IAAIe,qBAAqB,CAACC,EAASC,KAChDD,EAAQlH,QAAQoH,GAASA,EAAMC,OAAO1F,kBAAoByF,EAAMzF,qBAEhE2F,KAAM,KACNC,WAAY,MACZC,UAAW,KAGf1G,KAAKoF,UAAUuB,QAAQ3G,KAAKiF,YAb5BjF,KAAKiF,SAAW1I,EAASqK,cAAc5G,KAAKiG,MAC5CjG,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,SAAW1E,KAAKkF,WAgB/ClF,KAAK+E,SAAW/E,KAAKiF,SAASjI,EAAiB,YAC/CgD,KAAKgF,MAAQhF,KAAK+E,WAAatI,EAC/BuD,KAAK+E,SAAW/E,KAAKgF,MAAQhF,KAAK+E,SAAWjI,EAAa,WAAakD,KAAKiF,SAAShB,QAAU,IAAMvH,KAM7GqG,eACI,OAAO/C,KAAKkF,UAOhBX,OAEI,GAAIlC,EAASrC,KAAKkG,QAAUlG,KAAKiF,SAAWjF,KAAKkF,WAS7C,OAPKlF,KAAKgF,OAENpG,EAAoBoB,KAAKiF,SAAU,IAAMjF,KAAK+E,UAGlD/E,KAAKwF,UAAU,IAAIvI,EAAa0F,EAAS3C,KAAKkG,QAAUlG,KAAKiF,SAAWjF,KAAKkF,WAAsB,QAAT,UAEnF,EAEJ,GAAIlF,KAAKkG,SAAWlG,KAAKyE,UAAUI,UAAYjE,EAAUZ,KAAKiF,UAEjE,OAAO,EAIP,GAAqB,UAAjBjF,KAAKmF,QAAqB,CAE1BxF,EAAoBK,KAAKiF,SAAU,QAAUjF,KAAK+E,SAAU/E,KAAKwF,WAAYxF,KAAKgF,OAClFrF,EAAoBK,KAAKiF,SAAU,SAAWjF,KAAK+E,SAAU/E,KAAKwF,WAAYxF,KAAKgF,OAEnF,MAAM8B,EAAU9G,KAAKiF,SAAS8B,QAAQ,WAElCD,GAAW,uBAAwBxK,UAE5B0D,KAAKiF,SAAS4B,QAAQ7G,KAAK2E,mBAC3B3E,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,SAElCoC,EAAQE,iBAAiB,UAAYhH,KAAKyE,UAAUE,WAAa,KAAKzF,QAAS+H,IAC3EA,EAAGC,aAAa,SAAUD,EAAGJ,QAAQ7G,KAAK0E,iBACnCuC,EAAGJ,QAAQ7G,KAAK0E,aAKvB1E,KAAKiF,SAASjB,QAAQ,IAAMhE,KAAKyE,UAAUE,WAAa,OACxD3E,KAAKiF,SAASiC,aAAa,SAAUlH,KAAKiF,SAAS4B,QAAQ7G,KAAK2E,oBACzD3E,KAAKiF,SAAS4B,QAAQ7G,KAAK2E,aAGlC3E,KAAKiF,SAASjB,QAAQ,IAAMhE,KAAKyE,UAAUC,QAAU,OACrD1E,KAAKiF,SAASiC,aAAa,MAAOlH,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,iBACtD1E,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,eAKvC,CAAA,GAAqB,UAAjB1E,KAAKmF,SAAwC,UAAjBnF,KAAKmF,QAgHxC,OAAO,EAhHsD,CAE7D,MACIgC,GAA0B,IAASnH,KAAKyE,UAAUG,YAClDwC,EAAwB,SAAWpH,KAAKyE,UAAUG,YAClDyC,EAAUrH,KAAKiF,SAAS+B,iBAAiB,UACzCM,EAAkB,SAAUC,GACxB,OAAOA,EAAMC,SAASlJ,QAAU3B,KAAK8K,MAAMF,EAAMC,SAASE,IAAI,IAAM/K,KAAK8K,MAAMF,EAAMI,SAASD,IAAI,KAAQ,GAGlH,IAAIE,GAAgB,EAEhBP,EAEAA,EAAQnI,QAASoD,IAETA,EAAO0B,QAAQ,IAAMhE,KAAKyE,UAAUC,QAAU,OAE9CpC,EAAO4E,aAAa,MAAO5E,EAAOuE,QAAQ7G,KAAK0E,iBACxCpC,EAAOuE,QAAQ7G,KAAK2E,YAE3BiD,GAAgB,GAIpBjI,EAAoB2C,EAAQ,SAAWtC,KAAK+E,SAAW9C,IAEnD,MAAM4F,EAAiB/K,EAAa,SAEpCwF,EAAOtF,EAAiB,IAAM6K,IAAkB,EAE5CR,EAAQ/I,SAAWmC,EAAgB4G,GAAS7I,OAAOsJ,IAAc,IAASA,EAAW9K,EAAiB,IAAM6K,IAAiBvJ,QAC7H0B,KAAKwF,UAAUvD,KAGnBjC,KAAKgF,SAINhF,KAAKiF,SAASjB,QAAQ,IAAMhE,KAAKyE,UAAUC,QAAU,OAE5D1E,KAAKiF,SAASiC,aAAa,MAAOlH,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,iBACtD1E,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,SAElC/E,EAAoBK,KAAKiF,SAAU,SAAWjF,KAAK+E,SAAU/E,KAAKwF,WAAYxF,KAAKgF,OAEnF4C,GAAgB,GAIhBA,GACA5H,KAAKiF,SAAS8C,OAGlBpI,EAAoBK,KAAKiF,SAAU,kBAAoBjF,KAAK+E,SAAU,KAMlE,GAJKoC,GAA4BC,GAC7BpH,KAAKwF,UAAU,IAAIvI,EAAY,SAG/BmK,EAAuB,CAEvB,IAAIY,EAAgCC,YAAY,KAE5C,IAAIC,EAAUlI,KAAKiF,SAASvC,WAAa,IAAM1C,KAAKiF,SAASkD,SAEzDD,GAAWZ,EAAgBtH,KAAKiF,WAEhCjF,KAAKiF,SAASmD,YAAc,GAEvBF,IAAYlI,KAAKgF,OAAShF,KAAKiF,SAASoD,QAAUrI,KAAKiF,SAASjB,QAAQ,eACzEhE,KAAKiF,SAASqD,OAGlBC,cAAcP,GAEdhI,KAAKwF,UAAU,IAAIvI,EAAaiL,EAAmB,QAAT,WAIrClI,KAAKiF,SAASoD,QACfrI,KAAKiF,SAASuD,QAGbxI,KAAKgF,QACNhF,KAAKiF,SAASmD,aAAe,KAKtC,KAEHpI,KAAKiF,SAASnI,EAAa,IAAMkD,KAAK+E,UAAYiD,KAItDhI,KAAKgF,OAETrF,EAAoBK,KAAKiF,SAAU,WAAajF,KAAK+E,SAAU,KACvDqC,GAAuD,IAA9BpH,KAAKiF,SAASmD,cAAsBd,EAAgBtH,KAAKiF,WAClFjF,KAAKiF,SAASmD,gBAElBpI,KAAKgF,OAETrF,EAAoBK,KAAKiF,SAAU,kBAAoBjF,KAAK+E,SAAU,KAC9DoC,GACAnH,KAAKwF,UAAU,IAAIvI,EAAY,WAEnC+C,KAAKgF,QAgBjB,OARShF,KAAKgF,QACNhF,KAAKiF,SAASjI,EAAiB,YAAcgD,KAAK+E,UAK1D/E,KAAKkF,UAAYlF,KAAKiF,SAASzC,YAAcxC,KAAKiF,SAASS,KAEnD1F,KAAKgF,MAIjBT,KAAKkE,GAEuB,mBAAbA,IAIXzI,KAAKqF,MAAQ,SAAUxG,EAAS6J,EAAQ3F,EAAUgD,GAC9C0C,EAAS5C,MAAM7F,MAAOnB,EAAS6J,EAAQ3F,EAAUgD,MAKzDxB,QAII,GAFA3F,EAAoBoB,KAAKiF,SAAU,IAAMjF,KAAK+E,UAE1C1C,EAASrC,KAAKkG,QAAUlG,KAAKiF,SAAWjF,KAAKkF,WAC7C,OAGJ,MACIQ,EAAM1F,KAAKiF,SAAS0D,aAAa,UACjCC,EAAS5I,KAAKiF,SAAS0D,aAAa,OAEpClM,IAAciJ,IACd1F,KAAKiF,SAAS4B,QAAQ7G,KAAK0E,SAAWgB,EACtC1F,KAAKiF,SAASiC,aAAalH,KAAKyE,UAAUC,QAASgB,GACnD1F,KAAKiF,SAAS4D,gBAAgB,OAC9B7I,KAAKiF,SAAS4D,gBAAgB,WAG9BpM,IAAcmM,IACd5I,KAAKiF,SAAS4B,QAAQ7G,KAAK2E,YAAciE,EACzC5I,KAAKiF,SAASiC,aAAalH,KAAKyE,UAAUE,WAAYiE,GACtD5I,KAAKiF,SAAS4D,gBAAgB,OAC9B7I,KAAKiF,SAAS4D,gBAAgB,kBAUpCC,EAEFvE,YAAYC,GAERxE,KAAK+I,eACL/I,KAAKgJ,qBACLhJ,KAAKiJ,wBACLjJ,KAAKkJ,sBACLlJ,KAAKmJ,oBAELnJ,KAAKyE,eAEGC,QAAS,WACTC,WAAY,cACZC,aAAa,EACbC,SAAS,EACTuE,aAAa,EACbC,kBACE7E,GAGVxE,KAAK0E,QAAU,GACf1E,KAAK2E,WAAa,GACbxG,EAAiB6B,KAAKyE,UAAUC,QAAS,SAI1C1E,KAAK0E,QAAU1E,KAAKyE,UAAUC,QAAQrF,QAAQ,QAAS,KAHvDW,KAAK0E,QAAU1E,KAAKyE,UAAUC,QAC9B1E,KAAKyE,UAAUC,QAAU,QAAU1E,KAAKyE,UAAUC,SAIjDvG,EAAiB6B,KAAKyE,UAAUE,WAAY,SAI7C3E,KAAK2E,WAAa3E,KAAKyE,UAAUE,WAAWtF,QAAQ,QAAS,KAH7DW,KAAK2E,WAAa3E,KAAKyE,UAAUE,WACjC3E,KAAKyE,UAAUE,WAAa,QAAU3E,KAAKyE,UAAUE,YAKhB,iBAA9B3E,KAAKyE,UAAU4E,aACtBrJ,KAAKyE,UAAU4E,WAAarJ,KAAKyE,UAAU4E,WAAW9J,MAAMS,KAAKyE,UAAU4E,WAAWC,SAAS,KAAO,IAAM,MAE3G7K,MAAM8K,QAAQvJ,KAAKyE,UAAU4E,cAC9BrJ,KAAKyE,UAAU4E,eAGnBrJ,KAAK0E,QAAUxE,EAAmBF,KAAK0E,SACvC1E,KAAK2E,WAAazE,EAAmBF,KAAK2E,YAE1C3E,KAAKwJ,WAAa,EAElBxJ,KAAKqF,MAAQ,SACbrF,KAAKyJ,UAAY,SACjBzJ,KAAKsF,SAAW,SAChBtF,KAAKuF,OAAS,SACdvF,KAAK0J,MAAQ1J,KAAK+H,KAElB/H,KAAK2J,QAAS,EACd3J,KAAK4J,QAAU,EACf5J,KAAK6J,WAAY,EACjB7J,KAAKgF,OAAQ,EAIjB8E,eAAeA,GAENrL,MAAM8K,QAAQO,KACfA,MAGJA,EAAW5K,QAAQ6K,IAEf,IAAIlL,GACAkE,SAAU,GACVlE,QAAS,KACTkH,GAAIrJ,KAGR,GAAoB,iBAATqN,EACPlL,EAAQkE,SAAWgH,MAChB,CAAA,KAAoB,iBAATA,GAAqB,aAAcA,GAGjD,OAFAlL,MAAeA,KAAYkL,GAK/B/J,KAAK+I,YAAYpD,KAAK9G,KAM9BiL,iBACI,OAAO9J,KAAK+I,YAGhBxE,QAAQ1F,GAEJ,MAEImL,EAAkBC,qCAClBC,EAAgB,IAAMlK,KAAKyE,UAAUC,QAAU,OAAS1E,KAAKyE,UAAUE,WAAa,IAExF,IACImF,KACAK,EAAc1J,EAAgB5B,EAAQmI,iBAN5B,sBA+Bd,GAvBInI,EAAQmF,QAAQgG,IAChBG,EAAYxE,KAAK9G,IAGrBsL,EAAcA,EAAY3L,OAAQ+H,IAC9B,IAAI6D,EAAW3J,EAAgB8F,EAAO6D,UAGtC,OADAA,GADAA,EAAWA,EAAS5L,OAAO6L,GAAKA,EAAErG,QAAQgG,KACtBxL,OAAO6L,GAAKA,EAAErG,QAAQkG,IACnC3D,EAAOvC,QAAQkG,IAAkBE,EAAS9L,UAGzCY,QAASqH,IACjB,IAAI+D,EAAe/D,EACd+D,EAAatG,QAAQkG,KAEtBI,MADAA,EAAeA,EAAatD,iBAAiBkD,IACZ,IAErCJ,EAAWnE,MACP9G,QAAS0H,EACTxD,SAAUuH,EAAa3B,aAAa3I,KAAKyE,UAAUC,UAAY4F,EAAa3B,aAAa3I,KAAKyE,UAAUE,iBAI5G,IAAS3E,KAAKyE,UAAU2E,YAAa,CACrC,IAAImB,EAAY9J,EAAgB5B,EAAQmI,iBAAiB,MACzDuD,EAAU5E,KAAK9G,IAEf0L,GADAA,EAAYA,EAAU/L,OAAO+H,IAAWA,EAAOvC,QAAQgG,KACjCxL,OAAO+H,GAAuD,SAA7CzF,iBAAiByF,GAAQiE,kBACtDtL,QAASqH,IAEf,MAAMkE,EAAM3J,iBAAiByF,GAAQiE,gBAAgBzG,MAAM,aAE3D,GAAI,OAAS0G,GAAOA,EAAInM,OAAS,EAC7B,OAAO,EAGXwL,EAAWnE,MACP9G,QAAS0H,EACTxD,SAAU0H,EAAI,GAAGpL,QAAQ,SAAU,QAM/C,GAAIW,KAAKyE,UAAU4E,WAAW/K,OAC1B,IAAK,MAAMoM,KAAQ1K,KAAKyE,UAAU4E,WAC1BrJ,KAAKyE,UAAU4E,WAAWsB,eAAeD,KAEzCjK,EAAgB5B,EAAQmI,iBAAiB,IAAM0D,EAAO,SAAWV,EAAkB,MAAM9K,QAASqH,IAC9FuD,EAAWnE,MACP9G,QAAS0H,EACTxD,SAAUwD,EAAOoC,aAAa+B,OAIlC7L,EAAQmF,QAAQ,IAAM0G,EAAO,OAAS7L,EAAQmF,QAAQgG,IACtDF,EAAWnE,MACP9G,QAASA,EACTkE,SAAUlE,EAAQ8J,aAAa+B,MAQnD1K,KAAK8J,WAAaA,EAItBvF,OAGIvE,KAAKkJ,sBAEL,MAAM0B,GAAiB,IAAS5K,KAAKyE,UAAUoG,WAE/C,IAAK,IAAIC,EAAI,EAAGA,EAAI9K,KAAK+I,YAAYzK,SAE7B0B,KAAK2J,OAFgCmB,IAAK,CAM9C,IAAIC,EAAa/K,KAAK+I,YAAY+B,GAAG/E,GACjCiF,EAAgBzM,EAAeyB,KAAKiJ,qBAAsBoB,GAAKA,EAAEtE,KAAOgF,GACxEE,EAAmB,IAAI3G,EAAatE,KAAKyE,YAEtB,IAAnBuG,GACAhL,KAAKiJ,qBAAqBtD,MAAOI,GAAIgF,EAAYG,SAAUD,IAC3DD,EAAgBzM,EAAeyB,KAAKiJ,qBAAsBoB,GAAKA,EAAEtE,KAAOgF,IAExE/K,KAAKiJ,qBAAqB+B,GAAeE,SAAWD,EAGxDA,EAAiBlI,SAAW/C,KAAK+I,YAAY+B,GAE7CG,EAAiBE,KAAK,CAACtM,EAAS6J,EAAQ3F,EAAUgD,KAE9C,GAAI/F,KAAK6J,WAAa7J,KAAK2J,OACvB,OAGJ,MAAMyB,GAAazK,EAAUoF,EAAI/F,KAAKgJ,mBAEtC,GAAIoC,EAAW,CAEXpL,KAAKgJ,kBAAkBrD,KAAKI,GAC5B/F,KAAKgF,OAAQ,EAEbhF,KAAK4J,UACL5J,KAAKwJ,WAAaxJ,KAAK4J,QAAU5J,KAAK+I,YAAYzK,OAAS,IAC3D0B,KAAKwJ,WAAa6B,WAAWrL,KAAKwJ,WAAW8B,QAAQ,IAErD,MAAMC,GAAiBxI,SAAUA,EAAU2F,OAAQA,EAAQ7J,QAASA,GACpEmB,KAAKmJ,iBAAiBxD,KAAK4F,GAC3BvL,KAAKyJ,UAAU1J,KAAKC,KAAMuL,GAC1BvL,KAAgB,UAAX0I,EAAqB,WAAa,UAAU3I,KAAKC,KAAMuL,GAM5DvL,KAAK4J,UAAY5J,KAAK+I,YAAYzK,QAElC0B,KAAKqF,MAAMtF,KAAKC,KAAMA,KAAKmJ,kBAE3BnJ,KAAK6J,WAAY,GAEVuB,GAAaR,GAAkB5K,KAAKkJ,mBAAmB5K,SAE9D0B,KAAKkJ,mBAAqBlJ,KAAKkJ,mBAAmB1K,OAAO6L,GAAKA,EAAEtE,KAAOA,GAEnE/F,KAAKkJ,mBAAmB5K,SACxB0B,KAAKgF,MAAQhF,KAAKkJ,mBAAmB,GAAGgC,SAASnD,YAOxD6C,GAAmBA,IAAmB5K,KAAKgF,MAC5ChF,KAAKgF,MAAQiG,EAAiBlD,OAEvB6C,GAAkB5K,KAAKgF,SAAWhF,KAAKyE,UAAUI,UAAYoG,EAAiB/E,SAAYlG,KAAKyE,UAAUI,SAAWoG,EAAiB/E,SAAWtF,EAAUqK,EAAiBhG,YAClLjF,KAAKkJ,mBAAmBvD,MAAOI,GAAIgF,EAAYG,SAAUD,KASrE1G,KAAKkE,GAED,GAAwB,mBAAbA,EACP,OAGJ,MAAM+C,EAAQ,SAAUC,GACpBhD,EAAS1I,KAAKC,KAAMyL,IAGpBzL,KAAK+I,YAAYzK,OACjB0B,KAAKqF,MAAQmG,EAEbA,IAKRjH,SAASkE,GAEL,GAAwB,mBAAbA,EACP,OAEJ,MAAM+C,EAAQ,SAAUzI,GACpB0F,EAAS1I,KAAKC,KAAM+C,IAGpB/C,KAAK+I,YAAYzK,SACjB0B,KAAKyJ,UAAY+B,GAKzBjH,QAAQkE,GAEJ,GAAwB,mBAAbA,EACP,OAGJ,MAAM+C,EAAQ,SAAUzI,GACpB0F,EAAS1I,KAAKC,KAAM+C,IAGpB/C,KAAK+I,YAAYzK,SACjB0B,KAAKsF,SAAWkG,GAKxBjH,MAAMkE,GAEF,GAAwB,mBAAbA,EACP,OAGJ,MAAM+C,EAAQ,SAAUzI,GACpB0F,EAAS1I,KAAKC,KAAM+C,IAGpB/C,KAAK+I,YAAYzK,SACjB0B,KAAKuF,OAASiG,GAKtBjH,QAEI,IAAK,MAAMpF,KAAOa,KAAKiJ,qBACnBjJ,KAAKiJ,qBAAqB9J,GAAK+L,SAASQ,QAGxC1L,KAAK+I,YAAYzK,SACjB0B,KAAK2J,QAAS,IAuB1B,GAbsB,mBAAXgC,QAAyBA,OAAOC,IACvCD,OAAOrL,EAAWxD,GAAagM,GAExB,iBAAoB+C,QAC3BC,OAAOD,QAAQvL,EAAWxD,IAAegM,EAGzCxM,EAAOgE,EAAWxD,IAAegM,GAMhCtM,EACD,OAAOC,EAGXD,EAAE8D,EAAWxD,IAAegM,EAGZtM,EAAED,GADlB,MAEIwP,EAAUvP,EAAEF,GAEZ0P,EAAW,CAACvD,EAAUwD,EAAMC,EAAUlM,QAClC,IAAImM,EAAU,KACVC,EAAe,KACnB,MAAMC,EAAQ,KACV5D,EAAS5C,MAAMqG,EAASE,GACxBD,EAAU,MAEd,OAAO,WACEA,IACDC,EAAeE,UACfH,EAAUI,WAAWF,EAAOJ,MAK5C,IAAIO,KAEJhQ,EAAEiQ,GAAe,SAAI,SAAUjI,GAE3B,IAAIkI,EAAsBlI,EAEH,iBAAZA,IACPA,MAGJ,IAAImI,OAGIjI,QAAS,WACTC,WAAY,cAEZE,SAAS,EAETgG,YAAY,EAEZzB,aAAa,EACbwD,cAEAhI,aAAa,EAEbiI,OAAO,EACPC,aAAc,EAEdC,WAAY,OACZC,OAAQ,OACRC,QAAS,OAETC,WAAY,WAEV1I,GAGNiE,EAAWkE,EAASO,WAKxB,OAJI1Q,EAAE2Q,WAAWT,KACbjE,EAAWiE,GAGR1M,KAAKoN,KAAK,SAAUtC,GAIvB,MACIuC,EAAW7Q,EAAEwD,MACbsN,EAAyB5Q,IAAuBoO,EAChDG,EAAmB,IAAInC,EAAO6D,GAoFlC,GAlFA1B,EAAiBsC,QAAQvN,MAEzBwM,EAAiB7G,MACbI,GAAIuH,EACJpC,SAAUD,EACVpM,QAASmB,KACTmM,QAAS,OAGblB,EAAiBuC,SAAUzK,IAEvBvG,EAAEuG,EAASlE,SAAS4O,QA1nCb,OA0nCoCnN,EAAWyC,EAAS2F,QAAU,SAAqB3F,EAASlE,QAASkE,EAASA,WACzHsK,EAASI,QAAQC,qBAA4C1N,KAAM+C,IAEnE,MAAM6C,GAAiBqF,EAAkBlI,GAEN,mBAAxB4J,EAASI,YAChBJ,EAASI,WAAWlH,MAAM7F,KAAM4F,GAGpC,IAAI+H,EAAYrN,EAAWyC,EAAS2F,QACM,mBAA/BiE,EAAS,KAAOgB,IACvBhB,EAAS,KAAOgB,GAAW9H,MAAM7F,KAAM4F,KAK/CqF,EAAiBE,KAAKM,IAElB4B,EAASI,QAAQC,qBAA4C1N,KAAMyL,IACnEhD,EAAS5C,MAAM7F,MAAOiL,EAAkBQ,IAEpCkB,EAAS9H,SAKLkH,EAAQ6B,IAAI,UAAYN,IAMhCd,EAAmBA,EAAiBhO,OAAO6L,GAAKA,EAAEtE,KAAOuH,IACxCpO,QAAQ2O,IACjBR,EAASS,GAAGD,EAAqBhP,UACjCgP,EAAqB3C,SAASnD,WAM1CkD,EAAiBlD,OAEb4E,EAAS9H,SAuBLkH,EAAQgC,GAAG,UAAYT,EAAwBtB,EAAS,IAAMf,EAAiBlD,OAAQ,OAK3F,IAAS4E,EAASE,MAAO,CAEzB,IAAInJ,GAAY,EAEhB8I,EAAiBtN,QAAQ2O,IAErB,IAAInK,GAIA8I,EAAiBrN,KAAK4G,KAAOuH,EAAwB,CAErDU,aAAaH,EAAqB1B,SAElC,IAAIA,EAAU8B,SAAStB,EAASG,cAEhCe,EAAqB1B,QAAUI,WAAW,KAGtCsB,EAAqB3C,SAASzG,UAAUI,SAAU,EAClDgJ,EAAqB3C,SAASzG,UAAUoG,YAAa,EAErDgD,EAAqB3C,SAASnD,SAE9BmG,MAAM/B,IAAYgC,SAAShC,GAAWA,EAAU,GAEpDzI,GAAY,SAruCpC,CAivCGpH,OAAQC,SAAU6R","sourcesContent":["/*! Nite Loader | Daniele Fioroni | dfioroni91@gmail.com */\n(function (window, document, $, undefined) {\n    'use strict';\n\n    const\n        /**\n         * @returns {string}\n         */\n        generateInstanceID = () => {\n            return Math.floor(Math.random() * (9999 - 1000)) + 1000;\n        },\n        pluginPrefix = 'nite',\n        pluginMethod = pluginPrefix + 'Load',\n        pluginName = pluginMethod + 'er',\n        pluginInstance = generateInstanceID(),\n        eventNamespaceParserSeparator = '__namespace__',\n        CustomEvent = window.CustomEvent || (() => {\n            const _polyfill = (event, params) => {\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\n                const evt = document.createEvent('CustomEvent');\n                evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n                return evt;\n            };\n            _polyfill.prototype = window.Event.prototype;\n            return _polyfill;\n        })(),\n        /**\n         * @param {string} heystack\n         * @param {string} needle\n         * @returns {boolean}\n         */\n        stringContains = (heystack, needle) => {\n            return String.prototype.includes ? heystack.includes(needle) : heystack.indexOf(needle, 0) !== -1\n        },\n        /**\n         * @param {string} heystack\n         * @param {string} needle\n         * @returns {boolean}\n         */\n        stringStartsWith = (heystack, needle) => {\n            return String.prototype.startsWith ? heystack.startsWith(needle) : heystack.substr(0, needle.length) === needle;\n        },\n        /**\n         * @param {Array} heystack\n         * @param {Function} filter\n         * @returns {number}\n         */\n        arrayFindIndex = (heystack, filter) => {\n            return Array.prototype.findIndex ? heystack.findIndex(filter) : (() => {\n                let length = heystack.length,\n                    index = -1;\n                while (++index < length) {\n                    if (filter(heystack[index], index, heystack)) {\n                        return index;\n                    }\n                }\n                return -1;\n            })();\n        },\n        /**\n         * @param {HTMLElement} element\n         * @param {string} events\n         * @returns {undefined}\n         */\n        detachEventListener = (element, events) => {\n\n            if (!element || typeof events !== 'string') {\n                return;\n            }\n\n            if (stringStartsWith(events, '.')) {\n                Object.keys(privateEventsStorage).forEach(key => {\n                    const eventNameWithNamespace = key.replace(eventNamespaceParserSeparator, '.');\n                    if (stringContains(eventNameWithNamespace, events) && privateEventsStorage[key].element === element) {\n                        detachEventListener(element, eventNameWithNamespace);\n                    }\n                });\n            } else {\n\n                events = events.split('.');\n\n                const\n                    type = events[0],\n                    namespace = events[1];\n\n                if (namespace) {\n                    events = events.join(eventNamespaceParserSeparator);\n                }\n\n                if (events in privateEventsStorage) {\n                    element.removeEventListener(type, privateEventsStorage[events].handler);\n                    delete privateEventsStorage[events];\n                }\n\n            }\n\n        },\n        /**\n         * @param {HTMLElement} element\n         * @param {string} events\n         * @param {Function} handler\n         * @param {boolean} once\n         * @returns {undefined}\n         */\n        attachEventListener = (element, events, handler, once) => {\n\n            if (!element || typeof events !== 'string' || typeof handler !== 'function') {\n                return;\n            }\n\n            events = events.split('.');\n\n            const\n                type = events[0],\n                namespace = events[1];\n\n            if (namespace) {\n                events = events.join(eventNamespaceParserSeparator);\n            }\n\n            privateEventsStorage[events] = {\n                element: element,\n                count: 0,\n                once: false\n            };\n\n            if (true === once) {\n                let _handler = handler;\n                handler = function (event) {\n                    if (events in privateEventsStorage) {\n                        privateEventsStorage[events].count++;\n                        if (privateEventsStorage[events].once && privateEventsStorage[events].count > 1) {\n                            return;\n                        }\n                        _handler.call(this, event);\n                    }\n                    detachEventListener(element, events);\n                }\n            } else {\n                once = false;\n            }\n\n            privateEventsStorage[events] = {\n                ...privateEventsStorage[events], ...{\n                    handler: handler,\n                    once: once\n                }\n            };\n\n            element.addEventListener(type, privateEventsStorage[events].handler, { once: once });\n\n        },\n        /**\n         * @param {string} string\n         * @returns {string}\n         */\n        hyphensToCamelCase = string => {\n            return string.replace(/-([a-z])/g, g => g[1].toUpperCase());\n        },\n        /**\n         * @param {string} string\n         * @returns {string}\n         */\n        capitalize = string => {\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        },\n        /**\n         * @param {NodeList} nodelist\n         * @returns {Array}\n         */\n        nodelistToArray = nodelist => {\n            return [...nodelist];\n        },\n        /**\n         * @param {*} needle\n         * @param {Array} heystack\n         * @returns {boolean}\n         */\n        isInArray = (needle, heystack) => {\n            return heystack.indexOf(needle) > -1;\n        },\n        /**\n         * @param {HTMLElement} element\n         * @returns {boolean}\n         */\n        isVisible = element => {\n\n            if( 'IntersectionObserver' in window && 'intersectionRatio' in element ){\n                return element.intersectionRatio > 0;\n            }\n\n            if (window.getComputedStyle(element, 'display') === 'none') {\n                return false;\n            }\n\n            const\n                bodyEl = document.getElementsByTagName('body')[0],\n                winWidth = window.innerWidth || documnt.documentElement.clientWidth || bodyEl.clientWidth,\n                winHeight = window.innerHeight || documnt.documentElement.clientHeight || bodyEl.clientHeight,\n                rect = element.getBoundingClientRect();\n\n            return !(rect.right < 0 || rect.bottom < 0 || rect.left > winWidth || rect.top > winHeight);\n\n        },\n        /**\n         * @param {HTMLElement} element\n         * @returns {boolean}\n         */\n        isHTMLElement = element => {\n            if (typeof element !== 'object') {\n                return false;\n            }\n            try {\n                return element instanceof HTMLElement;\n            } catch (e) {\n                return element.nodeType === 1 && typeof element.style === 'object' && typeof element.ownerDocument === 'object';\n            }\n        },\n        /**\n         * @param {string|HTMLElement} source\n         * @returns {boolean}\n         */\n        isLoaded = source => {\n            return (\n                (\n                    typeof source === 'string'\n                    &&\n                    isInArray(source, privateCache)\n                )\n                ||\n                (\n                    isHTMLElement(source)\n                    &&\n                    ('currentSrc' in source && source.currentSrc.length > 0)\n                    &&\n                    (\n                        ('complete' in source && source.complete)\n                        ||\n                        ('readyState' in source && source.readyState >= 2))\n                )\n            );\n        },\n        /**\n         * @param {string|HTMLElement} source\n         * @returns {boolean}\n         */\n        isBroken = source => {\n            return (\n                isLoaded(source)\n                &&\n                (\n                    (\n                        isHTMLElement(source)\n                        &&\n                        (\n                            ('naturalWidth' in source && Math.floor(source.naturalWidth) === 0)\n                            ||\n                            ('videoWidth' in source && source.videoWidth === 0)\n                        )\n                    )\n                    ||\n                    typeof source === 'string'\n                )\n            );\n        },\n        /**\n         * @param {Object} resource\n         * @returns {Object}\n         */\n        decodeResource = resource => {\n\n            const\n                formatExtensions = {\n                    image: 'jp[e]?g|jpe|jif|jfif|jfi|gif|png|tif[f]?|bmp|dib|webp|ico|cur|svg',\n                    audio: 'mp3|ogg|oga|spx|ogg|wav',\n                    video: 'mp4|ogv|webm'\n                },\n                formatTagNames = {\n                    image: 'img|picture|source',\n                    audio: 'audio|source',\n                    video: 'video|source'\n                },\n                base64Heading = '\\;base64\\,';\n\n            let\n                output = {\n                    format: null,\n                    extension: null,\n                    tag: null,\n                    exists: false\n                },\n                breakLoop = false;\n\n            resource.resource = resource.resource.split('?')[0];\n            resource.resource = resource.resource.split('#')[0];\n            Object.keys(formatExtensions).forEach(formatCandidate => {\n\n                if (breakLoop) {\n                    return;\n                }\n\n                if (new RegExp('(\\.(' + formatExtensions[formatCandidate] + ')$)|' + base64Heading, 'g').test(resource.resource)) {\n\n                    if (new RegExp(base64Heading, 'g').test(resource.resource)) {\n\n                        let matches64 = resource.resource.match(new RegExp('^data:' + formatCandidate + '\\/(' + formatExtensions[formatCandidate] + ')', 'g'));\n\n                        if (null === matches64) {\n                            return;\n                        }\n\n                        matches64 = matches64[0];\n\n                        output.format = formatCandidate;\n                        output.extension = matches64.replace('data:' + formatCandidate + '/', '');\n                        output.tag = formatTagNames[formatCandidate];\n\n                        breakLoop = true;\n\n                    } else {\n\n                        let matches = resource.resource.match(new RegExp(formatExtensions[formatCandidate], 'g'));\n\n                        if (matches) {\n\n                            output.format = formatCandidate;\n                            output.extension = matches[0];\n                            output.tag = formatTagNames[formatCandidate];\n\n                            breakLoop = true;\n\n                        }\n\n                    }\n\n                }\n\n            });\n\n            if (isHTMLElement(resource.element)) {\n\n                let\n                    tagName = resource.element.tagName.toLowerCase(),\n                    allTags = '';\n\n                Object.values(formatTagNames).forEach(tags => {\n                    allTags += '|' + tags;\n                });\n\n                allTags = allTags.split('|');\n\n                if (isInArray(tagName, allTags)) {\n                    output.tag = tagName;\n                    output.exists = true;\n                    if (output.format === null) {\n                        Object.keys(formatTagNames).forEach(format => {\n                            if (stringContains(formatTagNames[format], output.tag)) {\n                                output.format = format;\n                            }\n                        });\n                    }\n                }\n\n            }\n\n            if (stringContains(output.tag, '|')) {\n                output.tag = output.tag.split('|')[0];\n            }\n\n            return output;\n\n        };\n\n    let\n        privateEventsStorage = {},\n        privateCache = [];\n\n    // TODO: Promise support\n    // TODO: think about useful vars in callback args (this class is not public but its vars are returned in .progress() callback)\n    class SingleLoader {\n\n        constructor(options) {\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n\n            if (!stringStartsWith(this._settings.srcAttr, 'data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n\n            if (!stringStartsWith(this._settings.srcsetAttr, 'data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this._id = null;\n            this._idEvent = null;\n            this._busy = false;\n\n            this._element = null;\n            this._resource = null;\n            this._format = null;\n            this._observer = null;\n\n            this._done = () => { };\n            this._success = () => { };\n            this._error = () => { };\n\n            this._callback = (e) => {\n\n                this._busy = false;\n                if( null !== this._observer ){\n                    this._observer.unobserve(this._element);\n                }\n\n                const src = this._element.currentSrc || this._element.src;\n\n                if (!isInArray(src, privateCache)) {\n                    privateCache.push(src);\n                }\n\n                let thisArguments = [this._element, e.type, src, this._id];\n\n                this[e.type !== 'error' ? '_success' : '_error'].apply(this, thisArguments);\n                this._done.apply(this, thisArguments);\n\n            };\n\n        }\n\n        set resource(data) {\n\n            if (typeof data === 'object' && 'id' in data && 'element' in data && 'resource' in data) {\n\n                this._id = data.id;\n                this._element = data.element;\n                this._resource = data.resource;\n\n                let info = decodeResource({ resource: this._resource, element: this._element });\n                this._tag = info.tag;\n                this._exists = info.exists;\n                this._format = info.format;\n\n                if (!this._exists) {\n\n                    this._element = document.createElement(this._tag);\n                    this._element.dataset[this.srcAttr] = this._resource;\n\n                }else if( this._settings.visible && 'IntersectionObserver' in window ){\n\n                    this._observer = new IntersectionObserver((entries, observer) => {\n                        entries.forEach(entry => entry.target.intersectionRatio = entry.intersectionRatio);\n                    }, {\n                        root: null,\n                        rootMargin: '0px',\n                        threshold: 0.1\n                    });\n\n                    this._observer.observe(this._element);\n\n                }\n\n                this._idEvent = this._element[pluginInstance + '_IDEvent'];\n                this._busy = this._idEvent !== undefined;\n                this._idEvent = this._busy ? this._idEvent : pluginName + '_unique_' + this._element.tagName + '_' + generateInstanceID();\n\n            }\n\n        }\n\n        get resource() {\n            return this._resource;\n        }\n\n        /**\n         *\n         * @returns {boolean} se ha preso in carico il caricamento oppure no per vari motivi (è già caricato, non è nella viewport etc)\n         */\n        load() {\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n\n                if (!this._busy) {\n                    // TODO: mayabe this should be called in this._callback\n                    detachEventListener(this._element, '.' + this._idEvent);\n                }\n\n                this._callback(new CustomEvent(!isBroken(this._exists ? this._element : this._resource) ? 'load' : 'error'));\n\n                return false;\n\n            } else if (this._exists && this._settings.visible && !isVisible(this._element)) {\n\n                return false;\n\n            } else {\n\n                if (this._format === 'image') {\n\n                    attachEventListener(this._element, 'load.' + this._idEvent, this._callback, !this._busy);\n                    attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                    const picture = this._element.closest('picture');\n\n                    if (picture && 'HTMLPictureElement' in window) {\n\n                        delete this._element.dataset[this.srcsetAttr];\n                        delete this._element.dataset[this.srcAttr];\n\n                        picture.querySelectorAll('source[' + this._settings.srcsetAttr + ']').forEach((el) => {\n                            el.setAttribute('srcset', el.dataset[this.srcAttr]);\n                            delete el.dataset[this.srcAttr];\n                        });\n\n                    } else {\n\n                        if (this._element.matches('[' + this._settings.srcsetAttr + ']')) {\n                            this._element.setAttribute('srcset', this._element.dataset[this.srcsetAttr]);\n                            delete this._element.dataset[this.srcsetAttr];\n                        }\n\n                        if (this._element.matches('[' + this._settings.srcAttr + ']')) {\n                            this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                            delete this._element.dataset[this.srcAttr];\n                        }\n\n                    }\n\n                } else if (this._format === 'video' || this._format === 'audio') {\n\n                    const\n                        isPlaythroughModeNormal = true === this._settings.playthrough,\n                        isPlaythroughModeFull = 'full' === this._settings.playthrough,\n                        sources = this._element.querySelectorAll('source'),\n                        isFullyBuffered = function (media) {\n                            return media.buffered.length && Math.round(media.buffered.end(0)) / Math.round(media.seekable.end(0)) === 1;\n                        };\n\n                    let callMediaLoad = false;\n\n                    if (sources) {\n\n                        sources.forEach((source) => {\n\n                            if (source.matches('[' + this._settings.srcAttr + ']')) {\n\n                                source.setAttribute('src', source.dataset[this.srcAttr]);\n                                delete source.dataset[this.srcsetAttr];\n\n                                callMediaLoad = true;\n\n                            }\n\n                            attachEventListener(source, 'error.' + this._idEvent, (e) => {\n\n                                const sourcesErrorId = pluginName + '_error';\n\n                                source[pluginInstance + '_' + sourcesErrorId] = true;\n\n                                if (sources.length === nodelistToArray(sources).filter(thisSource => true === thisSource[pluginInstance + '_' + sourcesErrorId]).length) {\n                                    this._callback(e);\n                                }\n\n                            }, !this._busy);\n\n                        });\n\n                    } else if (this._element.matches('[' + this._settings.srcAttr + ']')) {\n\n                        this._element.setAttribute('src', this._element.dataset[this.srcAttr]);\n                        delete this._element.dataset[this.srcAttr];\n\n                        attachEventListener(this._element, 'error.' + this._idEvent, this._callback, !this._busy);\n\n                        callMediaLoad = true;\n\n                    }\n\n                    if (callMediaLoad) {\n                        this._element.load();\n                    }\n\n                    attachEventListener(this._element, 'loadedmetadata.' + this._idEvent, () => {\n\n                        if (!isPlaythroughModeNormal && !isPlaythroughModeFull) {\n                            this._callback(new CustomEvent('load'));\n                        }\n\n                        if (isPlaythroughModeFull) {\n\n                            let onProgressReplacementInterval = setInterval(() => {\n\n                                let isError = this._element.readyState > 0 && !this._element.duration;\n\n                                if (isError || isFullyBuffered(this._element)) {\n\n                                    this._element.currentTime = 0;\n\n                                    if (!isError && !this._busy && this._element.paused && this._element.matches('[autoplay]')) {\n                                        this._element.play();\n                                    }\n\n                                    clearInterval(onProgressReplacementInterval);\n\n                                    this._callback(new CustomEvent(!isError ? 'load' : 'error'));\n\n                                } else {\n\n                                    if (!this._element.paused) {\n                                        this._element.pause();\n                                    }\n\n                                    if (!this._busy) {\n                                        this._element.currentTime += 2;\n                                    }\n\n                                }\n\n                            }, 500);\n\n                            this._element[pluginName + '_' + this._idEvent] = onProgressReplacementInterval;\n\n                        }\n\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplay.' + this._idEvent, () => {\n                        if (isPlaythroughModeFull && this._element.currentTime === 0 && !isFullyBuffered(this._element)) {\n                            this._element.currentTime++;\n                        }\n                    }, !this._busy);\n\n                    attachEventListener(this._element, 'canplaythrough.' + this._idEvent, () => {\n                        if (isPlaythroughModeNormal) {\n                            this._callback(new CustomEvent('load'));\n                        }\n                    }, !this._busy);\n\n                } else {\n\n                    return false;\n\n                }\n\n                if (!this._busy) {\n                    this._element[pluginInstance + '_IDEvent'] = this._idEvent;\n                }\n\n            }\n\n            this._resource = this._element.currentSrc || this._element.src;\n\n            return !this._busy;\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            this._done = function (element, status, resource, id) {\n                callback.apply(this, [element, status, resource, id]);\n            };\n\n        };\n\n        abort() {\n\n            detachEventListener(this._element, '.' + this._idEvent);\n\n            if (isLoaded(this._exists ? this._element : this._resource)) {\n                return;\n            }\n\n            const\n                src = this._element.getAttribute('srcset'),\n                srcset = this._element.getAttribute('src');\n\n            if (undefined !== src) {\n                this._element.dataset[this.srcAttr] = src;\n                this._element.setAttribute(this._settings.srcAttr, src);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n            if (undefined !== srcset) {\n                this._element.dataset[this.srcsetAttr] = srcset;\n                this._element.setAttribute(this._settings.srcsetAttr, srcset);\n                this._element.removeAttribute('src');\n                this._element.removeAttribute('srcset');\n            }\n\n        }\n\n    }\n\n    // TODO: Promise support\n    // TODO: private vars\n    // TODO: refactory succes/done/progress code...\n    class Loader {\n\n        constructor(options) {\n\n            this._collection = [];\n            this._collectionLoaded = [];\n            this._collectionInstances = [];\n            this._collectionPending = [];\n            this._resourcesLoaded = [];\n\n            this._settings = {\n                ...{\n                    srcAttr: 'data-src',\n                    srcsetAttr: 'data-srcset',\n                    playthrough: false,\n                    visible: false,\n                    backgrounds: false,\n                    attributes: []\n                }, ...options\n            };\n\n            this.srcAttr = '';\n            this.srcsetAttr = '';\n            if (!stringStartsWith(this._settings.srcAttr, 'data-')) {\n                this.srcAttr = this._settings.srcAttr;\n                this._settings.srcAttr = 'data-' + this._settings.srcAttr;\n            } else {\n                this.srcAttr = this._settings.srcAttr.replace('data-', '');\n            }\n            if (!stringStartsWith(this._settings.srcsetAttr, 'data-')) {\n                this.srcsetAttr = this._settings.srcsetAttr;\n                this._settings.srcsetAttr = 'data-' + this._settings.srcsetAttr;\n            } else {\n                this.srcsetAttr = this._settings.srcsetAttr.replace('data-', '');\n            }\n\n            if (typeof this._settings.attributes === 'string') {\n                this._settings.attributes = this._settings.attributes.split(this._settings.attributes.contains(',') ? ',' : ' ');\n            }\n            if (!Array.isArray(this._settings.attributes)) {\n                this._settings.attributes = [];\n            }\n\n            this.srcAttr = hyphensToCamelCase(this.srcAttr);\n            this.srcsetAttr = hyphensToCamelCase(this.srcsetAttr);\n\n            this.percentage = 0;\n\n            this._done = () => { };\n            this._progress = () => { };\n            this._success = () => { };\n            this._error = () => { };\n            this._loop = this.load;\n\n            this._abort = false;\n            this._loaded = 0;\n            this._complete = false;\n            this._busy = false;\n\n        }\n\n        set collection(collection) {\n\n            if (!Array.isArray(collection)) {\n                collection = [];\n            }\n\n            collection.forEach(item => {\n\n                let element = {\n                    resource: '',\n                    element: null,\n                    id: generateInstanceID()\n                };\n\n                if (typeof item === 'string') {\n                    element.resource = item;\n                } else if (typeof item === 'object' && 'resource' in item) {\n                    element = { ...element, ...item };\n                } else {\n                    return;\n                }\n\n                this._collection.push(element);\n\n            });\n\n        }\n\n        get collection() {\n            return this._collection;\n        }\n\n        collect(element) {\n\n            const\n                targets = 'img, video, audio',\n                targetsExtended = targets + ', picture, source',\n                targetsFilter = '[' + this._settings.srcAttr + '], [' + this._settings.srcsetAttr + ']';\n\n            let\n                collection = [],\n                targetsTags = nodelistToArray(element.querySelectorAll(targets));\n\n            if (element.matches(targetsExtended)) {\n                targetsTags.push(element);\n            }\n\n            targetsTags = targetsTags.filter((target) => {\n                let children = nodelistToArray(target.children);\n                children = children.filter(x => x.matches(targetsExtended));\n                children = children.filter(x => x.matches(targetsFilter));\n                return target.matches(targetsFilter) || children.length;\n            });\n\n            targetsTags.forEach((target) => {\n                let targetSource = target;\n                if (!targetSource.matches(targetsFilter)) {\n                    targetSource = targetSource.querySelectorAll(targetsFilter);\n                    targetSource = [...targetSource][0];\n                }\n                collection.push({\n                    element: target,\n                    resource: targetSource.getAttribute(this._settings.srcAttr) || targetSource.getAttribute(this._settings.srcsetAttr)\n                });\n            });\n\n            if (true === this._settings.backgrounds) {\n                let targetsBg = nodelistToArray(element.querySelectorAll('*'));\n                targetsBg.push(element);\n                targetsBg = targetsBg.filter(target => !target.matches(targetsExtended));\n                targetsBg = targetsBg.filter(target => getComputedStyle(target).backgroundImage !== 'none');\n                targetsBg.forEach((target) => {\n\n                    const url = getComputedStyle(target).backgroundImage.match(/\\((.*?)\\)/);\n\n                    if (null === url || url.length < 2) {\n                        return true;\n                    }\n\n                    collection.push({\n                        element: target,\n                        resource: url[1].replace(/('|\")/g, '')\n                    });\n\n                });\n            }\n\n            if (this._settings.attributes.length) {\n                for (const attr in this._settings.attributes) {\n                    if (this._settings.attributes.hasOwnProperty(attr)) {\n\n                        nodelistToArray(element.querySelectorAll('[' + attr + ']:not(' + targetsExtended + ')')).forEach((target) => {\n                            collection.push({\n                                element: target,\n                                resource: target.getAttribute(attr)\n                            });\n                        });\n\n                        if (element.matches('[' + attr + ']') && !element.matches(targetsExtended)) {\n                            collection.push({\n                                element: element,\n                                resource: element.getAttribute(attr)\n                            });\n                        }\n\n                    }\n                }\n            }\n\n            this.collection = collection;\n\n        }\n\n        load() {\n\n            // resets pending elements (sequential opt helper array) every time we loop\n            this._collectionPending = [];\n\n            const sequentialMode = true === this._settings.sequential;\n\n            for (let i = 0; i < this._collection.length; i++) {\n\n                if (this._abort) {\n                    break;\n                }\n\n                let thisLoadId = this._collection[i].id,\n                    thisLoadIndex = arrayFindIndex(this._collectionInstances, x => x.id === thisLoadId),\n                    thisLoadInstance = new SingleLoader(this._settings);\n\n                if (thisLoadIndex === -1) {\n                    this._collectionInstances.push({ id: thisLoadId, instance: thisLoadInstance });\n                    thisLoadIndex = arrayFindIndex(this._collectionInstances, x => x.id === thisLoadId);\n                } else {\n                    this._collectionInstances[thisLoadIndex].instance = thisLoadInstance;\n                }\n\n                thisLoadInstance.resource = this._collection[i];\n\n                thisLoadInstance.done((element, status, resource, id) => {\n\n                    if (this._complete || this._abort) {\n                        return;\n                    }\n\n                    const aProgress = !isInArray(id, this._collectionLoaded);\n\n                    if (aProgress) {\n\n                        this._collectionLoaded.push(id);\n                        this._busy = false;\n\n                        this._loaded++;\n                        this.percentage = this._loaded / this._collection.length * 100;\n                        this.percentage = parseFloat(this.percentage.toFixed(4));\n\n                        const thisResource = { resource: resource, status: status, element: element };\n                        this._resourcesLoaded.push(thisResource);\n                        this._progress.call(this, thisResource);\n                        this[status !== 'error' ? '_success' : '_error'].call(this, thisResource);\n                        // TODO: dispatch event on element maybe?\n                        // element.dispatchEvent(new CustomEvent(pluginPrefix + capitalize(status) + '.' + pluginPrefix));\n\n                    }\n\n                    if (this._loaded === this._collection.length) {\n\n                        this._done.call(this, this._resourcesLoaded);\n\n                        this._complete = true;\n\n                    } else if (aProgress && sequentialMode && this._collectionPending.length) {\n\n                        this._collectionPending = this._collectionPending.filter(x => x.id !== id);\n\n                        if (this._collectionPending.length) {\n                            this._busy = this._collectionPending[0].instance.load();\n                        }\n\n                    }\n\n                });\n\n                if (!sequentialMode || (sequentialMode && !this._busy)) {\n                    this._busy = thisLoadInstance.load();\n\n                } else if (sequentialMode && this._busy && (!this._settings.visible || !thisLoadInstance._exists || (this._settings.visible && thisLoadInstance._exists && isVisible(thisLoadInstance._element)))) {\n                    this._collectionPending.push({ id: thisLoadId, instance: thisLoadInstance });\n\n                }\n\n\n            }\n\n        }\n\n        done(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resources) {\n                callback.call(this, resources);\n            };\n\n            if (this._collection.length) {\n                this._done = _func;\n            } else {\n                _func();\n            }\n\n        };\n\n        progress(callback) {\n\n            if (typeof callback !== 'function')\n                return;\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._progress = _func;\n            }\n\n        };\n\n        success(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._success = _func;\n            }\n\n        };\n\n        error(callback) {\n\n            if (typeof callback !== 'function') {\n                return;\n            }\n\n            const _func = function (resource) {\n                callback.call(this, resource);\n            };\n\n            if (this._collection.length) {\n                this._error = _func;\n            }\n\n        };\n\n        abort() {\n\n            for (const key in this._collectionInstances) {\n                this._collectionInstances[key].instance.abort();\n            }\n\n            if (this._collection.length) {\n                this._abort = true;\n            }\n\n        };\n\n    }\n\n    // public interface\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n    // requirejs\n    if (typeof define === 'function' && define.amd) {\n        define(capitalize(pluginName), Loader);\n        // nodejs\n    } else if ('object' === typeof exports) {\n        module.exports[capitalize(pluginName)] = Loader;\n        // vanilla\n    } else {\n        window[capitalize(pluginName)] = Loader;\n    }\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    // jQuery interface\n    // - - - - - - - - - - - - - - - - - - - -\n    if (!$) {\n        return undefined;\n    }\n\n    $[capitalize(pluginName)] = Loader;\n\n    const\n        $document = $(document),\n        $window = $(window),\n        // thanks https://gist.github.com/beaucharman/e46b8e4d03ef30480d7f4db5a78498ca\n        throttle = (callback, wait, context = this) => {\n            let timeout = null,\n                callbackArgs = null\n            const later = () => {\n                callback.apply(context, callbackArgs)\n                timeout = null\n            }\n            return function () {\n                if (!timeout) {\n                    callbackArgs = arguments\n                    timeout = setTimeout(later, wait)\n                }\n            }\n        };\n\n    let methodCollection = [];\n\n    $.fn[pluginMethod] = function (options) {\n\n        let originalUserOptions = options;\n\n        if (typeof options !== 'object') {\n            options = {};\n        }\n\n        let settings = {\n            ...{\n\n                srcAttr: 'data-src',\n                srcsetAttr: 'data-srcset',\n\n                visible: false,\n\n                sequential: false,\n\n                backgrounds: false,\n                extraAttrs: [],\n\n                playthrough: false,\n\n                early: false,\n                earlyTimeout: 0,\n\n                onProgress: () => { },\n                onLoad: () => { },\n                onError: () => { },\n\n                onComplete: () => { },\n\n            }, ...options\n        };\n\n        let callback = settings.onComplete;\n        if ($.isFunction(originalUserOptions)) {\n            callback = originalUserOptions;\n        }\n\n        return this.each(function (i) {\n\n            // TODO: mutation observer when new children are appended\n\n            const\n                $element = $(this),\n                uniqueMethodPluginName = generateInstanceID() + i,\n                thisLoadInstance = new Loader(settings);\n\n            thisLoadInstance.collect(this);\n\n            methodCollection.push({\n                id: uniqueMethodPluginName,\n                instance: thisLoadInstance,\n                element: this,\n                timeout: null\n            });\n\n            thisLoadInstance.progress((resource) => {\n\n                $(resource.element).trigger(pluginPrefix + capitalize(resource.status) + '.' + pluginPrefix, [resource.element, resource.resource]);\n                $element.trigger(pluginPrefix + 'Progress.' + pluginPrefix, [this, resource]);\n\n                const thisArguments = [thisLoadInstance, resource];\n\n                if (typeof settings.onProgress === 'function') {\n                    settings.onProgress.apply(this, thisArguments);\n                }\n\n                let eventName = capitalize(resource.status);\n                if (typeof settings['on' + eventName] === 'function') {\n                    settings['on' + eventName].apply(this, thisArguments);\n                }\n\n            });\n\n            thisLoadInstance.done(resources => {\n\n                $element.trigger(pluginPrefix + 'Complete.' + pluginPrefix, [this, resources]);\n                callback.apply(this, [thisLoadInstance, resources]);\n\n                if (settings.visible) {\n                    /*if ('IntersectionObserver' in window) {\n                        thisLoadInstance.collection.forEach(item => item.element.intersectionObserver.unobserve(item.element));\n\n                    } else {*/\n                        $window.off('scroll.' + uniqueMethodPluginName);\n\n                    //}\n                }\n\n                // refresh other method calls for same el (omitting this one)\n                methodCollection = methodCollection.filter(x => x.id !== uniqueMethodPluginName);\n                methodCollection.forEach(thisMethodCollection => {\n                    if ($element.is(thisMethodCollection.element)) {\n                        thisMethodCollection.instance.load();\n                    }\n                });\n\n            });\n\n            thisLoadInstance.load();\n\n            if (settings.visible) {\n               /* if ('IntersectionObserver' in window) {\n\n                    thisLoadInstance.collection.forEach(item => {\n\n                        item.element.intersectionObserver = new IntersectionObserver((entries, observer) => {\n                            entries.forEach(entry => {\n                                if( entry.intersectionRatio > 0 ){\n                                    thisLoadInstance.load();\n                                }\n                            });\n                        }, {\n                            root: null,\n                            rootMargin: '0px',\n                            threshold: 0.0\n                        });\n\n                        item.element.intersectionObserver.observe(item.element);\n\n                    });\n\n                } else {*/\n\n                    $window.on('scroll.' + uniqueMethodPluginName, throttle(() => thisLoadInstance.load(), 250));\n\n               //}\n            }\n\n            if (true === settings.early) {\n\n                let breakLoop = false;\n\n                methodCollection.forEach(thisMethodCollection => {\n\n                    if (breakLoop) {\n                        return;\n                    }\n\n                    if (methodCollection[key].id === uniqueMethodPluginName) {\n\n                        clearTimeout(thisMethodCollection.timeout);\n\n                        let timeout = parseInt(settings.earlyTimeout);\n\n                        thisMethodCollection.timeout = setTimeout(() => {\n\n                            // TODO: appropriate method to set/update settings?\n                            thisMethodCollection.instance._settings.visible = false;\n                            thisMethodCollection.instance._settings.sequential = true;\n\n                            thisMethodCollection.instance.load();\n\n                        }, !isNaN(timeout) && isFinite(timeout) ? timeout : 0);\n\n                        breakLoop = true;\n\n                    }\n\n                });\n\n            }\n\n        });\n\n    };\n\n})(window, document, jQuery);"],"file":"nite.loader.min.js"}