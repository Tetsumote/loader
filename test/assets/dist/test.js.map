{"version":3,"sources":["test.js"],"names":["consoleDiv","document","querySelector","consoleLog","hasChildNodes","ol","createElement","append","list","li","innerHTML","string","scrollTop","offsetHeight","addEventListener","e","detail","element","querySelectorAll","forEach","el","closest","classList","add","instance","instanceSequentialMode","style","display","abort","randomResources","i","letters","colors","ii","color","c","Math","floor","random","push","Loader","sequential","collection","progress","percentage","done","load"],"mappings":"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","file":"test.js","sourcesContent":["const consoleDiv = document.querySelector('#console');\nconst consoleLog = string => {\n    if (!consoleDiv.hasChildNodes()) {\n        const ol = document.createElement('ol');\n        consoleDiv.append(ol);\n    }\n\n    const list = consoleDiv.querySelector('ol');\n    const li = document.createElement('li');\n    li.innerHTML = string;\n    list.append(li);\n\n    consoleDiv.scrollTop = list.offsetHeight;\n};\n\n// TODO: without jQuery\n/*$('.playground').loadResources({\n    srcAttr: 'data-src',\n    srcsetAttr: 'data-srcset',\n\n    visible: true,\n\n    sequential: true,\n\n    backgrounds: true,\n    extraAttrs: [],\n\n    playthrough: 'full',\n\n    early: false,\n    earlyTimeout: 6000,\n\n    onComplete: function(instance, resources) {\n        $(this).addClass('complete');\n    },\n\n    onProgress: function(instance, resource) {\n        $(this)\n            .find('[data-percentage]')\n            .attr('data-percentage', instance.percentage)\n            .closest('.playground__percentage')\n            .addClass('visible');\n    },\n\n    onLoad: function(instance, resource) {\n        $(this).addClass('has-loads');\n    },\n    onError: function(instance, resource) {\n        $(this).addClass('has-errors');\n    }\n});*/\n\ndocument.addEventListener('resourceLoad', e => {\n    consoleLog('Loader(): ' + e.detail.element);\n});\n\ndocument.addEventListener('resourceError', e => {\n    consoleLog('Loader(): ' + e.detail.element);\n});\n\n[...document.querySelectorAll('figure img, figure video')].forEach(el => {\n    el.addEventListener('resourceLoad', e => e.detail.element.closest('figure').classList.add('loaded'));\n    el.addEventListener('resourceError', e => e.detail.element.closest('figure').classList.add('loaded-error'));\n});\n\nlet instance;\nlet instanceSequentialMode = true;\n\ndocument.querySelector('.program-mode--sequential').addEventListener('click', () => {\n    if (instance !== null) {\n        return;\n    }\n\n    document.querySelector('.program-mode--parallel').style.display = 'block';\n    document.querySelector('.program-mode--sequential').style.display = 'none';\n\n    instanceSequentialMode = true;\n    consoleLog('Loader(): Sequential Mode');\n});\n\ndocument.querySelector('.program-mode--parallel').addEventListener('click', () => {\n    if (instance !== null) {\n        return;\n    }\n\n    document.querySelector('.program-mode--sequential').style.display = 'block';\n    document.querySelector('.program-mode--parallel').style.display = 'none';\n\n    instanceSequentialMode = false;\n    consoleLog('Loader(): Parallel Mode');\n});\n\n[...document.querySelectorAll('[class*=\"program-load\"]')].forEach(el =>\n    el.addEventListener('click', () => {\n        if (instance) {\n            consoleLog('Loader(): Aborted...');\n\n            instance.abort();\n            instance = null;\n\n            document.querySelector('.program-load--run').style.display = 'block';\n            document.querySelector('.program-load--kill').style.display = 'none';\n        } else {\n            document.querySelector('.program-load--run').style.display = 'none';\n            document.querySelector('.program-load--kill').style.display = 'block';\n\n            let randomResources = [];\n\n            for (let i = 0; i < 10; i++) {\n                let letters = '0123456789ABCDEF',\n                    colors = [];\n\n                for (let ii = 0; ii < 2; ii++) {\n                    let color = '';\n                    for (let c = 0; c < 6; c++) {\n                        color += letters[Math.floor(Math.random() * 16)];\n                    }\n                    colors[ii] = color;\n                }\n\n                randomResources.push('//placehold.it/720x720/' + colors[0] + '/' + colors[1] + '.jpg');\n            }\n\n            instance = new Loader({\n                sequential: instanceSequentialMode\n            });\n\n            instance.collection = randomResources;\n\n            consoleLog('Loader(): 0% - Starting...');\n\n            instance.progress(resource => {\n                consoleLog('Loader(): ' + instance.percentage + '%');\n            });\n\n            instance.done(resources => {\n                consoleLog('Loader(): 100% - Done!!');\n                document.querySelector('.program-load--run').style.display = 'block';\n                document.querySelector('.program-load--kill').style.display = 'none';\n\n                instance = null;\n            });\n\n            instance.load();\n        }\n    })\n);\n"]}