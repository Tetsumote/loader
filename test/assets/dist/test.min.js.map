{"version":3,"sources":["test.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","consoleDiv","document","querySelector","consoleLog","string","hasChildNodes","ol","createElement","append","list","li","innerHTML","scrollTop","offsetHeight","addEventListener","e","detail","element","concat","querySelectorAll","forEach","el","closest","classList","add","instance","instanceSequentialMode","style","display","abort","randomResources","colors","ii","color","c","Math","floor","random","push","Loader","sequential","collection","progress","resource","percentage","done","resources","load"],"mappings":"AAAA,aAEA,SAASA,mBAAmBC,GAAO,GAAIC,MAAMC,QAAQF,GAAM,CAAE,IAAK,IAAIG,EAAI,EAAGC,EAAOH,MAAMD,EAAIK,QAASF,EAAIH,EAAIK,OAAQF,IAAOC,EAAKD,GAAKH,EAAIG,GAAM,OAAOC,EAAe,OAAOH,MAAMK,KAAKN,GAE1L,IAAIO,WAAaC,SAASC,cAAc,YACpCC,WAAa,SAAoBC,GACjC,IAAKJ,WAAWK,gBAAiB,CAC7B,IAAIC,EAAKL,SAASM,cAAc,MAChCP,WAAWQ,OAAOF,GAGtB,IAAIG,EAAOT,WAAWE,cAAc,MAChCQ,EAAKT,SAASM,cAAc,MAChCG,EAAGC,UAAYP,EACfK,EAAKD,OAAOE,GAEZV,WAAWY,UAAYH,EAAKI,cAwChCZ,SAASa,iBAAiB,eAAgB,SAAUC,GAChDZ,WAAW,aAAeY,EAAEC,OAAOC,WAGvChB,SAASa,iBAAiB,gBAAiB,SAAUC,GACjDZ,WAAW,aAAeY,EAAEC,OAAOC,cAGpCC,OAAO1B,mBAAmBS,SAASkB,iBAAiB,8BAA8BC,QAAQ,SAAUC,GACnGA,EAAGP,iBAAiB,eAAgB,SAAUC,GAC1C,OAAOA,EAAEC,OAAOC,QAAQK,QAAQ,UAAUC,UAAUC,IAAI,YAE5DH,EAAGP,iBAAiB,gBAAiB,SAAUC,GAC3C,OAAOA,EAAEC,OAAOC,QAAQK,QAAQ,UAAUC,UAAUC,IAAI,oBAIhE,IAAIC,cAAW,EACXC,wBAAyB,EAE7BzB,SAASC,cAAc,6BAA6BY,iBAAiB,QAAS,WACzD,OAAbW,WAIJxB,SAASC,cAAc,2BAA2ByB,MAAMC,QAAU,QAClE3B,SAASC,cAAc,6BAA6ByB,MAAMC,QAAU,OAEpEF,wBAAyB,EACzBvB,WAAW,gCAGfF,SAASC,cAAc,2BAA2BY,iBAAiB,QAAS,WACvD,OAAbW,WAIJxB,SAASC,cAAc,6BAA6ByB,MAAMC,QAAU,QACpE3B,SAASC,cAAc,2BAA2ByB,MAAMC,QAAU,OAElEF,wBAAyB,EACzBvB,WAAW,iCAGZe,OAAO1B,mBAAmBS,SAASkB,iBAAiB,6BAA6BC,QAAQ,SAAUC,GAClG,OAAOA,EAAGP,iBAAiB,QAAS,WAChC,GAAIW,SACAtB,WAAW,wBAEXsB,SAASI,QACTJ,SAAW,KAEXxB,SAASC,cAAc,sBAAsByB,MAAMC,QAAU,QAC7D3B,SAASC,cAAc,uBAAuByB,MAAMC,QAAU,WAC3D,CACH3B,SAASC,cAAc,sBAAsByB,MAAMC,QAAU,OAC7D3B,SAASC,cAAc,uBAAuByB,MAAMC,QAAU,QAI9D,IAFA,IAAIE,KAEKlC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAIzB,IAHA,IACImC,KAEKC,EAAK,EAAGA,EAAK,EAAGA,IAAM,CAE3B,IADA,IAAIC,EAAQ,GACHC,EAAI,EAAGA,EAAI,EAAGA,IACnBD,GANM,mBAMWE,KAAKC,MAAsB,GAAhBD,KAAKE,WAErCN,EAAOC,GAAMC,EAGjBH,EAAgBQ,KAAK,0BAA4BP,EAAO,GAAK,IAAMA,EAAO,GAAK,SAGnFN,SAAW,IAAIc,QACXC,WAAYd,0BAGPe,WAAaX,EAEtB3B,WAAW,8BAEXsB,SAASiB,SAAS,SAAUC,GACxBxC,WAAW,aAAesB,SAASmB,WAAa,OAGpDnB,SAASoB,KAAK,SAAUC,GACpB3C,WAAW,2BACXF,SAASC,cAAc,sBAAsByB,MAAMC,QAAU,QAC7D3B,SAASC,cAAc,uBAAuByB,MAAMC,QAAU,OAE9DH,SAAW,OAGfA,SAASsB","sourcesContent":["const consoleDiv = document.querySelector('#console');\nconst consoleLog = string => {\n    if (!consoleDiv.hasChildNodes()) {\n        const ol = document.createElement('ol');\n        consoleDiv.append(ol);\n    }\n\n    const list = consoleDiv.querySelector('ol');\n    const li = document.createElement('li');\n    li.innerHTML = string;\n    list.append(li);\n\n    consoleDiv.scrollTop = list.offsetHeight;\n};\n\n// TODO: without jQuery\n/*$('.playground').loadResources({\n    srcAttr: 'data-src',\n    srcsetAttr: 'data-srcset',\n\n    visible: true,\n\n    sequential: true,\n\n    backgrounds: true,\n    extraAttrs: [],\n\n    playthrough: 'full',\n\n    early: false,\n    earlyTimeout: 6000,\n\n    onComplete: function(instance, resources) {\n        $(this).addClass('complete');\n    },\n\n    onProgress: function(instance, resource) {\n        $(this)\n            .find('[data-percentage]')\n            .attr('data-percentage', instance.percentage)\n            .closest('.playground__percentage')\n            .addClass('visible');\n    },\n\n    onLoad: function(instance, resource) {\n        $(this).addClass('has-loads');\n    },\n    onError: function(instance, resource) {\n        $(this).addClass('has-errors');\n    }\n});*/\n\ndocument.addEventListener('resourceLoad', e => {\n    consoleLog('Loader(): ' + e.detail.element);\n});\n\ndocument.addEventListener('resourceError', e => {\n    consoleLog('Loader(): ' + e.detail.element);\n});\n\n[...document.querySelectorAll('figure img, figure video')].forEach(el => {\n    el.addEventListener('resourceLoad', e => e.detail.element.closest('figure').classList.add('loaded'));\n    el.addEventListener('resourceError', e => e.detail.element.closest('figure').classList.add('loaded-error'));\n});\n\nlet instance;\nlet instanceSequentialMode = true;\n\ndocument.querySelector('.program-mode--sequential').addEventListener('click', () => {\n    if (instance !== null) {\n        return;\n    }\n\n    document.querySelector('.program-mode--parallel').style.display = 'block';\n    document.querySelector('.program-mode--sequential').style.display = 'none';\n\n    instanceSequentialMode = true;\n    consoleLog('Loader(): Sequential Mode');\n});\n\ndocument.querySelector('.program-mode--parallel').addEventListener('click', () => {\n    if (instance !== null) {\n        return;\n    }\n\n    document.querySelector('.program-mode--sequential').style.display = 'block';\n    document.querySelector('.program-mode--parallel').style.display = 'none';\n\n    instanceSequentialMode = false;\n    consoleLog('Loader(): Parallel Mode');\n});\n\n[...document.querySelectorAll('[class*=\"program-load\"]')].forEach(el =>\n    el.addEventListener('click', () => {\n        if (instance) {\n            consoleLog('Loader(): Aborted...');\n\n            instance.abort();\n            instance = null;\n\n            document.querySelector('.program-load--run').style.display = 'block';\n            document.querySelector('.program-load--kill').style.display = 'none';\n        } else {\n            document.querySelector('.program-load--run').style.display = 'none';\n            document.querySelector('.program-load--kill').style.display = 'block';\n\n            let randomResources = [];\n\n            for (let i = 0; i < 10; i++) {\n                let letters = '0123456789ABCDEF',\n                    colors = [];\n\n                for (let ii = 0; ii < 2; ii++) {\n                    let color = '';\n                    for (let c = 0; c < 6; c++) {\n                        color += letters[Math.floor(Math.random() * 16)];\n                    }\n                    colors[ii] = color;\n                }\n\n                randomResources.push('//placehold.it/720x720/' + colors[0] + '/' + colors[1] + '.jpg');\n            }\n\n            instance = new Loader({\n                sequential: instanceSequentialMode\n            });\n\n            instance.collection = randomResources;\n\n            consoleLog('Loader(): 0% - Starting...');\n\n            instance.progress(resource => {\n                consoleLog('Loader(): ' + instance.percentage + '%');\n            });\n\n            instance.done(resources => {\n                consoleLog('Loader(): 100% - Done!!');\n                document.querySelector('.program-load--run').style.display = 'block';\n                document.querySelector('.program-load--kill').style.display = 'none';\n\n                instance = null;\n            });\n\n            instance.load();\n        }\n    })\n);\n"],"file":"test.min.js"}