<!DOCTYPE html>
<html>
<head>

    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../../nitejs/dist/jquery.nite.js" ></script>
    <script src="../dist/jquery.nite.preloader.js" ></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">

    <title>Nite Preloader Playground</title>

    <style>
        html, body, * {
            margin: 0;
            box-sizing: border-box;
        }
        .nite-preload {
            border: 10px solid blue;
            transition: border-color .4s linear;
        }
        .nite-preload figure {
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }
        .nite-preload.loaded {
            border-color: red;
        }
        .nite-preload figure,
        .nite-preload .target {
            width: 100%;
        }
        .nite-preload .target {
            height: 100%;
            opacity: 0;
            transition: opacity .4s linear .4s;
        }
        .nite-preload .target.loaded {
            opacity: 1;
        }
    </style>

</head>
<body>

<section class="nite-preload">

    <figure>
        <img class="target" data-nite-src="http://placehold.it/720x720/c2b6f9.jpg" />
    </figure>

    <figure>
        <img class="target" data-nite-src="http://placehold.it/720x720/fed4bc.jpg" />
    </figure>

    <figure>
        <img class="target" data-nite-src="http://placehold.it/720x720/bbefda.jpg" />
    </figure>

    <figure>
        <img class="target" data-nite-src="http://placehold.it/720x720/c0d4f7.jpg" />
    </figure>

    <figure>
        <video class="target">
            <source data-nite-src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
            <source data-nite-src="https://www.w3schools.com/html/mov_bbb.ogg" type="video/ogg">
        </video>
    </figure>

</section>

<script>
    (function($){


        // - - - - - - - - - - - - -
        // instance mode
        // - - - - - - - - - - - - -

    /*
        let instance = new $.nitePreload([
            'http://placehold.it/720x720/d5dcfc/ffffff.jpg',
            'http://placehold.it/720x720/d9cbf9/ffffff.gif',
            'http://placehold.it/720x720/c8fdcc/ffffff.png'
        ]);
    */

    /*
        instance.abort();
    */

    /*
        instance.progress(function(url){

            console.log(instance.percentage);

            console.log('loaded -> '+ url);

        });
    /*

    /* todo maybe?
        instance.success(function(url){
            console.log('err w/ '+url)
        });
        instance.error(function(url){
            console.log('err w/ '+url)
        });
    */

    /*
        instance.done(function(){

            console.log('done');

        });
    */
        // - - - - - - - - - - - - -


        // - - - - - - - - - - - - -
        // object method mode
        // - - - - - - - - - - - - -
        $('section.nite-preload').nitePreload({

            srcAttr       : 'data-nite-src',
            srcsetAttr    : 'data-nite-srcset',

            visible       : true,

            sequential    : true,

            backgrounds   : true,
            extraAttrs    : [],

            playthrough   : true

        }, function(){

            console.log(this, 'method cb');

        });

    /**/
        $(document).on('niteLoad.nite niteError.nite', function(e, $el){

            $el.addClass('loaded');

        });
    /**/

    /* // todo: this doesn't work for some reason...
        $(document).on('niteLoad.nite niteError.nite', 'img', function(e){
            console.log($(this));
        });
    /**/

    /**/
        $('.target').on('niteLoad.nite niteError.nite', function(e){

            console.log(this, 'event cb');

        });
    /**/
        // - - - - - - - - - - - - - */

    })(jQuery);
</script>

</body>
</html>